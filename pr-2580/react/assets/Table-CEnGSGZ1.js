import{j as l}from"./jsx-runtime-D_zvdyIk.js";import{R as e,r as X}from"./iframe-DbWx9qSi.js";import{c as x}from"./index-YVRPNxbt.js";var w=(s=>(s.ASC="ASC",s.DESC="DESC",s))(w||{});const z={tableState:{sortedColumn:null,expandedRows:[]},setTableState:null,onRowSelect:null,onRowExpand:null,onSort:null},L=e.createContext(z),P=()=>e.useContext(L),j=e.forwardRef(({...s},o)=>l.jsx("td",{...s,ref:o}));j.displayName="TableCell";j.__docgenInfo={description:"",methods:[],displayName:"TableCell"};const A=e.forwardRef(({...s},o)=>{let r;const i=e.useCallback((a,m)=>{var c;const p=e.isValidElement(a)&&((c=a==null?void 0:a.type)==null?void 0:c.displayName)==="TableRow";return p&&!a.props.isSubRow&&(r=a.props.uniqueKey),p?e.cloneElement(a,{index:m,parentKey:r}):a},[]);return l.jsx("tbody",{...s,ref:o,children:e.Children.map(s.children,(a,m)=>(a==null?void 0:a.type)===e.Fragment?e.cloneElement(a,{children:e.Children.map(a.props.children,(p,c)=>i(p,c))}):i(a,m))})});A.displayName="TableBody";A.__docgenInfo={description:"",methods:[],displayName:"TableBody"};const K=e.forwardRef(({...s},o)=>l.jsx("thead",{...s,ref:o,children:e.Children.count(s.children)===1&&e.isValidElement(s.children)?e.cloneElement(s.children,{isHeaderRow:!0,index:-1}):e.Children.map(s.children,(r,i)=>{var a;return e.isValidElement(r)&&((a=r==null?void 0:r.type)==null?void 0:a.displayName)==="TableRow"?e.cloneElement(r,{index:i,hideSelect:!r.props.isHeaderRow}):r})}));K.displayName="TableHeader";K.__docgenInfo={description:"",methods:[],displayName:"TableHeader"};const q=e.forwardRef(({accessor:s,disableSort:o,className:r,sortDirection:i,onClick:a,children:m,...p},c)=>{const n=P(),[d,T]=e.useState(null),[S,E]=e.useState(w.ASC),[t,f]=e.useState(!1),R=b=>b===w.ASC?w.DESC:w.ASC,h=e.useCallback(()=>{var g;const b=d&&d.accessor===s?{...d,sortDirection:R(d.sortDirection)}:{accessor:s,sortDirection:w.DESC};n.setTableState({...n.tableState,sortedColumn:b}),b&&((g=n==null?void 0:n.onSort)==null||g.call(n,b))},[d,n]),v=e.useCallback(()=>!t||!S?"none":S===w.ASC?"ascending":"descending",[t,S]);return e.useEffect(()=>{f(!o&&!!n.onSort)},[o,n.onSort]),e.useEffect(()=>{T(n.tableState.sortedColumn)},[n.tableState.sortedColumn]),e.useEffect(()=>{i&&n.onSort&&n.setTableState({...n.tableState,sortedColumn:{accessor:s,sortDirection:i}})},[i,n.onSort]),e.useEffect(()=>{E(t&&(d==null?void 0:d.accessor)===s?d==null?void 0:d.sortDirection:null)},[t,d]),l.jsx("th",{className:x(r,{"sg-sortable":t}),onClick:t?h:a,ref:c,"aria-sort":v(),...p,children:t?l.jsx("button",{className:"sg-table-sort",children:m}):m})});q.displayName="TableHeaderCell";q.__docgenInfo={description:"",methods:[],displayName:"TableHeaderCell",props:{accessor:{required:!1,tsType:{name:"T"},description:""},disableSort:{required:!1,tsType:{name:"boolean"},description:""},sortDirection:{required:!1,tsType:{name:"SortDirection"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const $=l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",children:l.jsx("path",{d:"M119.5 326.9L3.5 209.1c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0L128 287.3l100.4-102.2c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L136.5 327c-4.7 4.6-12.3 4.6-17-.1z"})}),F=l.jsx("svg",{name:"angle-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",children:l.jsx("path",{d:"M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z"})}),B=e.forwardRef(({className:s,isHeaderRow:o,hideSelect:r,uniqueKey:i,parentKey:a,checked:m=!1,indeterminate:p=!1,isSubRow:c=!1,isExpanded:n=!1,checkboxProps:d={},collapseButtonProps:T={},...S},E)=>{var D;const t=P(),[f,R]=e.useState(i),[h,v]=e.useState(!1),[b,g]=e.useState(n),[N,H]=e.useState(n),[_,M]=e.useState(null),[I,C]=e.useState(((D=t.tableState)==null?void 0:D.expandedRows)||[]),O=X.useId(),k=e.useCallback(()=>{const u=[...I],y=u.indexOf(f);if(n&&y===-1)u.push(f);else if(y>-1){const J=u.indexOf(f);u.splice(J,1)}t.setTableState({...t.tableState,expandedRows:u}),C(u)},[n,f]);e.useEffect(()=>{R(o?"all":i||O)},[i,o]),e.useEffect(()=>{C(t.tableState.expandedRows||[])},[t.tableState.expandedRows]),e.useEffect(()=>{g(n),!c&&!o&&t.onRowExpand&&k()},[n,k]),e.useEffect(()=>{M(o?{disableSort:!0}:null)},[o]),e.useEffect(()=>{H(!(o||c))},[o,c]),e.useEffect(()=>{t.onRowExpand&&v(c&&I.indexOf(a)>-1)},[I]);const V=o?q:j;return l.jsxs("tr",{...S,ref:E,className:x(s,{"sub-row":c,expanded:n,collapsible:N&&!!t.onRowExpand,show:h}),children:[!!t.onRowExpand&&l.jsx(V,{..._,className:x({"collapse-control":N}),children:N&&l.jsx("button",{...T,className:x("collapse-btn",T.className),onClick:()=>{var u;return(u=t==null?void 0:t.onRowExpand)==null?void 0:u.call(t,!n,f)},children:l.jsx("div",{className:"icon-holder",children:b?$:F})})}),!!t.onRowSelect&&l.jsx(V,{..._,className:x({"select-control":!(r||c)}),children:!(r||c)&&l.jsxs("label",{className:"form-control p-0",children:[l.jsx("input",{type:"checkbox",checked:m,ref:u=>{u&&(u.indeterminate=p&&!m)},name:`tb_checkbox_${f}`,id:`tb_checkbox_${f}`,onChange:u=>{var y;return(y=t==null?void 0:t.onRowSelect)==null?void 0:y.call(t,u,f)}}),l.jsx("i",{className:"m-0"})]})}),S.children]})});B.displayName="TableRow";B.__docgenInfo={description:"",methods:[],displayName:"TableRow",props:{checked:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},indeterminate:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHeaderRow:{required:!1,tsType:{name:"boolean"},description:""},hideSelect:{required:!1,tsType:{name:"boolean"},description:""},uniqueKey:{required:!1,tsType:{name:"string"},description:""},parentKey:{required:!1,tsType:{name:"string"},description:""},isExpanded:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSubRow:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},collapseButtonProps:{required:!1,tsType:{name:"JSX.IntrinsicElements['button']",raw:"JSX.IntrinsicElements['button']"},description:"",defaultValue:{value:"{}",computed:!1}},checkboxProps:{required:!1,tsType:{name:"JSX.IntrinsicElements['input']",raw:"JSX.IntrinsicElements['input']"},description:"",defaultValue:{value:"{}",computed:!1}}}};const U=e.memo(e.forwardRef(({onRowSelect:s,onRowExpand:o,onSort:r,sortedColumn:i=null,className:a,children:m,...p},c)=>{const[n,d]=e.useState({expandedRows:[],sortedColumn:i});return l.jsx(L.Provider,{value:{tableState:n,onSort:r,onRowSelect:s,onRowExpand:o,setTableState:d},children:l.jsx("table",{...p,className:x("table",a),ref:c,children:m})})}));U.__docgenInfo={description:"",methods:[],displayName:"Table",props:{onRowSelect:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  event: React.ChangeEvent<HTMLInputElement>,
  rowKey: string,
) => void`,signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"},{type:{name:"string"},name:"rowKey"}],return:{name:"void"}}},description:"callback when row is selected"},onRowExpand:{required:!1,tsType:{name:"signature",type:"function",raw:"(isExpanded: boolean, rowKey: string) => void",signature:{arguments:[{type:{name:"boolean"},name:"isExpanded"},{type:{name:"string"},name:"rowKey"}],return:{name:"void"}}},description:"callback when row is expanded"},onSort:{required:!1,tsType:{name:"signature",type:"function",raw:"(sortedColumn: SortedColumn) => void",signature:{arguments:[{type:{name:"SortedColumn"},name:"sortedColumn"}],return:{name:"void"}}},description:"callback when column is sorted"},sortedColumn:{required:!1,tsType:{name:"union",raw:"SortedColumn | null",elements:[{name:"SortedColumn"},{name:"null"}]},description:"preset sorted column",defaultValue:{value:"null",computed:!1}}}};export{w as S,U as T,K as a,B as b,q as c,A as d,j as e};
