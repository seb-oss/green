{"version":3,"file":"7568.19213452.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AAiOA;AAGA;AACA;;AAEA;AACA;AAGA;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAIA;AAGA;;;;;;AAOA;;AAEA;AACA;;AAEA;;;AAGA;;AAEA;;;AAKA;;;;AAMA;AAGA;AACA;;AAEA;;;;;AAKA;;;;;;AAOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;AAcA;AACA;;;;;;;AAOA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;;;AAKA;;;AAOA;AACA;;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;AAQA;;;;AAMA;AAOA;;AAEA;;AAGA;AACA;;;;AAMA;AAIA;;AAEA;;;;;;AASA;AAuDA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5dA;AACA;;AAMA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACtGA;AD8GA;;AAGA;;;;;AAOA;;AAGA;;AAsBA;AAGA;AAMA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;;AAGA;AAGA;AACA;;;;;;;;AAaA","sources":["webpack://green/./dist/libs/core/src/components/datepicker/datepicker.component.js","webpack://green/./dist/libs/core/src/components/calendar/calendar.component.js","webpack://green/./dist/libs/core/src/components/calendar/functions.js"],"sourcesContent":["import {\n  __decorateClass,\n  __privateAdd,\n  __privateGet,\n  __privateMethod,\n  __privateSet\n} from \"../../chunks/chunk.QU3DSPNU.js\";\nvar _utcHours, _valueOnOpen, _Datepicker_instances, shouldShowFooter_fn, renderBackToValidRangeButton_fn, focusDate_fn, getSpinnerLabel_fn, getMinSpinnerValue_fn, getMaxSpinnerValue_fn, dispatchChangeEvent_fn, dispatchInputEvent_fn, _handleSpinnerFocus, _handleClipboardCopy, _handleClipboardPaste, _handleFieldClick, _handleCalendarChange, _handleMonthChange, _handleYearChange, _handleIncrementFocusedMonth, _handleDecrementFocusedMonth, _handleCalendarFocusChange, _handlePopoverStateChange, _handleSpinnerKeydown, parseDateFormat_fn, _handleSpinnerChange, _spinnerState, years_get, isValueOutsideRange_get;\nimport { localized, msg } from \"@lit/localize\";\nimport { nothing } from \"lit\";\nimport { property, query, queryAll, queryAsync, state } from \"lit/decorators.js\";\nimport { join } from \"lit/directives/join.js\";\nimport { map } from \"lit/directives/map.js\";\nimport { repeat } from \"lit/directives/repeat.js\";\nimport { until } from \"lit/directives/until.js\";\nimport { when } from \"lit/directives/when.js\";\nimport { isSameDay, lastDayOfMonth } from \"date-fns\";\nimport { GdsButton } from \"../../components/button/button.component.js\";\nimport { GdsDropdown } from \"../../components/dropdown/dropdown.component.js\";\nimport { GdsFlex } from \"../../components/flex/flex.component.js\";\nimport { gdsCustomElement, html } from \"../../scoping.js\";\nimport formControlHostStyle from \"../../shared-styles/form-control-host.style.js\";\nimport { tokens } from \"../../tokens.style.js\";\nimport { TransitionalStyles } from \"../../transitional-styles.js\";\nimport { watch } from \"../../utils/decorators/index.js\";\nimport {\n  dateArrayConverter,\n  dateConverter\n} from \"../../utils/helpers/attribute-converters.js\";\nimport {\n  withLayoutChildProps,\n  withMarginProps,\n  withSizeXProps\n} from \"../../utils/mixins/declarative-layout-mixins.js\";\nimport { GdsCalendar } from \"../calendar/calendar.component.js\";\nimport { GdsFormControlElement } from \"../form/form-control.js\";\nimport { IconCalendar } from \"../icon/icons/calendar.component.js\";\nimport { IconCalenderAdd } from \"../icon/icons/calender-add.component.js\";\nimport { IconChevronLeft } from \"../icon/icons/chevron-left.component.js\";\nimport { IconChevronRight } from \"../icon/icons/chevron-right.component.js\";\nimport { GdsPopover } from \"../popover/popover.component.js\";\nimport { GdsDatePartSpinner } from \"./date-part-spinner.js\";\nimport DatepickerStyles from \"./datepicker.styles.js\";\nlet Datepicker = class extends GdsFormControlElement {\n  constructor() {\n    super();\n    __privateAdd(this, _Datepicker_instances);\n    this.min = new Date((/* @__PURE__ */ new Date()).getFullYear() - 10, 0, 1);\n    this.max = new Date((/* @__PURE__ */ new Date()).getFullYear() + 10, 0, 1);\n    this.open = false;\n    this.supportingText = \"\";\n    this.size = \"large\";\n    this.plain = false;\n    this.showWeekNumbers = false;\n    this.hideLabel = false;\n    this.clearable = false;\n    this.hideTodayButton = false;\n    __privateAdd(this, _utcHours, 12);\n    this.disabledWeekends = false;\n    this.showExtendedSupportingText = false;\n    this._focusedMonth = (/* @__PURE__ */ new Date()).getMonth();\n    this._focusedYear = (/* @__PURE__ */ new Date()).getFullYear();\n    this._dateFormatLayout = __privateMethod(this, _Datepicker_instances, parseDateFormat_fn).call(this, \"y-m-d\");\n    __privateAdd(this, _valueOnOpen);\n    __privateAdd(this, _handleSpinnerFocus, (e) => {\n      this._elTrigger.then((field) => {\n        document.getSelection()?.removeAllRanges();\n        const range = new Range();\n        range.setStart(field.firstChild, 0);\n        range.setEnd(field.lastChild, 4);\n        document.getSelection()?.addRange(range);\n      });\n    });\n    __privateAdd(this, _handleClipboardCopy, (e) => {\n      this._elFieldAsync.then((field) => {\n        if (e.currentTarget !== field) return;\n        e.preventDefault();\n        e.clipboardData?.setData(\"text/plain\", this.displayValue);\n      });\n    });\n    __privateAdd(this, _handleClipboardPaste, (e) => {\n      this._elFieldAsync.then((field) => {\n        if (e.currentTarget !== field) return;\n        e.preventDefault();\n        const pasted = e.clipboardData?.getData(\"text/plain\");\n        if (!pasted) return;\n        let pastedDate = /* @__PURE__ */ new Date(\"-\");\n        const invalid = \"Invalid Date\";\n        const parts = pasted.split(this._dateFormatLayout.delimiter);\n        if (parts.length === 3) {\n          const layout = this._dateFormatLayout.layout;\n          const year = parseInt(parts[layout.findIndex((f) => f.token === \"y\")]);\n          const month = parseInt(parts[layout.findIndex((f) => f.token === \"m\")]) - 1;\n          const day = parseInt(parts[layout.findIndex((f) => f.token === \"d\")]);\n          if (!isNaN(year) && !isNaN(month) && !isNaN(day)) {\n            pastedDate = /* @__PURE__ */ new Date(`${year}-${month + 1}-${day}`);\n          }\n        }\n        if (pastedDate.toString() === invalid) {\n          pastedDate = new Date(pasted);\n          if (pastedDate.toString() === invalid) {\n            return;\n          }\n        }\n        this.value = pastedDate;\n        __privateMethod(this, _Datepicker_instances, dispatchChangeEvent_fn).call(this);\n      });\n    });\n    __privateAdd(this, _handleFieldClick, (e) => {\n      this._elSpinners[0]?.focus();\n    });\n    __privateAdd(this, _handleCalendarChange, (e) => {\n      e.stopPropagation();\n      const date = new Date(e.detail);\n      date.setUTCHours(this.utcHours, 0, 0, 0);\n      this.value = date;\n      this.open = false;\n      __privateMethod(this, _Datepicker_instances, dispatchChangeEvent_fn).call(this);\n      __privateMethod(this, _Datepicker_instances, dispatchInputEvent_fn).call(this);\n    });\n    __privateAdd(this, _handleMonthChange, (e) => {\n      e.stopPropagation();\n      this._focusedMonth = e.target?.value;\n    });\n    __privateAdd(this, _handleYearChange, (e) => {\n      e.stopPropagation();\n      this._focusedYear = e.target?.value;\n    });\n    __privateAdd(this, _handleIncrementFocusedMonth, (_e) => {\n      if (this._focusedMonth < 11) {\n        this._focusedMonth++;\n      } else if (this._focusedMonth == 11 && this._focusedYear != this.max.getFullYear()) {\n        this._focusedMonth = 0;\n        this._focusedYear++;\n      }\n    });\n    __privateAdd(this, _handleDecrementFocusedMonth, (_e) => {\n      if (this._focusedMonth > 0) {\n        this._focusedMonth--;\n      } else if (this._focusedMonth == 0 && this._focusedYear != this.min.getFullYear()) {\n        this._focusedMonth = 11;\n        this._focusedYear--;\n      }\n    });\n    __privateAdd(this, _handleCalendarFocusChange, async () => {\n      this._focusedMonth = (await this._elCalendar).focusedMonth;\n      this._focusedYear = (await this._elCalendar).focusedYear;\n      this.value = new Date((await this._elCalendar).focusedDate);\n      this.requestUpdate();\n      __privateMethod(this, _Datepicker_instances, dispatchInputEvent_fn).call(this);\n    });\n    __privateAdd(this, _handlePopoverStateChange, async (e) => {\n      if (e.target !== e.currentTarget) return;\n      this.open = e.detail.open;\n      if (e.detail.reason === \"close\") {\n        const calValue = (await this._elCalendar).value;\n        if (!calValue) {\n          this.value = void 0;\n          __privateMethod(this, _Datepicker_instances, dispatchChangeEvent_fn).call(this);\n          return;\n        }\n        const hasChanged = !isSameDay(\n          calValue || /* @__PURE__ */ new Date(0),\n          __privateGet(this, _valueOnOpen) || /* @__PURE__ */ new Date(0)\n        );\n        if (hasChanged) {\n          this.value = new Date(calValue);\n          __privateMethod(this, _Datepicker_instances, dispatchChangeEvent_fn).call(this);\n        }\n        if (this.value) {\n          this._focusedMonth = this.value.getMonth();\n          this._focusedYear = this.value.getFullYear();\n        }\n      }\n      if (e.detail.reason === \"cancel\") {\n        this.value = __privateGet(this, _valueOnOpen);\n        __privateMethod(this, _Datepicker_instances, dispatchInputEvent_fn).call(this);\n      }\n    });\n    __privateAdd(this, _handleSpinnerKeydown, (e) => {\n      const index = Array.from(this._elSpinners).findIndex(\n        (spinner) => spinner === e.target\n      );\n      if (e.key === \"ArrowRight\") {\n        const next = this._elSpinners[index + 1];\n        if (next) next.focus();\n      }\n      if (e.key === \"ArrowLeft\") {\n        const prev = this._elSpinners[index - 1];\n        if (prev) prev.focus();\n      }\n    });\n    __privateAdd(this, _handleSpinnerChange, (val, name) => {\n      __privateGet(this, _spinnerState)[name] = val;\n      const newDate = /* @__PURE__ */ new Date(\"0000-01-01\");\n      newDate.setUTCHours(this.utcHours, 0, 0, 0);\n      newDate.setUTCFullYear(parseInt(__privateGet(this, _spinnerState).year));\n      newDate.setUTCMonth(parseInt(__privateGet(this, _spinnerState).month) - 1);\n      const lastOfMonth = lastDayOfMonth(newDate).getDate();\n      const setDay = lastOfMonth < parseInt(__privateGet(this, _spinnerState).day) ? lastOfMonth : parseInt(__privateGet(this, _spinnerState).day);\n      newDate.setUTCDate(isNaN(setDay) ? 1 : setDay);\n      if (newDate.toString() === \"Invalid Date\") return;\n      this.value = newDate;\n      __privateMethod(this, _Datepicker_instances, dispatchChangeEvent_fn).call(this);\n      __privateMethod(this, _Datepicker_instances, dispatchInputEvent_fn).call(this);\n    });\n    /**\n     * The spinner state keeps track of the spinner values regardless of whether a complete date has been enter yet.\n     */\n    __privateAdd(this, _spinnerState, {\n      year: \"yyyy\",\n      month: \"mm\",\n      day: \"dd\"\n    });\n    GdsDatePartSpinner.define();\n  }\n  get type() {\n    return \"gds-datepicker\";\n  }\n  get value() {\n    return super.value;\n  }\n  set value(value) {\n    super.value = value;\n  }\n  get utcHours() {\n    return __privateGet(this, _utcHours);\n  }\n  set utcHours(value) {\n    __privateSet(this, _utcHours, value);\n    this._internalValue?.setUTCHours(value, 0, 0, 0);\n  }\n  get dateformat() {\n    return this._dateFormatLayout.layout.map((f) => f.token).join(this._dateFormatLayout.delimiter);\n  }\n  set dateformat(dateformat) {\n    this._dateFormatLayout = __privateMethod(this, _Datepicker_instances, parseDateFormat_fn).call(this, dateformat);\n  }\n  /**\n   * Get the currently focused date in the calendar popover. If no date is focused, or the calendar popover\n   * is closed, the value will be undefined.\n   */\n  async getFocusedDate() {\n    if (this.open) return this._elCalendar.then((el) => el.focusedDate);\n    else return void 0;\n  }\n  /**\n   * Get a string representation of the currently displayed value in the input field. The formatting will match the dateformat attribute.\n   */\n  get displayValue() {\n    return this._elField.innerText.replace(/\\s+/g, \"\");\n  }\n  /**\n   * A reference to a date cell element (<td>) inside the shadow root of the calendar primitive.\n   * Intended for use in integration tests.\n   */\n  async test_getDateCell(dayNumber) {\n    return this._elCalendar.then((el) => el.getDateCell(dayNumber));\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    TransitionalStyles.instance.apply(this, \"gds-datepicker\");\n  }\n  focus(options) {\n    this._getValidityAnchor()?.focus(options);\n  }\n  render() {\n    return html`\n      ${when(\n      !this.plain,\n      () => html`<gds-form-control-header\n            class=\"size-${this.size}\"\n            .showExtendedSupportingText=\"${this.showExtendedSupportingText}\"\n          >\n            <label id=\"label\" for=\"spinner-0\" slot=\"label\">${this.label}</label>\n            ${when(\n        this.supportingText.length > 0,\n        () => html`<span slot=\"supporting-text\" id=\"supporting-text\">\n                  ${this.supportingText}\n                </span>`\n      )}\n            <slot\n              id=\"supporting-text-slot\"\n              name=\"extended-supporting-text\"\n              slot=\"extended-supporting-text\"\n            ></slot>\n            <!-- @deprecated: use 'supporting-text' slot instead. Remove in 2.0 release. -->\n            <slot\n              id=\"sub-label-slot\"\n              name=\"sub-label\"\n              slot=\"supporting-text\"\n            ></slot>\n          </gds-form-control-header>`\n    )}\n      <gds-field-base\n        .size=${this.size}\n        .disabled=${this.disabled}\n        .invalid=${this.invalid}\n        @click=${__privateGet(this, _handleFieldClick)}\n        @copy=${__privateGet(this, _handleClipboardCopy)}\n        @paste=${__privateGet(this, _handleClipboardPaste)}\n        id=\"field\"\n      >\n        <div class=\"spinners\">\n          ${join(\n      map(\n        this._dateFormatLayout.layout,\n        (f, i) => html`<gds-date-part-spinner\n                  id=\"spinner-${i}\"\n                  aria-invalid=\"${this.invalid}\"\n                  class=\"spinner\"\n                  .length=${f.token === \"y\" ? 4 : 2}\n                  .value=${__privateGet(this, _spinnerState)[f.name]}\n                  aria-valuemin=${__privateMethod(this, _Datepicker_instances, getMinSpinnerValue_fn).call(this, f.name)}\n                  aria-valuemax=${__privateMethod(this, _Datepicker_instances, getMaxSpinnerValue_fn).call(this, f.name)}\n                  aria-label=${__privateMethod(this, _Datepicker_instances, getSpinnerLabel_fn).call(this, f.name)}\n                  aria-describedby=\"supporting-text supporting-text-slot sub-label-slot message\"\n                  data-max-width=${__privateMethod(this, _Datepicker_instances, getMaxSpinnerValue_fn).call(this, f.name).toString().length}\n                  @keydown=${__privateGet(this, _handleSpinnerKeydown)}\n                  @change=${(e) => __privateGet(this, _handleSpinnerChange).call(this, e.detail.value, f.name)}\n                  @focus=${__privateGet(this, _handleSpinnerFocus)}\n                  @touchend=${(e) => {\n          this.open = true;\n          e.preventDefault();\n        }}\n                ></gds-date-part-spinner>`\n      ),\n      html`<span class=\"separator\"\n              >${this._dateFormatLayout.delimiter}</span\n            >`\n    )}\n        </div>\n        <gds-button\n          id=\"calendar-button\"\n          slot=\"action\"\n          size=\"${this.size === \"small\" ? \"xs\" : \"small\"}\"\n          rank=\"tertiary\"\n          variant=${this.invalid ? \"negative\" : \"\"}\n          aria-label=\"${msg(\"Open calendar modal\")}\"\n          aria-haspopup=\"menu\"\n          aria-expanded=${this.open}\n          aria-controls=\"calendar-popover\"\n          aria-describedby=\"label\"\n          .disabled=${this.disabled}\n        >\n          ${when(\n      this.size === \"small\",\n      () => html`<gds-icon-calender-add\n                stroke=\"1.6\"\n                style=\"line-height: 16px\"\n              ></gds-icon-calender-add>`,\n      () => html`<gds-icon-calender-add></gds-icon-calender-add>`\n    )}\n        </gds-button>\n      </gds-field-base>\n\n      ${when(\n      __privateMethod(this, _Datepicker_instances, shouldShowFooter_fn).call(this),\n      () => html`<gds-form-control-footer\n            class=\"size-${this.size}\"\n            .errorMessage=${this.invalid ? this.errorMessage : void 0}\n          >\n            ${``}\n            <slot id=\"message\" name=\"message\" slot=\"message\">\n              <gds-icon-triangle-exclamation\n                solid\n              ></gds-icon-triangle-exclamation>\n              ${this.errorMessage}\n            </slot>\n          </gds-form-control-footer>`\n    )}\n\n      <gds-popover\n        autofocus\n        .triggerRef=${this._elTrigger}\n        .anchorRef=${this._elFieldAsync}\n        .open=${this.open}\n        @gds-ui-state=${__privateGet(this, _handlePopoverStateChange)}\n        label=${this.label}\n        id=\"calendar-popover\"\n        .placement=${\"bottom-end\"}\n        .calcMinWidth=${() => this.showWeekNumbers ? \"350px\" : \"305px\"}\n        .useModalInMobileView=${true}\n        @focusin=${async (e) => {\n      const isPopover = e.target?.id === \"calendar-popover\";\n      if (!isPopover) return;\n      this._elCalendar.then((cal) => cal.focus());\n    }}\n      >\n        <gds-div overflow=\"auto\">\n          <gds-flex\n            align-items=\"center\"\n            justify-content=\"space-between\"\n            gap=\"xs; xs { s }\"\n            padding=\"m xs 0 xs; xs { m m 0 m }\"\n          >\n            <gds-button\n              @click=${__privateGet(this, _handleDecrementFocusedMonth)}\n              aria-label=${msg(\"Switch to previous month\")}\n              rank=\"tertiary\"\n              size=\"small\"\n            >\n              <gds-icon-chevron-left></gds-icon-chevron-left>\n            </gds-button>\n            <gds-dropdown\n              .value=${this._focusedMonth.toString()}\n              @change=${__privateGet(this, _handleMonthChange)}\n              .maxHeight=${300}\n              label=\"${msg(\"Month\")}\"\n              size=\"small\"\n              class=\"month\"\n              hide-label\n            >\n              <gds-option value=\"0\">${msg(\"January\")}</gds-option>\n              <gds-option value=\"1\">${msg(\"February\")}</gds-option>\n              <gds-option value=\"2\">${msg(\"March\")}</gds-option>\n              <gds-option value=\"3\">${msg(\"April\")}</gds-option>\n              <gds-option value=\"4\">${msg(\"May\")}</gds-option>\n              <gds-option value=\"5\">${msg(\"June\")}</gds-option>\n              <gds-option value=\"6\">${msg(\"July\")}</gds-option>\n              <gds-option value=\"7\">${msg(\"August\")}</gds-option>\n              <gds-option value=\"8\">${msg(\"September\")}</gds-option>\n              <gds-option value=\"9\">${msg(\"October\")}</gds-option>\n              <gds-option value=\"10\">${msg(\"November\")}</gds-option>\n              <gds-option value=\"11\">${msg(\"December\")}</gds-option>\n            </gds-dropdown>\n            <gds-dropdown\n              .value=${this._focusedYear.toString()}\n              @change=${__privateGet(this, _handleYearChange)}\n              .maxHeight=${300}\n              label=\"${msg(\"Year\")}\"\n              size=\"small\"\n              class=\"year\"\n              hide-label\n            >\n              ${repeat(\n      __privateGet(this, _Datepicker_instances, years_get),\n      (year) => year,\n      (year) => html`<gds-option value=${year}>${year}</gds-option>`\n    )}\n            </gds-dropdown>\n            <gds-button\n              @click=${__privateGet(this, _handleIncrementFocusedMonth)}\n              aria-label=${msg(\"Switch to next month\")}\n              rank=\"tertiary\"\n              size=\"small\"\n            >\n              <gds-icon-chevron-right></gds-icon-chevron-right>\n            </gds-button>\n          </gds-flex>\n\n          <gds-calendar\n            id=\"calendar\"\n            @change=${__privateGet(this, _handleCalendarChange)}\n            @gds-date-focused=${__privateGet(this, _handleCalendarFocusChange)}\n            .focusedMonth=${this._focusedMonth}\n            .focusedYear=${this._focusedYear}\n            .value=${this.value}\n            .min=${this.min}\n            .max=${this.max}\n            .showWeekNumbers=${this.showWeekNumbers}\n            .disabledWeekends=${this.disabledWeekends}\n            .disabledDates=${this.disabledDates}\n          ></gds-calendar>\n\n          ${when(\n      this.clearable || !this.hideTodayButton,\n      () => html`\n              <gds-flex\n                align-items=\"center\"\n                justify-content=\"space-between\"\n                padding=\"m m m m\"\n              >\n                ${when(\n        this.clearable,\n        () => html` <gds-button\n                      id=\"clear-button\"\n                      rank=\"tertiary\"\n                      size=\"small\"\n                      @click=${(e) => {\n          e.stopPropagation();\n          this.value = void 0;\n          this.open = false;\n          __privateMethod(this, _Datepicker_instances, dispatchInputEvent_fn).call(this);\n          __privateMethod(this, _Datepicker_instances, dispatchChangeEvent_fn).call(this);\n        }}\n                      aria-label=${msg(\"Clear selected date\")}\n                    >\n                      ${msg(\"Clear\")}\n                    </gds-button>`\n      )}\n                ${until(__privateMethod(this, _Datepicker_instances, renderBackToValidRangeButton_fn).call(this), nothing)}\n                ${when(\n        !this.hideTodayButton,\n        () => html` <gds-button\n                      id=\"today-button\"\n                      rank=\"tertiary\"\n                      size=\"small\"\n                      @click=${(e) => {\n          e.stopPropagation();\n          __privateMethod(this, _Datepicker_instances, focusDate_fn).call(this, /* @__PURE__ */ new Date());\n        }}\n                      aria-label=${msg(\"Select today's date\")}\n                    >\n                      ${msg(\"Today\")}\n                    </gds-button>`\n      )}\n              </gds-flex>\n            `\n    )}\n        </gds-div>\n      </gds-popover>\n    `;\n  }\n  _getValidityAnchor() {\n    return this._elSpinners[0];\n  }\n  _handleValueChange() {\n    if (this.value === \"\") this.value = void 0;\n    if (!this.value) {\n      __privateSet(this, _spinnerState, {\n        year: \"yyyy\",\n        month: \"mm\",\n        day: \"dd\"\n      });\n      return;\n    }\n    const date = this.value;\n    this._focusedMonth = date.getMonth();\n    this._focusedYear = date.getFullYear();\n    const year = date.getFullYear().toString();\n    const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n    const day = date.getDate().toString().padStart(2, \"0\");\n    __privateSet(this, _spinnerState, { year, month, day });\n  }\n  _handleOpenChange() {\n    if (this.open) {\n      __privateSet(this, _valueOnOpen, this.value);\n      this._elCalendar.then((el) => el.focus());\n    }\n  }\n};\n_utcHours = new WeakMap();\n_valueOnOpen = new WeakMap();\n_Datepicker_instances = new WeakSet();\nshouldShowFooter_fn = function() {\n  return !this.plain;\n};\nrenderBackToValidRangeButton_fn = async function() {\n  const focusedDate = await this.getFocusedDate();\n  let buttonTxt = \"\";\n  let buttonAction;\n  if (focusedDate && focusedDate > this.max) {\n    buttonTxt = msg(\"Last available date\");\n    buttonAction = (e) => {\n      e.stopPropagation();\n      __privateMethod(this, _Datepicker_instances, focusDate_fn).call(this, this.max);\n    };\n  } else if (focusedDate && focusedDate < this.min) {\n    buttonTxt = msg(\"First available date\");\n    buttonAction = (e) => {\n      e.stopPropagation();\n      __privateMethod(this, _Datepicker_instances, focusDate_fn).call(this, this.min);\n    };\n  }\n  return html`${when(\n    buttonTxt.length > 0,\n    () => html`<gds-button rank=\"tertiary\" size=\"small\" @click=${buttonAction}>\n          ${buttonTxt}\n        </gds-button>`,\n    () => nothing\n  )}`;\n};\nfocusDate_fn = function(d) {\n  const focusDate = new Date(d);\n  this._elCalendar.then((el) => el.focusedDate = focusDate).then(__privateGet(this, _handleCalendarFocusChange));\n};\ngetSpinnerLabel_fn = function(name) {\n  const labels = {\n    year: msg(\"Year\"),\n    month: msg(\"Month\"),\n    day: msg(\"Day\")\n  };\n  return `${labels[name]} ${this.label}`;\n};\ngetMinSpinnerValue_fn = function(name) {\n  const min = {\n    year: 1900,\n    month: 1,\n    day: 1\n  };\n  return min[name];\n};\ngetMaxSpinnerValue_fn = function(name) {\n  const max = {\n    year: 9999,\n    month: 12,\n    day: 31\n  };\n  return max[name];\n};\ndispatchChangeEvent_fn = function() {\n  this.updateComplete.then(\n    () => this.dispatchStandardEvent(\"change\", {\n      bubbles: true,\n      composed: true\n    })\n  );\n};\ndispatchInputEvent_fn = function() {\n  this.updateComplete.then(\n    () => this.dispatchStandardEvent(\"input\", {\n      bubbles: true,\n      composed: true\n    })\n  );\n};\n_handleSpinnerFocus = new WeakMap();\n_handleClipboardCopy = new WeakMap();\n_handleClipboardPaste = new WeakMap();\n_handleFieldClick = new WeakMap();\n_handleCalendarChange = new WeakMap();\n_handleMonthChange = new WeakMap();\n_handleYearChange = new WeakMap();\n_handleIncrementFocusedMonth = new WeakMap();\n_handleDecrementFocusedMonth = new WeakMap();\n_handleCalendarFocusChange = new WeakMap();\n_handlePopoverStateChange = new WeakMap();\n_handleSpinnerKeydown = new WeakMap();\n/**\n * Takes a dateformat string from the dateformat attribute and turns it to a DateFormatLayout object used in rendering the template.\n */\nparseDateFormat_fn = function(dateformat) {\n  const delimiter = dateformat.replace(/[a-z0-9]/gi, \"\")[0];\n  const format = dateformat.split(delimiter);\n  const year = format.findIndex((f) => f === \"y\");\n  const month = format.findIndex((f) => f === \"m\");\n  const day = format.findIndex((f) => f === \"d\");\n  if (year === -1 || month === -1 || day === -1)\n    throw new Error(\"Invalid date format for <gds-datepicker>\");\n  const ordered = [year, month, day].sort((a, b) => a - b);\n  const orderedFormat = ordered.map((i) => format[i]).map((f) => ({\n    token: f,\n    name: f === \"y\" ? \"year\" : f === \"m\" ? \"month\" : \"day\"\n  }));\n  return { delimiter, layout: orderedFormat };\n};\n_handleSpinnerChange = new WeakMap();\n_spinnerState = new WeakMap();\nyears_get = function() {\n  const minYear = this.min.getFullYear();\n  const maxYear = this.max.getFullYear();\n  const isOutsideRange = __privateGet(this, _Datepicker_instances, isValueOutsideRange_get);\n  const valueYear = this.value?.getFullYear();\n  return {\n    *[Symbol.iterator]() {\n      if (isOutsideRange) yield valueYear;\n      for (let i = minYear; i <= maxYear; i++) yield i;\n    }\n  };\n};\nisValueOutsideRange_get = function() {\n  if (!this.value) return false;\n  return this.value.getFullYear() < this.min.getFullYear() || this.value.getFullYear() > this.max.getFullYear();\n};\nDatepicker.styles = [tokens, formControlHostStyle, DatepickerStyles];\n__decorateClass([\n  property({ converter: dateConverter })\n], Datepicker.prototype, \"value\", 1);\n__decorateClass([\n  property({ converter: dateConverter })\n], Datepicker.prototype, \"min\", 2);\n__decorateClass([\n  property({ converter: dateConverter })\n], Datepicker.prototype, \"max\", 2);\n__decorateClass([\n  property({ type: Boolean })\n], Datepicker.prototype, \"open\", 2);\n__decorateClass([\n  property({ attribute: \"supporting-text\" })\n], Datepicker.prototype, \"supportingText\", 2);\n__decorateClass([\n  property({ type: String })\n], Datepicker.prototype, \"size\", 2);\n__decorateClass([\n  property({ type: Boolean })\n], Datepicker.prototype, \"plain\", 2);\n__decorateClass([\n  property({ type: Boolean, attribute: \"show-week-numbers\" })\n], Datepicker.prototype, \"showWeekNumbers\", 2);\n__decorateClass([\n  property({ type: Boolean, attribute: \"hide-label\" })\n], Datepicker.prototype, \"hideLabel\", 2);\n__decorateClass([\n  property({ type: Boolean, attribute: \"clearable\" })\n], Datepicker.prototype, \"clearable\", 2);\n__decorateClass([\n  property({ type: Boolean, attribute: \"hide-today-button\" })\n], Datepicker.prototype, \"hideTodayButton\", 2);\n__decorateClass([\n  property({ type: Number, attribute: \"utc-hours\" })\n], Datepicker.prototype, \"utcHours\", 1);\n__decorateClass([\n  property()\n], Datepicker.prototype, \"dateformat\", 1);\n__decorateClass([\n  property({ type: Boolean, attribute: \"disabled-weekends\" })\n], Datepicker.prototype, \"disabledWeekends\", 2);\n__decorateClass([\n  property({ converter: dateArrayConverter, attribute: \"disabled-dates\" })\n], Datepicker.prototype, \"disabledDates\", 2);\n__decorateClass([\n  property({\n    attribute: \"show-extended-supporting-text\",\n    type: Boolean,\n    reflect: true\n  })\n], Datepicker.prototype, \"showExtendedSupportingText\", 2);\n__decorateClass([\n  queryAsync(\"#calendar-button\")\n], Datepicker.prototype, \"test_calendarButton\", 2);\n__decorateClass([\n  query(\"#clear-button\")\n], Datepicker.prototype, \"test_clearButton\", 2);\n__decorateClass([\n  query(\"#today-button\")\n], Datepicker.prototype, \"test_todayButton\", 2);\n__decorateClass([\n  state()\n], Datepicker.prototype, \"_focusedMonth\", 2);\n__decorateClass([\n  state()\n], Datepicker.prototype, \"_focusedYear\", 2);\n__decorateClass([\n  state()\n], Datepicker.prototype, \"_dateFormatLayout\", 2);\n__decorateClass([\n  queryAsync(\"#calendar\")\n], Datepicker.prototype, \"_elCalendar\", 2);\n__decorateClass([\n  queryAsync(\"#calendar-button\")\n], Datepicker.prototype, \"_elTrigger\", 2);\n__decorateClass([\n  queryAsync(\"#field\")\n], Datepicker.prototype, \"_elFieldAsync\", 2);\n__decorateClass([\n  queryAll(\"[role=spinbutton]\")\n], Datepicker.prototype, \"_elSpinners\", 2);\n__decorateClass([\n  query(\"#field\")\n], Datepicker.prototype, \"_elField\", 2);\n__decorateClass([\n  watch(\"value\")\n], Datepicker.prototype, \"_handleValueChange\", 1);\n__decorateClass([\n  watch(\"open\")\n], Datepicker.prototype, \"_handleOpenChange\", 1);\nDatepicker = __decorateClass([\n  localized()\n], Datepicker);\nlet GdsDatepicker = class extends withSizeXProps(\n  withMarginProps(withLayoutChildProps(Datepicker))\n) {\n};\nGdsDatepicker = __decorateClass([\n  gdsCustomElement(\"gds-datepicker\", {\n    dependsOn: [\n      GdsFlex,\n      GdsButton,\n      GdsDropdown,\n      GdsCalendar,\n      GdsPopover,\n      IconCalendar,\n      IconCalenderAdd,\n      IconChevronLeft,\n      IconChevronRight\n    ]\n  })\n], GdsDatepicker);\nexport {\n  GdsDatepicker\n};\n","import {\n  __decorateClass,\n  __privateAdd,\n  __privateMethod\n} from \"../../chunks/chunk.QU3DSPNU.js\";\nvar _GdsCalendar_instances, setSelectedDate_fn, handleKeyDown_fn;\nimport { localized, msg } from \"@lit/localize\";\nimport { html } from \"lit\";\nimport { property, query, state } from \"lit/decorators.js\";\nimport { classMap } from \"lit/directives/class-map.js\";\nimport { ifDefined } from \"lit/directives/if-defined.js\";\nimport { when } from \"lit/directives/when.js\";\nimport {\n  addDays,\n  addMonths,\n  getWeek,\n  isSameDay,\n  isSameMonth,\n  lastDayOfMonth,\n  setHours,\n  subMonths\n} from \"date-fns\";\nimport { GdsElement } from \"../../gds-element.js\";\nimport { gdsCustomElement } from \"../../scoping.js\";\nimport { tokens } from \"../../tokens.style.js\";\nimport { TransitionalStyles } from \"../../transitional-styles.js\";\nimport { watch } from \"../../utils/decorators/watch.js\";\nimport CalendarStyles from \"./calendar.styles.js\";\nimport { renderMonthGridView } from \"./functions.js\";\nlet GdsCalendar = class extends GdsElement {\n  constructor() {\n    super(...arguments);\n    __privateAdd(this, _GdsCalendar_instances);\n    this.min = new Date((/* @__PURE__ */ new Date()).getFullYear() - 10, 0, 1);\n    this.max = new Date((/* @__PURE__ */ new Date()).getFullYear() + 10, 0, 1);\n    this.focusedDate = /* @__PURE__ */ new Date();\n    this.disabledWeekends = false;\n    this.size = \"large\";\n    this.showWeekNumbers = false;\n    this.hideExtraneousDays = false;\n    this.hideDayNames = false;\n    this.dateLabelTemplate = (date) => date.toLocaleDateString(this._currentLocale, {\n      weekday: \"long\",\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\"\n    });\n    this._currentLocale = navigator.language;\n  }\n  get focusedMonth() {\n    return this.focusedDate.getMonth();\n  }\n  set focusedMonth(month) {\n    const lastOfSelectedMonth = lastDayOfMonth(\n      new Date(this.focusedYear, month, 1)\n    );\n    const newFocusedDate = new Date(this.focusedDate);\n    newFocusedDate.setDate(\n      Math.min(this.focusedDate.getDate(), lastOfSelectedMonth.getDate())\n    );\n    newFocusedDate.setMonth(month);\n    newFocusedDate.setHours(12, 0, 0, 0);\n    this.focusedDate = newFocusedDate;\n  }\n  get focusedYear() {\n    return this.focusedDate.getFullYear();\n  }\n  set focusedYear(year) {\n    this.focusedDate = new Date(this.focusedDate.setFullYear(year));\n  }\n  /**\n   * Returns the date cell element for the given day number.\n   */\n  getDateCell(dayNumber) {\n    return this.shadowRoot?.querySelector(`#dateCell-${dayNumber}`);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    TransitionalStyles.instance.apply(this, \"gds-calendar\");\n    this.addEventListener(\"keydown\", __privateMethod(this, _GdsCalendar_instances, handleKeyDown_fn));\n    window.addEventListener(\"lit-localize-status\", (e) => {\n      if (e.detail.status === \"ready\")\n        this._currentLocale = e.detail.readyLocale;\n    });\n  }\n  focus() {\n    super.focus();\n    this._elFocusedCell?.focus();\n  }\n  render() {\n    const currentDate = /* @__PURE__ */ new Date();\n    return html`<table\n      role=\"grid\"\n      aria-label=\"${ifDefined(this.label)}\"\n      class=\"${classMap({\n      small: Boolean(this.size === \"small\"),\n      indicators: Boolean(this.customizedDates),\n      \"show-week-numbers\": Boolean(this.showWeekNumbers)\n    })}\"\n    >\n      ${when(\n      !this.hideDayNames,\n      () => html`<thead role=\"rowgroup\">\n            <tr role=\"row\">\n              ${when(this.showWeekNumbers, () => html`<th></th>`)}\n              <th>${msg(\"Mon\").substring(0, 1)}</th>\n              <th>${msg(\"Tue\").substring(0, 1)}</th>\n              <th>${msg(\"Wed\").substring(0, 1)}</th>\n              <th>${msg(\"Thu\").substring(0, 1)}</th>\n              <th>${msg(\"Fri\").substring(0, 1)}</th>\n              <th>${msg(\"Sat\").substring(0, 1)}</th>\n              <th>${msg(\"Sun\").substring(0, 1)}</th>\n            </tr>\n          </thead>`\n    )}\n      <tbody role=\"rowgroup\">\n        ${renderMonthGridView(\n      this.focusedDate,\n      (weeks) => html`\n            ${weeks.map(\n        (week) => html`\n                <tr role=\"row\">\n                  ${when(\n          this.showWeekNumbers,\n          () => html`<td\n                        class=\"week-number disabled\"\n                        disabled\n                        scope=\"row\"\n                      >\n                        ${getWeek(week.days[0])}\n                      </td>`\n        )}\n                  ${week.days.map((day) => {\n          const customization = this.customizedDates && this.customizedDates.find((d) => isSameDay(d.date, day));\n          const displayOptions = {\n            // Defaults\n            color: \"currentColor\",\n            // Get baseline disabled state from the disabledDates prop (or false if unset)\n            disabled: Boolean(\n              this.disabledDates && this.disabledDates.some((d) => isSameDay(d, day))\n            ),\n            // Override with any customizations\n            ...customization\n          };\n          const isOutsideCurrentMonth = !isSameMonth(\n            this.focusedDate,\n            day\n          );\n          const isOutsideMinMax = (day < this.min || day > this.max) && !isSameDay(day, this.min) && !isSameDay(day, this.max);\n          const isWeekend = day.getDay() === 0 || day.getDay() === 6;\n          const isDisabled = displayOptions.disabled || isOutsideCurrentMonth || isOutsideMinMax || this.disabledWeekends && isWeekend;\n          const shouldRenderBlank = this.hideExtraneousDays && isOutsideCurrentMonth;\n          return shouldRenderBlank ? html`<td inert></td>` : html`\n                          <td\n                            role=\"${ifDefined(\n            isDisabled ? void 0 : \"gridcell\"\n          )}\"\n                            class=\"${classMap({\n            small: Boolean(this.size === \"small\"),\n            \"custom-date\": Boolean(customization),\n            disabled: Boolean(isDisabled),\n            today: isSameDay(currentDate, day)\n          })}\"\n                            ?disabled=${isDisabled}\n                            tabindex=\"${isSameDay(this.focusedDate, day) ? 0 : -1}\"\n                            aria-selected=\"${this.value && isSameDay(this.value, day) ? \"true\" : \"false\"}\"\n                            aria-label=\"${this.dateLabelTemplate(day)}\"\n                            @click=${() => isDisabled ? null : __privateMethod(this, _GdsCalendar_instances, setSelectedDate_fn).call(this, day)}\n                            id=\"dateCell-${day.getDate()}\"\n                          >\n                            <span\n                              class=\"number\"\n                              style=\"--_color: ${displayOptions ? displayOptions?.color : \"\"}\"\n                              >${day.getDate()}</span\n                            >\n\n                            ${when(\n            displayOptions.indicator,\n            () => html`<span\n                                  class=\"indicator-${displayOptions?.indicator}\"\n                                  style=\"--_color: ${displayOptions?.color}\"\n                                ></span>`\n          )}\n                          </td>\n                        `;\n        })}\n                </tr>\n              `\n      )}\n          `\n    )}\n      </tbody>\n    </table>`;\n  }\n  _valueChanged() {\n    if (!this.value) return;\n    this.focusedDate = new Date(this.value);\n  }\n};\n_GdsCalendar_instances = new WeakSet();\nsetSelectedDate_fn = function(date) {\n  const dateOnMidDay = setHours(date, 12);\n  this.value = dateOnMidDay;\n  this.dispatchCustomEvent(\"change\", {\n    detail: dateOnMidDay,\n    bubbles: false,\n    composed: false\n  });\n};\nhandleKeyDown_fn = function(e) {\n  let handled = false;\n  let newFocusedDate = new Date(this.focusedDate);\n  if (e.key === \"ArrowLeft\") {\n    newFocusedDate = addDays(this.focusedDate, -1);\n    handled = true;\n  } else if (e.key === \"ArrowRight\") {\n    newFocusedDate = addDays(this.focusedDate, 1);\n    handled = true;\n  } else if (e.key === \"ArrowUp\") {\n    newFocusedDate = addDays(this.focusedDate, -7);\n    handled = true;\n  } else if (e.key === \"ArrowDown\") {\n    newFocusedDate = addDays(this.focusedDate, 7);\n    handled = true;\n  } else if (e.key === \"Enter\" || e.key === \" \") {\n    if (!this._elFocusedCell?.hasAttribute(\"disabled\")) {\n      __privateMethod(this, _GdsCalendar_instances, setSelectedDate_fn).call(this, this.focusedDate);\n    }\n    handled = true;\n  } else if (e.key === \"Home\") {\n    newFocusedDate = new Date(this.focusedYear, this.focusedMonth, 1);\n    handled = true;\n  } else if (e.key === \"End\") {\n    newFocusedDate = new Date(this.focusedYear, this.focusedMonth + 1, 0);\n    handled = true;\n  } else if (e.key === \"PageUp\") {\n    newFocusedDate = subMonths(this.focusedDate, 1);\n    handled = true;\n  } else if (e.key === \"PageDown\") {\n    newFocusedDate = addMonths(this.focusedDate, 1);\n    handled = true;\n  }\n  if (newFocusedDate.getFullYear() >= this.min.getFullYear() && newFocusedDate.getFullYear() <= this.max.getFullYear()) {\n    const proceed = this.dispatchCustomEvent(\"gds-date-focused\", {\n      detail: newFocusedDate,\n      bubbles: false,\n      composed: false\n    });\n    if (proceed) {\n      this.focusedDate = newFocusedDate;\n    }\n  }\n  if (handled) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.updateComplete.then(() => {\n      this._elFocusedCell?.focus();\n    });\n  }\n};\nGdsCalendar.styles = [tokens, CalendarStyles];\nGdsCalendar.shadowRootOptions = {\n  mode: \"open\",\n  delegatesFocus: true\n};\n__decorateClass([\n  property()\n], GdsCalendar.prototype, \"value\", 2);\n__decorateClass([\n  property({ type: Date })\n], GdsCalendar.prototype, \"min\", 2);\n__decorateClass([\n  property({ type: Date })\n], GdsCalendar.prototype, \"max\", 2);\n__decorateClass([\n  property()\n], GdsCalendar.prototype, \"focusedDate\", 2);\n__decorateClass([\n  property({ type: Boolean, attribute: \"disabled-weekends\" })\n], GdsCalendar.prototype, \"disabledWeekends\", 2);\n__decorateClass([\n  property({ type: Array, attribute: \"disabled-dates\" })\n], GdsCalendar.prototype, \"disabledDates\", 2);\n__decorateClass([\n  property({ type: Number })\n], GdsCalendar.prototype, \"focusedMonth\", 1);\n__decorateClass([\n  property({ type: Number })\n], GdsCalendar.prototype, \"focusedYear\", 1);\n__decorateClass([\n  property({ reflect: true })\n], GdsCalendar.prototype, \"size\", 2);\n__decorateClass([\n  property({ type: Boolean })\n], GdsCalendar.prototype, \"showWeekNumbers\", 2);\n__decorateClass([\n  property({ type: Boolean })\n], GdsCalendar.prototype, \"hideExtraneousDays\", 2);\n__decorateClass([\n  property({ type: Boolean })\n], GdsCalendar.prototype, \"hideDayNames\", 2);\n__decorateClass([\n  property({ attribute: false })\n], GdsCalendar.prototype, \"customizedDates\", 2);\n__decorateClass([\n  property()\n], GdsCalendar.prototype, \"label\", 2);\n__decorateClass([\n  property({ attribute: false })\n], GdsCalendar.prototype, \"dateLabelTemplate\", 2);\n__decorateClass([\n  state()\n], GdsCalendar.prototype, \"_currentLocale\", 2);\n__decorateClass([\n  query('td[tabindex=\"0\"]')\n], GdsCalendar.prototype, \"_elFocusedCell\", 2);\n__decorateClass([\n  watch(\"value\")\n], GdsCalendar.prototype, \"_valueChanged\", 1);\nGdsCalendar = __decorateClass([\n  gdsCustomElement(\"gds-calendar\"),\n  localized()\n], GdsCalendar);\nexport {\n  GdsCalendar\n};\n","import \"../../chunks/chunk.QU3DSPNU.js\";\nimport { html } from \"lit\";\nimport {\n  addDays,\n  eachDayOfInterval,\n  eachWeekOfInterval,\n  endOfMonth,\n  startOfMonth\n} from \"date-fns\";\nfunction renderMonthGridView(date, template) {\n  const monthStart = startOfMonth(date);\n  const monthEnd = endOfMonth(date);\n  const weeks = eachWeekOfInterval(\n    { start: monthStart, end: monthEnd },\n    { weekStartsOn: 1 }\n  );\n  while (weeks.length < 6) {\n    weeks.push(addDays(weeks[weeks.length - 1], 7));\n  }\n  return html`${template(\n    weeks.map((weekStartDay) => ({\n      days: eachDayOfInterval({\n        start: weekStartDay,\n        end: addDays(weekStartDay, 6)\n      })\n    }))\n  )}`;\n}\nexport {\n  renderMonthGridView\n};\n"],"names":[],"ignoreList":[],"sourceRoot":""}