/*! For license information please see 9301.2f7792b4.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkgreen=self.webpackChunkgreen||[]).push([[9301],{99301:(e,t,n)=>{n.d(t,{c1:()=>ye});var r=n(17198),i=n(29386),s=n(11985),o=n(33197);class a{block;componentFixture;constructor(e,t){this.block=e,this.componentFixture=t}render(e){var t=this;return(0,r.A)(function*(){if(!function(e,t){switch(e){case i["ɵDeferBlockState"].Placeholder:return null!==t.tDetails.placeholderTmplIndex;case i["ɵDeferBlockState"].Loading:return null!==t.tDetails.loadingTmplIndex;case i["ɵDeferBlockState"].Error:return null!==t.tDetails.errorTmplIndex;case i["ɵDeferBlockState"].Complete:return!0;default:return!1}}(e,t.block)){const t=function(e){switch(e){case i["ɵDeferBlockState"].Placeholder:return"Placeholder";case i["ɵDeferBlockState"].Loading:return"Loading";case i["ɵDeferBlockState"].Error:return"Error";default:return"Main"}}(e);throw new Error(`Tried to render this defer block in the \`${t}\` state, but there was no @${t.toLowerCase()} block defined in a template.`)}e===i["ɵDeferBlockState"].Complete&&(yield(0,i["ɵtriggerResourceLoading"])(t.block.tDetails,t.block.lView,t.block.tNode)),(0,i["ɵrenderDeferBlockState"])(e,t.block.tNode,t.block.lContainer,!0),t.componentFixture.detectChanges()})()}getDeferBlocks(){const e=[],t=[];if(this.block.lContainer.length>=i["ɵCONTAINER_HEADER_OFFSET"]){const n=this.block.lContainer[i["ɵCONTAINER_HEADER_OFFSET"]];(0,i["ɵgetDeferBlocks"])(n,e);for(const n of e)t.push(new a(n,this.componentFixture))}return Promise.resolve(t)}}const h=!0,l=!1,c=!1,u=i["ɵDeferBlockBehavior"].Playthrough;class d{insertRootElement(e){}removeAllRootElements(){}}const p=new i.InjectionToken("ComponentFixtureAutoDetect"),v=new i.InjectionToken("ComponentFixtureNoNgZone"),g=!0;class f{zone=(0,i.inject)(i.NgZone);userErrorHandler=(0,i.inject)(i.ErrorHandler);whenStableRejectFunctions=new Set;handleError(e){try{this.zone.runOutsideAngular(()=>this.userErrorHandler.handleError(e))}catch(t){e=t}if(!(this.whenStableRejectFunctions.size>0))throw e;for(const t of this.whenStableRejectFunctions.values())t(e);this.whenStableRejectFunctions.clear()}static ɵfac=function(e){return new(e||f)};static ɵprov=i["ɵɵdefineInjectable"]({token:f,factory:f.ɵfac})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](f,[{type:i.Injectable}],null,null);class m{componentRef;debugElement;componentInstance;nativeElement;elementRef;changeDetectorRef;_renderer;_isDestroyed=!1;_noZoneOptionIsSet=(0,i.inject)(v,{optional:!0});_ngZone=this._noZoneOptionIsSet?new i["ɵNoopNgZone"]:(0,i.inject)(i.NgZone);_appRef=(0,i.inject)(i.ApplicationRef);_testAppRef=this._appRef;pendingTasks=(0,i.inject)(i["ɵPendingTasksInternal"]);appErrorHandler=(0,i.inject)(f);zonelessEnabled=(0,i.inject)(i["ɵZONELESS_ENABLED"]);scheduler=(0,i.inject)(i["ɵChangeDetectionScheduler"]);rootEffectScheduler=(0,i.inject)(i["ɵEffectScheduler"]);microtaskEffectScheduler=(0,i.inject)(i["ɵMicrotaskEffectScheduler"]);autoDetectDefault=!!this.zonelessEnabled;autoDetect=(0,i.inject)(p,{optional:!0})??this.autoDetectDefault;subscriptions=new s.yU;ngZone=this._noZoneOptionIsSet?null:this._ngZone;constructor(e){this.componentRef=e,this.changeDetectorRef=e.changeDetectorRef,this.elementRef=e.location,this.debugElement=(0,i.getDebugNode)(this.elementRef.nativeElement),this.componentInstance=e.instance,this.nativeElement=this.elementRef.nativeElement,this.componentRef=e,this.autoDetect&&(this._testAppRef.externalTestViews.add(this.componentRef.hostView),this.scheduler?.notify(8),this.scheduler?.notify(0)),this.componentRef.hostView.onDestroy(()=>{this._testAppRef.externalTestViews.delete(this.componentRef.hostView)}),this._ngZone.runOutsideAngular(()=>{this.subscriptions.add(this._ngZone.onError.subscribe({next:e=>{throw e}}))})}detectChanges(e=!0){this.microtaskEffectScheduler.flush();const t=this.componentRef.changeDetectorRef.checkNoChanges;try{if(e||(this.componentRef.changeDetectorRef.checkNoChanges=()=>{}),this.zonelessEnabled)try{this._testAppRef.externalTestViews.add(this.componentRef.hostView),this._appRef.tick()}finally{this.autoDetect||this._testAppRef.externalTestViews.delete(this.componentRef.hostView)}else this._ngZone.run(()=>{this.rootEffectScheduler.flush(),this.changeDetectorRef.detectChanges(),this.checkNoChanges()})}finally{this.componentRef.changeDetectorRef.checkNoChanges=t}this.microtaskEffectScheduler.flush()}checkNoChanges(){this.changeDetectorRef.checkNoChanges()}autoDetectChanges(e=!0){if(this._noZoneOptionIsSet&&!this.zonelessEnabled)throw new Error("Cannot call autoDetectChanges when ComponentFixtureNoNgZone is set.");e!==this.autoDetect&&(e?this._testAppRef.externalTestViews.add(this.componentRef.hostView):this._testAppRef.externalTestViews.delete(this.componentRef.hostView)),this.autoDetect=e,this.detectChanges()}isStable(){return!this.pendingTasks.hasPendingTasks.value}whenStable(){return this.isStable()?Promise.resolve(!1):new Promise((e,t)=>{this.appErrorHandler.whenStableRejectFunctions.add(t),this._appRef.whenStable().then(()=>{this.appErrorHandler.whenStableRejectFunctions.delete(t),e(!0)})})}getDeferBlocks(){const e=[],t=this.componentRef.hostView._lView;(0,i["ɵgetDeferBlocks"])(t,e);const n=[];for(const t of e)n.push(new a(t,this));return Promise.resolve(n)}_getRenderer(){return void 0===this._renderer&&(this._renderer=this.componentRef.injector.get(i.RendererFactory2,null)),this._renderer}whenRenderingDone(){const e=this._getRenderer();return e&&e.whenRenderingDone?e.whenRenderingDone():this.whenStable()}destroy(){this.subscriptions.unsubscribe(),this._testAppRef.externalTestViews.delete(this.componentRef.hostView),this._isDestroyed||(this.componentRef.destroy(),this._isDestroyed=!0)}}const y="undefined"!=typeof Zone?Zone:null,E=y&&y[y.__symbol__("fakeAsyncTest")];let w=0;class C{_references=new Map;overrideMetadata(e,t,n){const r={};if(t&&function(e){const t=[];Object.keys(e).forEach(e=>{e.startsWith("_")||t.push(e)});let n=e;for(;n=Object.getPrototypeOf(n);)Object.keys(n).forEach(e=>{const r=Object.getOwnPropertyDescriptor(n,e);!e.startsWith("_")&&r&&"get"in r&&t.push(e)});return t}(t).forEach(e=>r[e]=t[e]),n.set){if(n.remove||n.add)throw new Error(`Cannot set and add/remove ${(0,i["ɵstringify"])(e)} at the same time!`);!function(e,t){for(const n in t)e[n]=t[n]}(r,n.set)}return n.remove&&function(e,t,n){const r=new Set;for(const e in t){const i=t[e];Array.isArray(i)?i.forEach(t=>{r.add(T(e,t,n))}):r.add(T(e,i,n))}for(const t in e){const i=e[t];Array.isArray(i)?e[t]=i.filter(e=>!r.has(T(t,e,n))):r.has(T(t,i,n))&&(e[t]=void 0)}}(r,n.remove,this._references),n.add&&function(e,t){for(const n in t){const r=t[n],i=e[n];null!=i&&Array.isArray(i)?e[n]=i.concat(r):e[n]=r}}(r,n.add),new e(r)}}function T(e,t,n){let r=0;const s=new Map;return`${e}:${JSON.stringify(t,(e,t)=>null!==t&&"object"==typeof t?s.has(t)?s.get(t):(s.set(t,"ɵobj#"+r++),t):("function"==typeof t&&(t=function(e,t){let n=t.get(e);return n||(n=`${(0,i["ɵstringify"])(e)}${w++}`,t.set(e,n)),n}(t,n)),t))}`}const _=new i["ɵReflectionCapabilities"];class S{overrides=new Map;resolved=new Map;addOverride(e,t){const n=this.overrides.get(e)||[];n.push(t),this.overrides.set(e,n),this.resolved.delete(e)}setOverrides(e){this.overrides.clear(),e.forEach(([e,t])=>{this.addOverride(e,t)})}getAnnotation(e){const t=_.annotations(e);for(let e=t.length-1;e>=0;e--){const n=t[e];if(n instanceof i.Directive||n instanceof i.Component||n instanceof i.Pipe||n instanceof i.NgModule)return n instanceof this.type?n:null}return null}resolve(e){let t=this.resolved.get(e)||null;if(!t){if(t=this.getAnnotation(e),t){const n=this.overrides.get(e);if(n){const e=new C;n.forEach(n=>{t=e.overrideMetadata(this.type,t,n)})}}this.resolved.set(e,t)}return t}}class I extends S{get type(){return i.Directive}}class O extends S{get type(){return i.Component}}class D extends S{get type(){return i.Pipe}}class M extends S{get type(){return i.NgModule}}var N;function b(e,t,n){e.forEach(e=>{if(!(0,i["ɵgetAsyncClassMetadataFn"])(e)){const r=t.resolve(e);if(r&&(null==r.standalone||r.standalone))throw new Error((0,i["ɵgenerateStandaloneInDeclarationsError"])(e,n))}})}!function(e){e[e.DECLARATION=0]="DECLARATION",e[e.OVERRIDE_TEMPLATE=1]="OVERRIDE_TEMPLATE"}(N||(N={}));class R{platform;additionalModuleTypes;originalComponentResolutionQueue=null;declarations=[];imports=[];providers=[];schemas=[];pendingComponents=new Set;pendingDirectives=new Set;pendingPipes=new Set;componentsWithAsyncMetadata=new Set;seenComponents=new Set;seenDirectives=new Set;overriddenModules=new Set;existingComponentStyles=new Map;resolvers=function(){return{module:new M,component:new O,directive:new I,pipe:new D}}();componentToModuleScope=new Map;initialNgDefs=new Map;defCleanupOps=[];_injector=null;compilerProviders=null;providerOverrides=[];rootProviderOverrides=[];providerOverridesByModule=new Map;providerOverridesByToken=new Map;scopesWithOverriddenProviders=new Set;testModuleType;testModuleRef=null;deferBlockBehavior=u;rethrowApplicationTickErrors=g;constructor(e,t){this.platform=e,this.additionalModuleTypes=t,this.testModuleType=class{}}setCompilerProviders(e){this.compilerProviders=e,this._injector=null}configureTestingModule(e){void 0!==e.declarations&&(b(e.declarations,this.resolvers.component,'"TestBed.configureTestingModule" call'),this.queueTypeArray(e.declarations,N.DECLARATION),this.declarations.push(...e.declarations)),void 0!==e.imports&&(this.queueTypesFromModulesArray(e.imports),this.imports.push(...e.imports)),void 0!==e.providers&&this.providers.push(...e.providers),void 0!==e.schemas&&this.schemas.push(...e.schemas),this.deferBlockBehavior=e.deferBlockBehavior??u,this.rethrowApplicationTickErrors=e.rethrowApplicationErrors??g}overrideModule(e,t){i["ɵUSE_RUNTIME_DEPS_TRACKER_FOR_JIT"]&&i["ɵdepsTracker"].clearScopeCacheFor(e),this.overriddenModules.add(e),this.resolvers.module.addOverride(e,t);const n=this.resolvers.module.resolve(e);if(null===n)throw G(e.name,"NgModule");this.recompileNgModule(e,n),this.queueTypesFromModulesArray([e])}overrideComponent(e,t){this.verifyNoStandaloneFlagOverrides(e,t),this.resolvers.component.addOverride(e,t),this.pendingComponents.add(e),this.maybeRegisterComponentWithAsyncMetadata(e)}overrideDirective(e,t){this.verifyNoStandaloneFlagOverrides(e,t),this.resolvers.directive.addOverride(e,t),this.pendingDirectives.add(e)}overridePipe(e,t){this.verifyNoStandaloneFlagOverrides(e,t),this.resolvers.pipe.addOverride(e,t),this.pendingPipes.add(e)}verifyNoStandaloneFlagOverrides(e,t){if(t.add?.hasOwnProperty("standalone")||t.set?.hasOwnProperty("standalone")||t.remove?.hasOwnProperty("standalone"))throw new Error(`An override for the ${e.name} class has the \`standalone\` flag. Changing the \`standalone\` flag via TestBed overrides is not supported.`)}overrideProvider(e,t){let n;n=void 0!==t.useFactory?{provide:e,useFactory:t.useFactory,deps:t.deps||[],multi:t.multi}:void 0!==t.useValue?{provide:e,useValue:t.useValue,multi:t.multi}:{provide:e};const r="string"!=typeof e?(0,i["ɵgetInjectableDef"])(e):null,s=null===r?null:(0,i.resolveForwardRef)(r.providedIn);if(("root"===s?this.rootProviderOverrides:this.providerOverrides).push(n),this.providerOverridesByToken.set(e,n),null!==r&&null!==s&&"string"!=typeof s){const e=this.providerOverridesByModule.get(s);void 0!==e?e.push(n):this.providerOverridesByModule.set(s,[n])}}overrideTemplateUsingTestingModule(e,t){const n=e[i["ɵNG_COMP_DEF"]],r=!!n&&!(0,i["ɵisComponentDefPendingResolution"])(e)&&(()=>{const t=this.resolvers.component.resolve(e);return!!t.styleUrl||!!t.styleUrls?.length})(),s=r?{template:t,styles:[],styleUrls:[],styleUrl:void 0}:{template:t};this.overrideComponent(e,{set:s}),r&&n.styles&&n.styles.length>0&&this.existingComponentStyles.set(e,n.styles),this.componentToModuleScope.set(e,N.OVERRIDE_TEMPLATE)}resolvePendingComponentsWithAsyncMetadata(){var e=this;return(0,r.A)(function*(){if(0===e.componentsWithAsyncMetadata.size)return;const t=[];for(const n of e.componentsWithAsyncMetadata){const e=(0,i["ɵgetAsyncClassMetadataFn"])(n);e&&t.push(e())}e.componentsWithAsyncMetadata.clear();const n=(yield Promise.all(t)).flat(2);e.queueTypesFromModulesArray(n);for(const t of n)e.applyProviderOverridesInScope(t)})()}compileComponents(){var e=this;return(0,r.A)(function*(){if(e.clearComponentResolutionQueue(),yield e.resolvePendingComponentsWithAsyncMetadata(),b(e.declarations,e.resolvers.component,'"TestBed.configureTestingModule" call'),e.compileTypesSync()){let t,n=n=>(t||(t=e.injector.get(o.WHm)),Promise.resolve(t.get(n)));yield(0,i["ɵresolveComponentResources"])(n)}})()}finalize(){this.compileTypesSync(),this.compileTestModule(),this.applyTransitiveScopes(),this.applyProviderOverrides(),this.patchComponentsWithExistingStyles(),this.componentToModuleScope.clear();const e=this.platform.injector;this.testModuleRef=new i["ɵRender3NgModuleRef"](this.testModuleType,e,[]),this.testModuleRef.injector.get(i.ApplicationInitStatus).runInitializers();const t=this.testModuleRef.injector.get(i.LOCALE_ID,i["ɵDEFAULT_LOCALE_ID"]);return(0,i["ɵsetLocaleId"])(t),this.testModuleRef}_compileNgModuleSync(e){this.queueTypesFromModulesArray([e]),this.compileTypesSync(),this.applyProviderOverrides(),this.applyProviderOverridesInScope(e),this.applyTransitiveScopes()}_compileNgModuleAsync(e){var t=this;return(0,r.A)(function*(){t.queueTypesFromModulesArray([e]),yield t.compileComponents(),t.applyProviderOverrides(),t.applyProviderOverridesInScope(e),t.applyTransitiveScopes()})()}_getModuleResolver(){return this.resolvers.module}_getComponentFactories(e){return k(e.ɵmod.declarations).reduce((e,t)=>{const n=t.ɵcmp;return n&&e.push(new i["ɵRender3ComponentFactory"](n,this.testModuleRef)),e},[])}compileTypesSync(){let e=!1;return this.pendingComponents.forEach(t=>{if((0,i["ɵgetAsyncClassMetadataFn"])(t))throw new Error(`Component '${t.name}' has unresolved metadata. Please call \`await TestBed.compileComponents()\` before running this test.`);e=e||(0,i["ɵisComponentDefPendingResolution"])(t);const n=this.resolvers.component.resolve(t);if(null===n)throw G(t.name,"Component");this.maybeStoreNgDef(i["ɵNG_COMP_DEF"],t),i["ɵUSE_RUNTIME_DEPS_TRACKER_FOR_JIT"]&&i["ɵdepsTracker"].clearScopeCacheFor(t),(0,i["ɵcompileComponent"])(t,n)}),this.pendingComponents.clear(),this.pendingDirectives.forEach(e=>{const t=this.resolvers.directive.resolve(e);if(null===t)throw G(e.name,"Directive");this.maybeStoreNgDef(i["ɵNG_DIR_DEF"],e),(0,i["ɵcompileDirective"])(e,t)}),this.pendingDirectives.clear(),this.pendingPipes.forEach(e=>{const t=this.resolvers.pipe.resolve(e);if(null===t)throw G(e.name,"Pipe");this.maybeStoreNgDef(i["ɵNG_PIPE_DEF"],e),(0,i["ɵcompilePipe"])(e,t)}),this.pendingPipes.clear(),e}applyTransitiveScopes(){if(this.overriddenModules.size>0){const e=this.testModuleType[i["ɵNG_MOD_DEF"]],t=this.collectModulesAffectedByOverrides(e.imports);t.size>0&&t.forEach(e=>{i["ɵUSE_RUNTIME_DEPS_TRACKER_FOR_JIT"]?i["ɵdepsTracker"].clearScopeCacheFor(e):(this.storeFieldOfDefOnType(e,i["ɵNG_MOD_DEF"],"transitiveCompileScopes"),e[i["ɵNG_MOD_DEF"]].transitiveCompileScopes=null)})}const e=new Map,t=t=>{if(!e.has(t)){const r=(n=t)===N.DECLARATION||n===N.OVERRIDE_TEMPLATE?this.testModuleType:t;e.set(t,(0,i["ɵtransitiveScopesFor"])(r))}var n;return e.get(t)};this.componentToModuleScope.forEach((e,n)=>{if(null!==e){const r=t(e);this.storeFieldOfDefOnType(n,i["ɵNG_COMP_DEF"],"directiveDefs"),this.storeFieldOfDefOnType(n,i["ɵNG_COMP_DEF"],"pipeDefs"),(0,i["ɵpatchComponentDefWithScope"])(x(n),r)}this.storeFieldOfDefOnType(n,i["ɵNG_COMP_DEF"],"tView")}),this.componentToModuleScope.clear()}applyProviderOverrides(){const e=e=>t=>{const n=(e===i["ɵNG_COMP_DEF"]?this.resolvers.component:this.resolvers.directive).resolve(t);this.hasProviderOverrides(n.providers)&&this.patchDefWithProviderOverrides(t,e)};this.seenComponents.forEach(e(i["ɵNG_COMP_DEF"])),this.seenDirectives.forEach(e(i["ɵNG_DIR_DEF"])),this.seenComponents.clear(),this.seenDirectives.clear()}applyProviderOverridesInScope(e){if(!A(e)&&!P(e)||this.scopesWithOverriddenProviders.has(e))return;this.scopesWithOverriddenProviders.add(e);const t=e[i["ɵNG_INJ_DEF"]];if(0!==this.providerOverridesByToken.size)if(A(e)){const t=k(x(e).dependencies??[]);for(const e of t)this.applyProviderOverridesInScope(e)}else{const n=[...t.providers,...this.providerOverridesByModule.get(e)||[]];this.hasProviderOverrides(n)&&(this.maybeStoreNgDef(i["ɵNG_INJ_DEF"],e),this.storeFieldOfDefOnType(e,i["ɵNG_INJ_DEF"],"providers"),t.providers=this.getOverriddenProviders(n));const r=k(e[i["ɵNG_MOD_DEF"]].imports);for(const e of r)this.applyProviderOverridesInScope(e);for(const e of F(t.imports))L(e)&&(this.defCleanupOps.push({object:e,fieldName:"providers",originalValue:e.providers}),e.providers=this.getOverriddenProviders(e.providers))}}patchComponentsWithExistingStyles(){this.existingComponentStyles.forEach((e,t)=>t[i["ɵNG_COMP_DEF"]].styles=e),this.existingComponentStyles.clear()}queueTypeArray(e,t){for(const n of e)Array.isArray(n)?this.queueTypeArray(n,t):this.queueType(n,t)}recompileNgModule(e,t){this.maybeStoreNgDef(i["ɵNG_MOD_DEF"],e),this.maybeStoreNgDef(i["ɵNG_INJ_DEF"],e),(0,i["ɵcompileNgModuleDefs"])(e,t)}maybeRegisterComponentWithAsyncMetadata(e){(0,i["ɵgetAsyncClassMetadataFn"])(e)&&this.componentsWithAsyncMetadata.add(e)}queueType(e,t){return this.maybeRegisterComponentWithAsyncMetadata(e),this.resolvers.component.resolve(e)?(!(0,i["ɵisComponentDefPendingResolution"])(e)&&e.hasOwnProperty(i["ɵNG_COMP_DEF"])||this.pendingComponents.add(e),this.seenComponents.add(e),void(this.componentToModuleScope.has(e)&&this.componentToModuleScope.get(e)!==N.DECLARATION||this.componentToModuleScope.set(e,t))):this.resolvers.directive.resolve(e)?(e.hasOwnProperty(i["ɵNG_DIR_DEF"])||this.pendingDirectives.add(e),void this.seenDirectives.add(e)):void(!this.resolvers.pipe.resolve(e)||e.hasOwnProperty(i["ɵNG_PIPE_DEF"])||this.pendingPipes.add(e))}queueTypesFromModulesArray(e){const t=new Set,n=e=>{for(const r of e)if(Array.isArray(r))n(r);else if(P(r)){const e=r.ɵmod;if(t.has(e))continue;t.add(e),this.queueTypeArray(k(e.declarations),r),n(k(e.imports)),n(k(e.exports))}else if(L(r))n([r.ngModule]);else if(A(r)){this.queueType(r,null);const e=x(r);if(t.has(e))continue;t.add(e),k(e.dependencies??[]).forEach(e=>{A(e)||P(e)?n([e]):this.queueType(e,null)})}};n(e)}collectModulesAffectedByOverrides(e){const t=new Set,n=new Set,r=(e,s)=>{for(const o of e)if(Array.isArray(o))r(o,s);else if(P(o)){if(t.has(o)){n.has(o)&&s.forEach(e=>n.add(e));continue}t.add(o),this.overriddenModules.has(o)&&s.forEach(e=>n.add(e));const e=o[i["ɵNG_MOD_DEF"]];r(k(e.imports),s.concat(o))}};return r(e,[]),n}maybeStoreNgDef(e,t){this.initialNgDefs.has(t)||this.initialNgDefs.set(t,new Map);const n=this.initialNgDefs.get(t);if(!n.has(e)){const r=Object.getOwnPropertyDescriptor(t,e);n.set(e,r)}}storeFieldOfDefOnType(e,t,n){const r=e[t],i=r[n];this.defCleanupOps.push({object:r,fieldName:n,originalValue:i})}clearComponentResolutionQueue(){null===this.originalComponentResolutionQueue&&(this.originalComponentResolutionQueue=new Map),(0,i["ɵclearResolutionOfComponentResourcesQueue"])().forEach((e,t)=>this.originalComponentResolutionQueue.set(t,e))}restoreComponentResolutionQueue(){null!==this.originalComponentResolutionQueue&&((0,i["ɵrestoreComponentResolutionQueue"])(this.originalComponentResolutionQueue),this.originalComponentResolutionQueue=null)}restoreOriginalState(){H(this.defCleanupOps,e=>{e.object[e.fieldName]=e.originalValue}),this.initialNgDefs.forEach((e,t)=>{i["ɵUSE_RUNTIME_DEPS_TRACKER_FOR_JIT"]&&i["ɵdepsTracker"].clearScopeCacheFor(t),e.forEach((e,n)=>{e?Object.defineProperty(t,n,e):delete t[n]})}),this.initialNgDefs.clear(),this.scopesWithOverriddenProviders.clear(),this.restoreComponentResolutionQueue(),(0,i["ɵsetLocaleId"])(i["ɵDEFAULT_LOCALE_ID"])}compileTestModule(){class e{}(0,i["ɵcompileNgModuleDefs"])(e,{providers:[...this.rootProviderOverrides,(0,i["ɵinternalProvideZoneChangeDetection"])({}),f,{provide:i["ɵChangeDetectionScheduler"],useExisting:i["ɵChangeDetectionSchedulerImpl"]}]});const t=[{provide:i.Compiler,useFactory:()=>new V(this)},{provide:i["ɵDEFER_BLOCK_CONFIG"],useValue:{behavior:this.deferBlockBehavior}},{provide:i["ɵINTERNAL_APPLICATION_ERROR_HANDLER"],useFactory:()=>{if(this.rethrowApplicationTickErrors){const e=(0,i.inject)(f);return t=>{e.handleError(t)}}{const e=(0,i.inject)(i.ErrorHandler),t=(0,i.inject)(i.NgZone);return n=>t.runOutsideAngular(()=>e.handleError(n))}}},...this.providers,...this.providerOverrides],n=[e,this.additionalModuleTypes,this.imports||[]];(0,i["ɵcompileNgModuleDefs"])(this.testModuleType,{declarations:this.declarations,imports:n,schemas:this.schemas,providers:t},!0),this.applyProviderOverridesInScope(this.testModuleType)}get injector(){if(null!==this._injector)return this._injector;const e=[];return this.platform.injector.get(i.COMPILER_OPTIONS,[]).forEach(t=>{t.providers&&e.push(t.providers)}),null!==this.compilerProviders&&e.push(...this.compilerProviders),this._injector=i.Injector.create({providers:e,parent:this.platform.injector}),this._injector}getSingleProviderOverrides(e){const t=B(e);return this.providerOverridesByToken.get(t)||null}getProviderOverrides(e){return e&&e.length&&0!==this.providerOverridesByToken.size?F(U(e,e=>this.getSingleProviderOverrides(e)||[])):[]}getOverriddenProviders(e){if(!e||!e.length||0===this.providerOverridesByToken.size)return[];const t=U(e),n=this.getProviderOverrides(t),r=[...t,...n],i=[],s=new Set;return H(r,e=>{const t=B(e);this.providerOverridesByToken.has(t)?s.has(t)||(s.add(t),i.unshift({...e,multi:!1})):i.unshift(e)}),i}hasProviderOverrides(e){return this.getProviderOverrides(e).length>0}patchDefWithProviderOverrides(e,t){const n=e[t];if(n&&n.providersResolver){this.maybeStoreNgDef(t,e);const r=n.providersResolver,i=e=>this.getOverriddenProviders(e);this.storeFieldOfDefOnType(e,t,"providersResolver"),n.providersResolver=e=>r(e,i)}}}function A(e){const t=x(e);return!!t?.standalone}function x(e){return e.ɵcmp??null}function P(e){return e.hasOwnProperty("ɵmod")}function k(e){return e instanceof Function?e():e}function F(e){const t=[];return e.forEach(e=>{Array.isArray(e)?t.push(...F(e)):t.push(e)}),t}function j(e){return e}function U(e,t=j){const n=[];for(let r of e)(0,i["ɵisEnvironmentProviders"])(r)&&(r=r.ɵproviders),Array.isArray(r)?n.push(...U(r,t)):n.push(t(r));return n}function B(e){return function(e){return e&&"object"==typeof e&&e.provide}(e)||e}function L(e){return e.hasOwnProperty("ngModule")}function H(e,t){for(let n=e.length-1;n>=0;n--)t(e[n],n)}function G(e,t){return new Error(`${e} class doesn't have @${t} decorator or is missing metadata.`)}class V{testBed;constructor(e){this.testBed=e}compileModuleSync(e){return this.testBed._compileNgModuleSync(e),new i["ɵNgModuleFactory"](e)}compileModuleAsync(e){var t=this;return(0,r.A)(function*(){return yield t.testBed._compileNgModuleAsync(e),new i["ɵNgModuleFactory"](e)})()}compileModuleAndAllComponentsSync(e){const t=this.compileModuleSync(e),n=this.testBed._getComponentFactories(e);return new i.ModuleWithComponentFactories(t,n)}compileModuleAndAllComponentsAsync(e){var t=this;return(0,r.A)(function*(){const n=yield t.compileModuleAsync(e),r=t.testBed._getComponentFactories(e);return new i.ModuleWithComponentFactories(n,r)})()}clearCache(){}clearCacheFor(e){}getModuleId(e){const t=this.testBed._getModuleResolver().resolve(e);return t&&t.id||void 0}}let $=0;class W{static _INSTANCE=null;static get INSTANCE(){return W._INSTANCE=W._INSTANCE||new W}static _environmentTeardownOptions;static _environmentErrorOnUnknownElementsOption;static _environmentErrorOnUnknownPropertiesOption;_instanceTeardownOptions;_instanceDeferBlockBehavior=u;_instanceErrorOnUnknownElementsOption;_instanceErrorOnUnknownPropertiesOption;_previousErrorOnUnknownElementsOption;_previousErrorOnUnknownPropertiesOption;static initTestEnvironment(e,t,n){const r=W.INSTANCE;return r.initTestEnvironment(e,t,n),r}static resetTestEnvironment(){W.INSTANCE.resetTestEnvironment()}static configureCompiler(e){return W.INSTANCE.configureCompiler(e)}static configureTestingModule(e){return W.INSTANCE.configureTestingModule(e)}static compileComponents(){return W.INSTANCE.compileComponents()}static overrideModule(e,t){return W.INSTANCE.overrideModule(e,t)}static overrideComponent(e,t){return W.INSTANCE.overrideComponent(e,t)}static overrideDirective(e,t){return W.INSTANCE.overrideDirective(e,t)}static overridePipe(e,t){return W.INSTANCE.overridePipe(e,t)}static overrideTemplate(e,t){return W.INSTANCE.overrideTemplate(e,t)}static overrideTemplateUsingTestingModule(e,t){return W.INSTANCE.overrideTemplateUsingTestingModule(e,t)}static overrideProvider(e,t){return W.INSTANCE.overrideProvider(e,t)}static inject(e,t,n){return W.INSTANCE.inject(e,t,(0,i["ɵconvertToBitFlags"])(n))}static get(e,t=i.Injector.THROW_IF_NOT_FOUND,n=i.InjectFlags.Default){return W.INSTANCE.inject(e,t,n)}static runInInjectionContext(e){return W.INSTANCE.runInInjectionContext(e)}static createComponent(e){return W.INSTANCE.createComponent(e)}static resetTestingModule(){return W.INSTANCE.resetTestingModule()}static execute(e,t,n){return W.INSTANCE.execute(e,t,n)}static get platform(){return W.INSTANCE.platform}static get ngModule(){return W.INSTANCE.ngModule}static flushEffects(){return W.INSTANCE.flushEffects()}platform=null;ngModule=null;_compiler=null;_testModuleRef=null;_activeFixtures=[];globalCompilationChecked=!1;initTestEnvironment(e,t,n){if(this.platform||this.ngModule)throw new Error("Cannot set base providers because it has already been called");W._environmentTeardownOptions=n?.teardown,W._environmentErrorOnUnknownElementsOption=n?.errorOnUnknownElements,W._environmentErrorOnUnknownPropertiesOption=n?.errorOnUnknownProperties,this.platform=t,this.ngModule=e,this._compiler=new R(this.platform,this.ngModule),(0,i["ɵsetAllowDuplicateNgModuleIdsForTest"])(!0)}resetTestEnvironment(){this.resetTestingModule(),this._compiler=null,this.platform=null,this.ngModule=null,W._environmentTeardownOptions=void 0,(0,i["ɵsetAllowDuplicateNgModuleIdsForTest"])(!1)}resetTestingModule(){this.checkGlobalCompilationFinished(),(0,i["ɵresetCompiledComponents"])(),null!==this._compiler&&this.compiler.restoreOriginalState(),this._compiler=new R(this.platform,this.ngModule),(0,i["ɵsetUnknownElementStrictMode"])(this._previousErrorOnUnknownElementsOption??l),(0,i["ɵsetUnknownPropertyStrictMode"])(this._previousErrorOnUnknownPropertiesOption??c);try{this.destroyActiveFixtures()}finally{try{this.shouldTearDownTestingModule()&&this.tearDownTestingModule()}finally{this._testModuleRef=null,this._instanceTeardownOptions=void 0,this._instanceErrorOnUnknownElementsOption=void 0,this._instanceErrorOnUnknownPropertiesOption=void 0,this._instanceDeferBlockBehavior=u}}return this}configureCompiler(e){if(null!=e.useJit)throw new Error("JIT compiler is not configurable via TestBed APIs.");return void 0!==e.providers&&this.compiler.setCompilerProviders(e.providers),this}configureTestingModule(e){return this.assertNotInstantiated("TestBed.configureTestingModule","configure the test module"),this.checkGlobalCompilationFinished(),this._instanceTeardownOptions=e.teardown,this._instanceErrorOnUnknownElementsOption=e.errorOnUnknownElements,this._instanceErrorOnUnknownPropertiesOption=e.errorOnUnknownProperties,this._instanceDeferBlockBehavior=e.deferBlockBehavior??u,this._previousErrorOnUnknownElementsOption=(0,i["ɵgetUnknownElementStrictMode"])(),(0,i["ɵsetUnknownElementStrictMode"])(this.shouldThrowErrorOnUnknownElements()),this._previousErrorOnUnknownPropertiesOption=(0,i["ɵgetUnknownPropertyStrictMode"])(),(0,i["ɵsetUnknownPropertyStrictMode"])(this.shouldThrowErrorOnUnknownProperties()),this.compiler.configureTestingModule(e),this}compileComponents(){return this.compiler.compileComponents()}inject(e,t,n){if(e===q)return this;const r={},s=this.testModuleRef.injector.get(e,r,(0,i["ɵconvertToBitFlags"])(n));return s===r?this.compiler.injector.get(e,t,n):s}get(e,t=i.Injector.THROW_IF_NOT_FOUND,n=i.InjectFlags.Default){return this.inject(e,t,n)}runInInjectionContext(e){return(0,i.runInInjectionContext)(this.inject(i.EnvironmentInjector),e)}execute(e,t,n){const r=e.map(e=>this.inject(e));return t.apply(n,r)}overrideModule(e,t){return this.assertNotInstantiated("overrideModule","override module metadata"),this.compiler.overrideModule(e,t),this}overrideComponent(e,t){return this.assertNotInstantiated("overrideComponent","override component metadata"),this.compiler.overrideComponent(e,t),this}overrideTemplateUsingTestingModule(e,t){return this.assertNotInstantiated("TestBed.overrideTemplateUsingTestingModule","Cannot override template when the test module has already been instantiated"),this.compiler.overrideTemplateUsingTestingModule(e,t),this}overrideDirective(e,t){return this.assertNotInstantiated("overrideDirective","override directive metadata"),this.compiler.overrideDirective(e,t),this}overridePipe(e,t){return this.assertNotInstantiated("overridePipe","override pipe metadata"),this.compiler.overridePipe(e,t),this}overrideProvider(e,t){return this.assertNotInstantiated("overrideProvider","override provider"),this.compiler.overrideProvider(e,t),this}overrideTemplate(e,t){return this.overrideComponent(e,{set:{template:t,templateUrl:null}})}createComponent(e){const t=this.inject(d),n="root"+$++;if(t.insertRootElement(n),(0,i["ɵgetAsyncClassMetadataFn"])(e))throw new Error(`Component '${e.name}' has unresolved metadata. Please call \`await TestBed.compileComponents()\` before running this test.`);const r=e.ɵcmp;if(!r)throw new Error(`It looks like '${(0,i["ɵstringify"])(e)}' has not been compiled.`);const s=new i["ɵRender3ComponentFactory"](r),o=()=>{const e=s.create(i.Injector.NULL,[],`#${n}`,this.testModuleRef);return this.runInInjectionContext(()=>new m(e))},a=this.inject(v,!1)?null:this.inject(i.NgZone,null),h=a?a.run(o):o();return this._activeFixtures.push(h),h}get compiler(){if(null===this._compiler)throw new Error("Need to call TestBed.initTestEnvironment() first");return this._compiler}get testModuleRef(){return null===this._testModuleRef&&(this._testModuleRef=this.compiler.finalize()),this._testModuleRef}assertNotInstantiated(e,t){if(null!==this._testModuleRef)throw new Error(`Cannot ${t} when the test module has already been instantiated. Make sure you are not using \`inject\` before \`${e}\`.`)}checkGlobalCompilationFinished(){this.globalCompilationChecked||null!==this._testModuleRef||(0,i["ɵflushModuleScopingQueueAsMuchAsPossible"])(),this.globalCompilationChecked=!0}destroyActiveFixtures(){let e=0;if(this._activeFixtures.forEach(t=>{try{t.destroy()}catch(n){e++,console.error("Error during cleanup of component",{component:t.componentInstance,stacktrace:n})}}),this._activeFixtures=[],e>0&&this.shouldRethrowTeardownErrors())throw Error(`${e} ${1===e?"component":"components"} threw errors during cleanup`)}shouldRethrowTeardownErrors(){const e=this._instanceTeardownOptions,t=W._environmentTeardownOptions;return e||t?e?.rethrowErrors??t?.rethrowErrors??this.shouldTearDownTestingModule():h}shouldThrowErrorOnUnknownElements(){return this._instanceErrorOnUnknownElementsOption??W._environmentErrorOnUnknownElementsOption??l}shouldThrowErrorOnUnknownProperties(){return this._instanceErrorOnUnknownPropertiesOption??W._environmentErrorOnUnknownPropertiesOption??c}shouldTearDownTestingModule(){return this._instanceTeardownOptions?.destroyAfterEach??W._environmentTeardownOptions?.destroyAfterEach??h}getDeferBlockBehavior(){return this._instanceDeferBlockBehavior}tearDownTestingModule(){if(null===this._testModuleRef)return;const e=this.inject(d);try{this._testModuleRef.destroy()}catch(e){if(this.shouldRethrowTeardownErrors())throw e;console.error("Error during cleanup of a testing module",{component:this._testModuleRef.instance,stacktrace:e})}finally{e.removeAllRootElements?.()}}flushEffects(){this.inject(i["ɵMicrotaskEffectScheduler"]).flush(),this.inject(i["ɵEffectScheduler"]).flush()}}const q=W;function Q(e){return()=>{const t=W.INSTANCE;t.shouldTearDownTestingModule()===e&&(t.resetTestingModule(),E&&E.resetFakeAsyncZone())}}globalThis.beforeEach?.(Q(!1)),globalThis.afterEach?.(Q(!0));class Z{entriesArr=[];currentEntryIndex=0;navigateEvent=null;traversalQueue=new Map;nextTraversal=Promise.resolve();prospectiveEntryIndex=0;synchronousTraversals=!1;canSetInitialEntry=!0;eventTarget;nextId=0;nextKey=0;disposed=!1;get currentEntry(){return this.entriesArr[this.currentEntryIndex]}get canGoBack(){return this.currentEntryIndex>0}get canGoForward(){return this.currentEntryIndex<this.entriesArr.length-1}createEventTarget;_window;get window(){return this._window}constructor(e,t){this.createEventTarget=()=>{try{return e.createElement("div")}catch{return new EventTarget}},this._window=document.defaultView??this.createEventTarget(),this.eventTarget=this.createEventTarget(),this.setInitialEntryForTesting(t)}setInitialEntryForTesting(e,t={historyState:null}){if(!this.canSetInitialEntry)throw new Error("setInitialEntryForTesting can only be called before any navigation has occurred");const n=this.entriesArr[0];this.entriesArr[0]=new J(this.eventTarget,new URL(e).toString(),{index:0,key:n?.key??String(this.nextKey++),id:n?.id??String(this.nextId++),sameDocument:!0,historyState:t?.historyState,state:t.state})}canSetInitialEntryForTesting(){return this.canSetInitialEntry}setSynchronousTraversalsForTesting(e){this.synchronousTraversals=e}entries(){return this.entriesArr.slice()}navigate(e,t){const n=new URL(this.currentEntry.url),r=new URL(e,this.currentEntry.url);let i;i=t?.history&&"auto"!==t.history?t.history:n.toString()===r.toString()?"replace":"push";const s=Y(n,r),o=new X({url:r.toString(),state:t?.state,sameDocument:s,historyState:null}),a=new te(this);return this.userAgentNavigate(o,a,{navigationType:i,cancelable:!0,canIntercept:!0,userInitiated:!1,hashChange:s,info:t?.info})||this.updateNavigationEntriesForSameDocumentNavigation(this.navigateEvent),{committed:a.committed,finished:a.finished}}pushState(e,t,n){this.pushOrReplaceState("push",e,t,n)}replaceState(e,t,n){this.pushOrReplaceState("replace",e,t,n)}pushOrReplaceState(e,t,n,r){const i=new URL(this.currentEntry.url),s=r?new URL(r,this.currentEntry.url):i,o=Y(i,s),a=new X({url:s.toString(),sameDocument:!0,historyState:t}),h=new te(this);this.userAgentNavigate(a,h,{navigationType:e,cancelable:!0,canIntercept:!0,userInitiated:!1,hashChange:o})||this.updateNavigationEntriesForSameDocumentNavigation(this.navigateEvent)}traverseTo(e,t){const n=new URL(this.currentEntry.url),r=this.findEntry(e);if(!r){const e=new DOMException("Invalid key","InvalidStateError"),t=Promise.reject(e),n=Promise.reject(e);return t.catch(()=>{}),n.catch(()=>{}),{committed:t,finished:n}}if(r===this.currentEntry)return{committed:Promise.resolve(this.currentEntry),finished:Promise.resolve(this.currentEntry)};if(this.traversalQueue.has(r.key)){const e=this.traversalQueue.get(r.key);return{committed:e.committed,finished:e.finished}}const i=Y(n,new URL(r.url,this.currentEntry.url)),s=new X({url:r.url,state:r.getState(),historyState:r.getHistoryState(),key:r.key,id:r.id,index:r.index,sameDocument:r.sameDocument});this.prospectiveEntryIndex=r.index;const o=new te(this);return this.traversalQueue.set(r.key,o),this.runTraversal(()=>{this.traversalQueue.delete(r.key),this.userAgentNavigate(s,o,{navigationType:"traverse",cancelable:!0,canIntercept:!0,userInitiated:!1,hashChange:i,info:t?.info})||this.userAgentTraverse(this.navigateEvent)}),{committed:o.committed,finished:o.finished}}back(e){if(0===this.currentEntryIndex){const e=new DOMException("Cannot go back","InvalidStateError"),t=Promise.reject(e),n=Promise.reject(e);return t.catch(()=>{}),n.catch(()=>{}),{committed:t,finished:n}}const t=this.entriesArr[this.currentEntryIndex-1];return this.traverseTo(t.key,e)}forward(e){if(this.currentEntryIndex===this.entriesArr.length-1){const e=new DOMException("Cannot go forward","InvalidStateError"),t=Promise.reject(e),n=Promise.reject(e);return t.catch(()=>{}),n.catch(()=>{}),{committed:t,finished:n}}const t=this.entriesArr[this.currentEntryIndex+1];return this.traverseTo(t.key,e)}go(e){const t=this.prospectiveEntryIndex+e;t>=this.entriesArr.length||t<0||(this.prospectiveEntryIndex=t,this.runTraversal(()=>{if(t>=this.entriesArr.length||t<0)return;const e=new URL(this.currentEntry.url),n=this.entriesArr[t],r=Y(e,new URL(n.url,this.currentEntry.url)),i=new X({url:n.url,state:n.getState(),historyState:n.getHistoryState(),key:n.key,id:n.id,index:n.index,sameDocument:n.sameDocument}),s=new te(this);this.userAgentNavigate(i,s,{navigationType:"traverse",cancelable:!0,canIntercept:!0,userInitiated:!1,hashChange:r})||this.userAgentTraverse(this.navigateEvent)}))}runTraversal(e){this.synchronousTraversals?e():this.nextTraversal=this.nextTraversal.then(()=>new Promise(t=>{setTimeout(()=>{t(),e()})}))}addEventListener(e,t,n){this.eventTarget.addEventListener(e,t,n)}removeEventListener(e,t,n){this.eventTarget.removeEventListener(e,t,n)}dispatchEvent(e){return this.eventTarget.dispatchEvent(e)}dispose(){this.eventTarget=this.createEventTarget(),this.disposed=!0}isDisposed(){return this.disposed}userAgentNavigate(e,t,n){return this.canSetInitialEntry=!1,this.navigateEvent&&(this.navigateEvent.cancel(new DOMException("Navigation was aborted","AbortError")),this.navigateEvent=null),function({cancelable:e,canIntercept:t,userInitiated:n,hashChange:r,navigationType:i,signal:s,destination:o,info:a,sameDocument:h,result:l}){const{navigation:c}=l,u=new Event("navigate",{bubbles:!1,cancelable:e});u.focusResetBehavior=null,u.scrollBehavior=null,u.interceptionState="none",u.canIntercept=t,u.userInitiated=n,u.hashChange=r,u.navigationType=i,u.signal=s,u.destination=o,u.info=a,u.downloadRequest=null,u.formData=null,u.result=l,u.sameDocument=h;let d=[],p=[];function v(e){if("none"===u.interceptionState)throw new Error("cannot redirect when event is not intercepted");if("intercepted"!==u.interceptionState)throw new DOMException("cannot redirect when event is not in 'intercepted' state","InvalidStateError");if("push"!==u.navigationType&&"replace"!==u.navigationType)throw new DOMException("cannot redirect when navigationType is not 'push' or 'replace","InvalidStateError");const t=new URL(e,c.currentEntry.url);u.destination.url=t.href}function g(){if(l.signal.aborted)return;if("none"!==u.interceptionState){if(u.interceptionState="committed",!c.currentEntry)throw new Error("from history entry should not be null");switch(c.transition=new ee(c.currentEntry,i),u.navigationType){case"push":case"replace":c.urlAndHistoryUpdateSteps(u);break;case"reload":c.updateNavigationEntriesForSameDocumentNavigation(u);break;case"traverse":c.userAgentTraverse(u)}}const t=p.map(e=>e());0===t.length&&t.push(Promise.resolve()),Promise.all(t).then(()=>{if(l.signal.aborted)return;if(u!==c.navigateEvent)throw new Error("Navigation's ongoing event not equal to resolved event");c.navigateEvent=null,z(u,!0);const t=new Event("navigatesuccess",{bubbles:!1,cancelable:e});c.eventTarget.dispatchEvent(t),l.finishedResolve(),null!==c.transition&&c.transition.finishedResolve(),c.transition=null}).catch(e=>u.cancel(e))}return u.intercept=function(e){if(!this.canIntercept)throw new DOMException("Cannot intercept when canIntercept is 'false'","SecurityError");this.interceptionState="intercepted",u.sameDocument=!0;const t=e?.precommitHandler;if(t){if(!this.cancelable)throw new DOMException("Cannot use precommitHandler when cancelable is 'false'","InvalidStateError");d.push(t)}if("none"!==u.interceptionState&&"intercepted"!==u.interceptionState)throw new Error('Event interceptionState should be "none" or "intercepted"');u.interceptionState="intercepted";const n=e?.handler;n&&p.push(n),u.focusResetBehavior=e?.focusReset??u.focusResetBehavior,u.scrollBehavior=e?.scroll??u.scrollBehavior},u.scroll=function(){if("committed"!==u.interceptionState)throw new DOMException("Failed to execute 'scroll' on 'NavigateEvent': scroll() must be called after commit() and interception options must specify manual scroll.","InvalidStateError");K(u)},u.cancel=function(t){if(l.signal.aborted)return;if(u!==c.navigateEvent)throw new Error("Navigation's ongoing event not equal to resolved event");c.navigateEvent=null,"intercepted"!==u.interceptionState&&z(u,!1);const n=new Event("navigateerror",{bubbles:!1,cancelable:e});c.eventTarget.dispatchEvent(n),l.finishedReject(t),null!==c.transition&&c.transition.finishedReject(t),c.transition=null},function(){if(c.navigateEvent=u,c.eventTarget.dispatchEvent(u),0===d.length)g();else{const e={redirect:v},t=d.map(t=>t(e));Promise.all(t).then(()=>g()).catch(e=>u.cancel(e))}}(),"none"!==u.interceptionState}({navigationType:n.navigationType,cancelable:n.cancelable,canIntercept:n.canIntercept,userInitiated:n.userInitiated,hashChange:n.hashChange,signal:t.signal,destination:e,info:n.info,sameDocument:e.sameDocument,result:t})}urlAndHistoryUpdateSteps(e){this.updateNavigationEntriesForSameDocumentNavigation(e)}userAgentTraverse(e){const t=this.currentEntry.url;this.updateNavigationEntriesForSameDocumentNavigation(e);const n=function({state:e}){const t=new Event("popstate",{bubbles:!1,cancelable:!1});return t.state=e,t}({state:e.destination.getHistoryState()});if(this._window.dispatchEvent(n),e.hashChange){const e=function(e,t){const n=new Event("hashchange",{bubbles:!1,cancelable:!1});return n.newURL=e,n.oldURL=t,n}(t,this.currentEntry.url);this._window.dispatchEvent(e)}}updateNavigationEntriesForSameDocumentNavigation({destination:e,navigationType:t,result:n}){const r=this.currentEntry,i=[];if("traverse"===t){if(this.currentEntryIndex=e.index,-1===this.currentEntryIndex)throw new Error("unexpected current entry index")}else"push"===t?(this.currentEntryIndex++,this.prospectiveEntryIndex=this.currentEntryIndex,i.push(...this.entriesArr.splice(this.currentEntryIndex))):"replace"===t&&i.push(r);if("push"===t||"replace"===t){const n=this.currentEntryIndex,r="push"===t?String(this.nextKey++):this.currentEntry.key,i=new J(this.eventTarget,e.url,{id:String(this.nextId++),key:r,index:n,sameDocument:!0,state:e.getState(),historyState:e.getHistoryState()});this.entriesArr[this.currentEntryIndex]=i}n.committedResolve(this.currentEntry);const s=function({from:e,navigationType:t}){const n=new Event("currententrychange",{bubbles:!1,cancelable:!1});return n.from=e,n.navigationType=t,n}({from:r,navigationType:t});this.eventTarget.dispatchEvent(s);for(const e of i)e.dispose()}findEntry(e){for(const t of this.entriesArr)if(t.key===e)return t}set onnavigate(e){throw new Error("unimplemented")}get onnavigate(){throw new Error("unimplemented")}set oncurrententrychange(e){throw new Error("unimplemented")}get oncurrententrychange(){throw new Error("unimplemented")}set onnavigatesuccess(e){throw new Error("unimplemented")}get onnavigatesuccess(){throw new Error("unimplemented")}set onnavigateerror(e){throw new Error("unimplemented")}get onnavigateerror(){throw new Error("unimplemented")}_transition=null;set transition(e){this._transition=e}get transition(){return this._transition}updateCurrentEntry(e){throw new Error("unimplemented")}reload(e){throw new Error("unimplemented")}}class J{eventTarget;url;sameDocument;id;key;index;state;historyState;ondispose=null;constructor(e,t,{id:n,key:r,index:i,sameDocument:s,state:o,historyState:a}){this.eventTarget=e,this.url=t,this.id=n,this.key=r,this.index=i,this.sameDocument=s,this.state=o,this.historyState=a}getState(){return this.state?JSON.parse(JSON.stringify(this.state)):this.state}getHistoryState(){return this.historyState?JSON.parse(JSON.stringify(this.historyState)):this.historyState}addEventListener(e,t,n){this.eventTarget.addEventListener(e,t,n)}removeEventListener(e,t,n){this.eventTarget.removeEventListener(e,t,n)}dispatchEvent(e){return this.eventTarget.dispatchEvent(e)}dispose(){const e=new Event("disposed");this.dispatchEvent(e),this.eventTarget=null}}function z(e,t){if("finished"===e.interceptionState)throw new Error("Attempting to finish navigation event that was already finished");if("intercepted"!==e.interceptionState)"none"!==e.interceptionState&&(function(e){if("committed"!==e.interceptionState&&"scrolled"!==e.interceptionState)throw new Error("cannot reset focus if navigation event is not committed or scrolled")}(e),t&&function(e){if("committed"!==e.interceptionState&&"scrolled"!==e.interceptionState)throw new Error("cannot reset scroll if navigation event is not committed or scrolled");"scrolled"!==e.interceptionState&&"manual"!==e.scrollBehavior&&K(e)}(e),e.interceptionState="finished");else{if(!0===t)throw new Error("didFulfill should be false");e.interceptionState="finished"}}function K(e){if("committed"!==e.interceptionState)throw new Error("invalid event interception state when processing scroll behavior");e.interceptionState="scrolled"}class X{url;sameDocument;key;id;index;state;historyState;constructor({url:e,sameDocument:t,historyState:n,state:r,key:i=null,id:s=null,index:o=-1}){this.url=e,this.sameDocument=t,this.state=r,this.historyState=n,this.key=i,this.id=s,this.index=o}getState(){return this.state}getHistoryState(){return this.historyState}}function Y(e,t){return t.hash!==e.hash&&t.hostname===e.hostname&&t.pathname===e.pathname&&t.search===e.search}class ee{from;navigationType;finished;finishedResolve;finishedReject;constructor(e,t){this.from=e,this.navigationType=t,this.finished=new Promise((e,t)=>{this.finishedReject=t,this.finishedResolve=e}),this.finished.catch(()=>{})}}class te{navigation;committedTo=null;committedResolve;committedReject;finishedResolve;finishedReject;committed;finished;get signal(){return this.abortController.signal}abortController=new AbortController;constructor(e){var t=this;this.navigation=e,this.committed=new Promise((e,t)=>{this.committedResolve=t=>{this.committedTo=t,e(t)},this.committedReject=t}),this.finished=new Promise(function(){var e=(0,r.A)(function*(e,n){t.finishedResolve=()=>{if(null===t.committedTo)throw new Error("NavigateEvent should have been committed before resolving finished promise.");e(t.committedTo)},t.finishedReject=e=>{n(e),t.abortController.abort(e)}});return function(t,n){return e.apply(this,arguments)}}()),this.committed.catch(()=>{}),this.finished.catch(()=>{})}}var ne=n(83467),re=n(536),ie=n(59146),se=n(7734);class oe{static ɵfac=function(e){return new(e||oe)};static ɵprov=i["ɵɵdefineInjectable"]({token:oe,factory:()=>window.navigation,providedIn:"platform"})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](oe,[{type:i.Injectable,args:[{providedIn:"platform",useFactory:()=>window.navigation}]}],null,null);var ae=n(6001);const he=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;function le(e,t){let n,r;/^((http[s]?|ftp):\/\/)/.test(e)||(n="http://empty.com/");try{r=new URL(e,n)}catch(i){const s=he.exec(n||""+e);if(!s)throw new Error(`Invalid URL: ${e} with base: ${t}`);const o=s[4].split(":");r={protocol:s[1],hostname:o[0],port:o[1]||"",pathname:s[5],search:s[6],hash:s[8]}}return r.pathname&&0===r.pathname.indexOf(t)&&(r.pathname=r.pathname.substring(t.length)),{hostname:!n&&r.hostname||"",protocol:!n&&r.protocol||"",port:!n&&r.port||"",pathname:r.pathname||"/",search:r.search||"",hash:r.hash||""}}const ce=new i.InjectionToken("MOCK_PLATFORM_LOCATION_CONFIG");class ue{baseHref="";hashUpdate=new se.B;popStateSubject=new se.B;urlChangeIndex=0;urlChanges=[{hostname:"",protocol:"",port:"",pathname:"/",search:"",hash:"",state:null}];constructor(e){if(e){this.baseHref=e.appBaseHref||"";const t=this.parseChanges(null,e.startUrl||"http://_empty_/",this.baseHref);this.urlChanges[0]={...t}}}get hostname(){return this.urlChanges[this.urlChangeIndex].hostname}get protocol(){return this.urlChanges[this.urlChangeIndex].protocol}get port(){return this.urlChanges[this.urlChangeIndex].port}get pathname(){return this.urlChanges[this.urlChangeIndex].pathname}get search(){return this.urlChanges[this.urlChangeIndex].search}get hash(){return this.urlChanges[this.urlChangeIndex].hash}get state(){return this.urlChanges[this.urlChangeIndex].state}getBaseHrefFromDOM(){return this.baseHref}onPopState(e){const t=this.popStateSubject.subscribe(e);return()=>t.unsubscribe()}onHashChange(e){const t=this.hashUpdate.subscribe(e);return()=>t.unsubscribe()}get href(){let e=`${this.protocol}//${this.hostname}${this.port?":"+this.port:""}`;return e+=`${"/"===this.pathname?"":this.pathname}${this.search}${this.hash}`,e}get url(){return`${this.pathname}${this.search}${this.hash}`}parseChanges(e,t,n=""){return e=JSON.parse(JSON.stringify(e)),{...le(t,n),state:e}}replaceState(e,t,n){const{pathname:r,search:i,state:s,hash:o}=this.parseChanges(e,n);this.urlChanges[this.urlChangeIndex]={...this.urlChanges[this.urlChangeIndex],pathname:r,search:i,hash:o,state:s}}pushState(e,t,n){const{pathname:r,search:i,state:s,hash:o}=this.parseChanges(e,n);this.urlChangeIndex>0&&this.urlChanges.splice(this.urlChangeIndex+1),this.urlChanges.push({...this.urlChanges[this.urlChangeIndex],pathname:r,search:i,hash:o,state:s}),this.urlChangeIndex=this.urlChanges.length-1}forward(){const e=this.url,t=this.hash;this.urlChangeIndex<this.urlChanges.length&&this.urlChangeIndex++,this.emitEvents(t,e)}back(){const e=this.url,t=this.hash;this.urlChangeIndex>0&&this.urlChangeIndex--,this.emitEvents(t,e)}historyGo(e=0){const t=this.url,n=this.hash,r=this.urlChangeIndex+e;r>=0&&r<this.urlChanges.length&&(this.urlChangeIndex=r),this.emitEvents(n,t)}getState(){return this.state}emitEvents(e,t){this.popStateSubject.next({type:"popstate",state:this.getState(),oldUrl:t,newUrl:this.url}),e!==this.hash&&this.hashUpdate.next({type:"hashchange",state:null,oldUrl:t,newUrl:this.url})}static ɵfac=function(e){return new(e||ue)(i["ɵɵinject"](ce,8))};static ɵprov=i["ɵɵdefineInjectable"]({token:ue,factory:ue.ɵfac})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](ue,[{type:i.Injectable}],()=>[{type:void 0,decorators:[{type:i.Inject,args:[ce]},{type:i.Optional}]}],null);class de{_platformNavigation;constructor(){const e=(0,i.inject)(oe);if(!(e instanceof Z))throw new Error("FakePlatformNavigation cannot be used without FakeNavigation. Use `provideFakeNavigation` to have all these services provided together.");this._platformNavigation=e}config=(0,i.inject)(ce,{optional:!0});getBaseHrefFromDOM(){return this.config?.appBaseHref??""}onPopState(e){return this._platformNavigation.window.addEventListener("popstate",e),()=>this._platformNavigation.window.removeEventListener("popstate",e)}onHashChange(e){return this._platformNavigation.window.addEventListener("hashchange",e),()=>this._platformNavigation.window.removeEventListener("hashchange",e)}get href(){return this._platformNavigation.currentEntry.url}get protocol(){return new URL(this._platformNavigation.currentEntry.url).protocol}get hostname(){return new URL(this._platformNavigation.currentEntry.url).hostname}get port(){return new URL(this._platformNavigation.currentEntry.url).port}get pathname(){return new URL(this._platformNavigation.currentEntry.url).pathname}get search(){return new URL(this._platformNavigation.currentEntry.url).search}get hash(){return new URL(this._platformNavigation.currentEntry.url).hash}pushState(e,t,n){this._platformNavigation.pushState(e,t,n)}replaceState(e,t,n){this._platformNavigation.replaceState(e,t,n)}forward(){this._platformNavigation.forward()}back(){this._platformNavigation.back()}historyGo(e=0){this._platformNavigation.go(e)}getState(){return this._platformNavigation.currentEntry.getHistoryState()}static ɵfac=function(e){return new(e||de)};static ɵprov=i["ɵɵdefineInjectable"]({token:de,factory:de.ɵfac})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](de,[{type:i.Injectable}],()=>[],null),new i.InjectionToken("fakeNavigation",{providedIn:"root",factory:()=>{const e=(0,i.inject)(ce,{optional:!0}),t="http://_empty_/",n=new URL(e?.startUrl||t,t);return new Z((0,i.inject)(ae.q),n.href)}});class pe{urlChanges=[];_history=[new ve("","",null)];_historyIndex=0;_subject=new se.B;_basePath="";_locationStrategy=null;_urlChangeListeners=[];_urlChangeSubscription=null;ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}setInitialPath(e){this._history[this._historyIndex].path=e}setBaseHref(e){this._basePath=e}path(){return this._history[this._historyIndex].path}getState(){return this._history[this._historyIndex].state}isCurrentPathEqualTo(e,t=""){const n=e.endsWith("/")?e.substring(0,e.length-1):e;return(this.path().endsWith("/")?this.path().substring(0,this.path().length-1):this.path())==n+(t.length>0?"?"+t:"")}simulateUrlPop(e){this._subject.next({url:e,pop:!0,type:"popstate"})}simulateHashChange(e){const t=this.prepareExternalUrl(e);this.pushHistory(t,"",null),this.urlChanges.push("hash: "+e),this._subject.next({url:e,pop:!0,type:"popstate"}),this._subject.next({url:e,pop:!0,type:"hashchange"})}prepareExternalUrl(e){return e.length>0&&!e.startsWith("/")&&(e="/"+e),this._basePath+e}go(e,t="",n=null){e=this.prepareExternalUrl(e),this.pushHistory(e,t,n);const r=this._history[this._historyIndex-1];if(r.path==e&&r.query==t)return;const i=e+(t.length>0?"?"+t:"");this.urlChanges.push(i),this._notifyUrlChangeListeners(e+(0,ie.Q)(t),n)}replaceState(e,t="",n=null){e=this.prepareExternalUrl(e);const r=this._history[this._historyIndex];if(r.state=n,r.path==e&&r.query==t)return;r.path=e,r.query=t;const i=e+(t.length>0?"?"+t:"");this.urlChanges.push("replace: "+i),this._notifyUrlChangeListeners(e+(0,ie.Q)(t),n)}forward(){this._historyIndex<this._history.length-1&&(this._historyIndex++,this._subject.next({url:this.path(),state:this.getState(),pop:!0,type:"popstate"}))}back(){this._historyIndex>0&&(this._historyIndex--,this._subject.next({url:this.path(),state:this.getState(),pop:!0,type:"popstate"}))}historyGo(e=0){const t=this._historyIndex+e;t>=0&&t<this._history.length&&(this._historyIndex=t,this._subject.next({url:this.path(),state:this.getState(),pop:!0,type:"popstate"}))}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}),()=>{const t=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(t,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t??void 0,complete:n??void 0})}normalize(e){return null}pushHistory(e,t,n){this._historyIndex>0&&this._history.splice(this._historyIndex+1),this._history.push(new ve(e,t,n)),this._historyIndex=this._history.length-1}static ɵfac=function(e){return new(e||pe)};static ɵprov=i["ɵɵdefineInjectable"]({token:pe,factory:pe.ɵfac})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](pe,[{type:i.Injectable}],null,null);class ve{path;query;state;constructor(e,t,n){this.path=e,this.query=t,this.state=n}}class ge extends ie.hb{internalBaseHref="/";internalPath="/";internalTitle="";urlChanges=[];_subject=new se.B;stateChanges=[];constructor(){super()}simulatePopState(e){this.internalPath=e,this._subject.next(new fe(this.path()))}path(e=!1){return this.internalPath}prepareExternalUrl(e){return e.startsWith("/")&&this.internalBaseHref.endsWith("/")?this.internalBaseHref+e.substring(1):this.internalBaseHref+e}pushState(e,t,n,r){this.stateChanges.push(e),this.internalTitle=t;const i=n+(r.length>0?"?"+r:"");this.internalPath=i;const s=this.prepareExternalUrl(i);this.urlChanges.push(s)}replaceState(e,t,n,r){this.stateChanges[(this.stateChanges.length||1)-1]=e,this.internalTitle=t;const i=n+(r.length>0?"?"+r:"");this.internalPath=i;const s=this.prepareExternalUrl(i);this.urlChanges.push("replace: "+s)}onPopState(e){this._subject.subscribe({next:e})}getBaseHref(){return this.internalBaseHref}back(){if(this.urlChanges.length>0){this.urlChanges.pop(),this.stateChanges.pop();const e=this.urlChanges.length>0?this.urlChanges[this.urlChanges.length-1]:"";this.simulatePopState(e)}}forward(){throw"not implemented"}getState(){return this.stateChanges[(this.stateChanges.length||1)-1]}static ɵfac=function(e){return new(e||ge)};static ɵprov=i["ɵɵdefineInjectable"]({token:ge,factory:ge.ɵfac})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](ge,[{type:i.Injectable}],()=>[],null);class fe{newUrl;pop=!0;type="popstate";constructor(e){this.newUrl=e}}function me(){return[{provide:ie.aZ,useClass:pe},{provide:ie.hb,useClass:ge}]}class ye{static withRoutes(e,t){return{ngModule:ye,providers:[{provide:ne.bw,multi:!0,useValue:e},{provide:ne.J_,useValue:t||{}}]}}static ɵfac=function(e){return new(e||ye)};static ɵmod=i["ɵɵdefineNgModule"]({type:ye,exports:[re.iI]});static ɵinj=i["ɵɵdefineInjector"]({providers:[re.JG,me(),(0,re.Sn)(re.D7).ɵproviders,{provide:ne.bw,multi:!0,useValue:[]}],imports:[re.iI]})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](ye,[{type:i.NgModule,args:[{exports:[re.iI],providers:[re.JG,me(),(0,re.Sn)(re.D7).ɵproviders,{provide:ne.bw,multi:!0,useValue:[]}]}]}],null,null);class Ee{fixture;harness;createHarness(){if(this.harness)throw new Error("Only one harness should be created per test.");return this.harness=new Ce(this.getRootFixture()),this.harness}getRootFixture(){return void 0!==this.fixture||(this.fixture=q.createComponent(we),this.fixture.detectChanges()),this.fixture}static ɵfac=function(e){return new(e||Ee)};static ɵprov=i["ɵɵdefineInjectable"]({token:Ee,factory:Ee.ɵfac,providedIn:"root"})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](Ee,[{type:i.Injectable,args:[{providedIn:"root"}]}],null,null);class we{outlet;routerOutletData=(0,i.signal)(void 0);static ɵfac=function(e){return new(e||we)};static ɵcmp=i["ɵɵdefineComponent"]({type:we,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&i["ɵɵviewQuery"](ne.n3,5),2&e){let e;i["ɵɵqueryRefresh"](e=i["ɵɵloadQuery"]())&&(t.outlet=e.first)}},decls:1,vars:1,consts:[[3,"routerOutletData"]],template:function(e,t){1&e&&i["ɵɵelement"](0,"router-outlet",0),2&e&&i["ɵɵproperty"]("routerOutletData",t.routerOutletData())},dependencies:[ne.n3],encapsulation:2})}("undefined"==typeof ngDevMode||ngDevMode)&&i["ɵsetClassMetadata"](we,[{type:i.Component,args:[{template:'<router-outlet [routerOutletData]="routerOutletData()"></router-outlet>',imports:[ne.n3]}]}],null,{outlet:[{type:i.ViewChild,args:[ne.n3]}]});class Ce{static create(e){return(0,r.A)(function*(){const t=q.inject(Ee).createHarness();return void 0!==e&&(yield t.navigateByUrl(e)),t})()}fixture;constructor(e){this.fixture=e}detectChanges(){this.fixture.detectChanges()}get routeDebugElement(){const e=this.fixture.componentInstance.outlet;return e&&e.isActivated?this.fixture.debugElement.query(t=>t.componentInstance===e.component):null}get routeNativeElement(){return this.routeDebugElement?.nativeElement??null}navigateByUrl(e,t){var n=this;return(0,r.A)(function*(){const r=q.inject(ne.Ix);let i;const s=new Promise(e=>{i=e});(0,ne.gk)(q.inject(ne.Ix),i),yield r.navigateByUrl(e),yield s,n.fixture.detectChanges();const o=n.fixture.componentInstance.outlet;if(o&&o.isActivated&&o.activatedRoute.component){const e=o.component;if(void 0!==t&&!(e instanceof t))throw new Error(`Unexpected routed component type. Expected ${t.name} but got ${e.constructor.name}`);return e}if(void 0!==t)throw new Error(`Unexpected routed component type. Expected ${t.name} but the navigation did not activate any component.`);return null})()}}}}]);