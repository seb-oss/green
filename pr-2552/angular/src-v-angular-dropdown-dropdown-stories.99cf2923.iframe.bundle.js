"use strict";(self.webpackChunkgreen=self.webpackChunkgreen||[]).push([[3635],{35690:(e,n,t)=>{t.d(n,{d:()=>w});var o=t(8674),l=t(29386),i=t(7734),r=t(26997),a=t(77898),s=t(50345),c=t(42118),d=t(40314),p=t(28260),u=t(24114),g=t(16617),b=t(10723),h=t(74050),m=t(29241),v=t(3774),y=t(14773),f=t(6223);let w=class{set nggvTypeahead(e){this.typeaheadFunction=e,this.inputSubscription$&&(this.inputSubscription$?.unsubscribe(),this.inputSubscription$=void 0,this.handleInputChanges())}onNggvInput(e){this.inputValue$.next(e)}get hostIsDropdown(){return!!this.hostDropdown}get defaultNullishOption(){return{key:null,label:this.unselectLabel||" "}}get emptyOption(){return{key:null,label:this.emptyOptionLabel||"label.nomatchingoptions",disabled:!0}}get localName(){return this.element.nativeElement.localName}constructor(e,n,t,o){this.viewContainerRef=e,this.element=n,this.hostDropdown=t,this.hostInput=o,this.allowUnselect=!0,this.filterPhraseChange=new l.EventEmitter,this.inputValue$=new i.B,this.onDestroy$=new i.B}ngOnInit(){this.handleInputChanges(),this.hostIsDropdown?this.createInput():this.createDropdownList()}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}handleInputChanges(){this.inputSubscription$=this.inputValue$.pipe((0,r.Q)(this.onDestroy$),(0,a.F)(),(0,s.M)(e=>this.filterPhraseChange.emit(e)),this.typeaheadFunction?this.typeaheadFunction:()=>(0,c.H)([]),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=(0,h.ms)(e);return(0,d.N)(function(n,l){for(var i=e.length,r=new Array(i),a=e.map(function(){return!1}),s=!1,c=function(n){(0,u.Tg)(e[n]).subscribe((0,p._)(l,function(e){r[n]=e,s||a[n]||(a[n]=!0,(s=a.every(g.D))&&(a=null))},b.l))},d=0;d<i;d++)c(d);n.subscribe((0,p._)(l,function(e){if(s){var n=(0,o.fX)([e],(0,o.zs)(r));l.next(t?t.apply(void 0,(0,o.fX)([],(0,o.zs)(n))):n)}}))})}(this.inputValue$)).subscribe(([e,n])=>this.setOptions(e,n)),this.inputValue$.next("")}createInput(){this.inputComponent=this.viewContainerRef.createComponent(f.x),this.inputComponent.setInput("hostComponent",this.hostDropdown),this.inputComponent.setInput("selectedFormatter",this.selectedFormatter),this.inputComponent.setInput("resultFormatter",this.resultFormatter),this.inputComponent.instance.nggvInput.pipe((0,r.Q)(this.onDestroy$)).subscribe(e=>this.inputValue$.next(e))}createDropdownList(){this.dropdownListComponent=this.viewContainerRef.createComponent(y.o),this.dropdownListComponent.setInput("hostComponent",this.hostInput)}setOptions(e,n){if(!e)return;const t=this.allowUnselect&&!n&&!(Object.keys(e[0]??{}).includes("key")&&null==e[0]?.key);if(0===e.length?e=[this.emptyOption]:t&&(e=[this.defaultNullishOption].concat(e)),this.hostIsDropdown)return this.hostDropdown.allowControlNullishOption=!1,this.hostDropdown.options=this.formatOptions(e),this.hostDropdown.textToHighlight=`${n||""}`,this.hostDropdown.onlyHandleDistinctChanges=!1,this.hostDropdown.selectWithSpace=!1,void this.hostDropdown.detectChanges();this.hostIsDropdown||(this.dropdownListComponent.setInput("options",this.formatOptions(e)),this.dropdownListComponent.setInput("textToHighlight",`${n||""}`))}formatOptions(e){return e?this.resultFormatter?e.map(e=>e?.label?this.resultFormatter?.(e):e):e:[]}static{this.ctorParameters=()=>[{type:l.ViewContainerRef},{type:l.ElementRef},{type:v.r,decorators:[{type:l.Optional},{type:l.Host}]},{type:m.o,decorators:[{type:l.Optional},{type:l.Host}]}]}static{this.propDecorators={nggvTypeahead:[{type:l.Input}],resultFormatter:[{type:l.Input}],selectedFormatter:[{type:l.Input}],allowUnselect:[{type:l.Input}],unselectLabel:[{type:l.Input}],emptyOptionLabel:[{type:l.Input}],filterPhraseChange:[{type:l.Output}],onNggvInput:[{type:l.HostListener,args:["nggvInput",["$event"]]}]}}};w=(0,o.Cg)([(0,l.Directive)({selector:"nggv-input[nggvTypeahead], nggv-dropdown[nggvTypeahead]",standalone:!0}),(0,o.Sn)("design:paramtypes",[l.ViewContainerRef,l.ElementRef,v.r,m.o])],w)},66601:(e,n,t)=>{t.r(n),t.d(n,{CloseOnScroll:()=>D,ComboWithInput:()=>S,Disabled:()=>T,Primary:()=>L,WithCustomSelectedTemplate:()=>I,WithCustomSelectedTemplateTypeahead:()=>x,WithDisplayDisabledAsLocked:()=>z,WithError:()=>N,WithLockedInput:()=>_,WithOptionToggle:()=>F,WithTypeAhead:()=>A,__namedExportsOrder:()=>E,default:()=>w}),t(88124);var o=t(37426),l=t(29386),i=t(46169),r=t(57040),a=t(82412),s=t(56190),c=t(33841),d=t(92955),p=t(32375),u=t(57277),g=t(68898),b=t(16631),h=t(29365),m=t(3774),v=t(28128),y=t(6223),f=t(35690);const w={title:"V-Angular/Dropdown",component:m.r,decorators:[(0,r.L4)({providers:[(0,l.importProvidersFrom)(u.R),p.z]}),(0,r.Iz)({declarations:[h.b,g.o,y.x,v.X,b.X,d.q],imports:[o.MD,c.$M,i.YN,i.X1,u.R,f.d],schemas:[l.CUSTOM_ELEMENTS_SCHEMA]})],argTypes:{size:{options:["small","large"],control:{type:"select",labels:{small:"Small",large:"Large"}}}}},C=[{key:"opt1",label:"label.defaultlabel",accountNumber:"345345"},{key:"opt6",label:"HÖR LUR TJO HEJ KOTLETT"},{key:"opt2",label:"This is a very long label that should over flow a smaller dropdown button"},{key:"opt3",label:"Option 3 - disabled",disabled:!0},{key:"opt4",label:"Option 4"},{key:"opt5",label:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do"},{label:"Group",options:[{key:"group-opt1",label:null,accountNumber:"3453245"},{key:"group-opt2",label:"Option 2"},{key:"group-opt3",label:"Option 3"},{key:"group-opt4",label:"Option 4"}]}],k=e=>{const n=new i.hs(e.ngModel);return n.valueChanges.subscribe(console.log),{template:'\n      <div>\n        <nggv-dropdown\n          [label]="label"\n          [placeholder]="placeholder"\n          [description]="description | transloco"\n          [options]="options"\n          [required]="required"\n          [invalid]="invalid"\n          [error]="error"\n          [formControl]="formControl"\n          [locked]="locked"\n          [size]="size"\n          [closeOnScroll]="closeOnScroll"\n          [displayDisabledAsLocked]="displayDisabledAsLocked">\n          <ng-template #labelTpl>Custom Label</ng-template>\n          <ng-template let-option #optionTpl>{{option.label | transloco}} {{option.accountNumber}}</ng-template>\n        </nggv-dropdown>\n        <div style="margin-top: 1rem">\n          <button type="button" class="gds-button" (click)="disableFn()">Toggle disable control</button>\n        </div>\n      </div>',props:{...e,formControl:n,disableFn:()=>{if(n.disabled)return n.enable();n.disable()}}}},O={required:!1,invalid:!1,label:"Field label",placeholder:"Placeholder text",description:"This. Is. A. Description.",ngModel:"opt2",size:"large",closeOnScroll:!1,options:C},L=k.bind({});L.args={...O};const T=(e=>({template:'\n  <div>\n    <nggv-dropdown\n      [label]="label"\n      [placeholder]="placeholder"\n      [options]="options"\n      [required]="required"\n      [invalid]="invalid"\n      [disabled]="disabled"\n      [error]="error"\n      [size]="size"\n      [closeOnScroll]="closeOnScroll"\n      [formControl]="formControl">\n\n      <ng-template #labelTpl>Custom Label</ng-template>\n\n      <ng-template let-option #optionTpl>{{option.label | transloco}} {{option.accountNumber}}</ng-template>\n\n    </nggv-dropdown>\n  </div>',props:{...e,formControl:new i.hs({value:""})}})).bind({});T.args={...O,disabled:!0};const D=(e=>({template:'\n  <div style="height: 1000px;">\n    <nggv-dropdown\n      [label]="label"\n      [placeholder]="placeholder"\n      [options]="options"\n      [required]="required"\n      [invalid]="invalid"\n      [disabled]="disabled"\n      [error]="error"\n      [size]="size"\n      [closeOnScroll]="closeOnScroll"\n      [formControl]="formControl">\n\n      <ng-template #labelTpl>Custom Label</ng-template>\n\n      <ng-template let-option #optionTpl>{{option.label | transloco}} {{option.accountNumber}}</ng-template>\n\n    </nggv-dropdown>\n  </div>',props:{...e,formControl:new i.hs({value:""})}})).bind({});D.args={...O,closeOnScroll:!0};const N=k.bind({});N.args={...O,invalid:!0,error:"Error message"};const S=(e=>{const n=new i.hs(e.ngModel);return n.valueChanges.subscribe(console.log),{template:'\n      <div style="display: flex">\n        <nggv-dropdown\n          label="Dropdown"\n          [placeholder]="placeholder"\n          [options]="options"\n          [required]="required"\n          [invalid]="invalid"\n          [size]="size"\n          [closeOnScroll]="closeOnScroll"\n          error="This is a permanent error"\n          [formControl]="formControl">\n        </nggv-dropdown>\n        <nggv-input\n          label="Input"\n          [placeholder]="placeholder"\n          [required]="required"\n          [size]="size"\n          style="margin-left: 0.25rem;"\n          [formControl]="formControl">\n        </nggv-input>\n      </div>\n      <div>\n        <nggv-dropdown\n          label="Dropdown 2"\n          [placeholder]="placeholder"\n          [options]="options"\n          [required]="required"\n          [invalid]="invalid"\n          [size]="size"\n          [closeOnScroll]="closeOnScroll"\n          error="This is a permanent error"\n          [formControl]="formControl">\n        </nggv-dropdown>\n      </div>\n      <div>\n        <nggv-input\n          label="Input 2"\n          [placeholder]="placeholder"\n          [required]="true"\n          [size]="size"\n          style="margin-left: 0.25rem;"\n          [formControl]="formControl">\n        </nggv-input>\n      </div>',props:{...e,formControl:n}}}).bind({});S.args={...O};const F=(e=>{const n=new i.hs;n.valueChanges.subscribe(e=>{console.log({value:e})});return e.options=C,{template:'\n      <div>\n        <div style="display: flex">\n          <button class="gds-button" (click)="showAlt = !showAlt">Change options</button>\n          <button class="gds-button gds-button-alternative" (click)="resetFunc()">Reset to default</button>\n        </div>\n        <div>Value: {{ formControl.value }}</div>\n        <nggv-dropdown\n          [label]="label"\n          [placeholder]="placeholder"\n          [options]="options"\n          [required]="required"\n          [closeOnScroll]="closeOnScroll"\n          [size]="size"\n          [formControl]="formControl">\n\n          <ng-template #labelTpl>Custom Label</ng-template>\n\n          <ng-template let-option #optionTpl>{{option.label | transloco}} {{option.accountNumber}}</ng-template>\n\n        </nggv-dropdown>\n      </div>',props:{...e,showAlt:!1,formControl:n,resetFunc:()=>{n.reset("opt4")}}}}).bind({});F.args={...O,ngModel:"opt2",options:C};const I=(e=>{const n=new i.hs;return{template:'\n      <nggv-dropdown\n        [label]="label"\n        [placeholder]="placeholder"\n        [options]="options"\n        [required]="true"\n        [formControl]="formControl"\n        [locked]="locked"\n        [size]="size"\n        [closeOnScroll]="closeOnScroll"\n        [displayDisabledAsLocked]="displayDisabledAsLocked">\n\n        <ng-template let-item #groupLabelTpl>\n          <div style="background-color: salmon; padding-left: 1rem"><pre>My custom group label</pre></div>\n        </ng-template>\n\n        <ng-template let-selected #selectedTpl>\n          <div *ngIf="selected?.key" class="account-option">\n            <div class="account-option--label" style="font-weight: 500;">\n              <div>{{ selected?.accountName }}</div>\n              <div>{{ selected?.balance | number: \'1.2-2\':locale }} {{ selected?.currency }}</div>\n            </div>\n            <div class="account-option--number">\n              <div>{{ selected?.accountNumber }}</div>\n              <div>Available amount</div>\n            </div>\n          </div>\n          <div *ngIf="!selected?.key" class="account-option" style="color: gray;">Select one</div>\n        </ng-template>\n        <ng-template let-option #optionTpl>\n          <div class="account-option">\n            <div class="account-option--label">\n              <div>{{ option?.accountName }}</div>\n              <div>{{ option?.balance | number: \'1.2-2\':locale }} {{ option?.currency }}</div>\n            </div>\n            <div class="account-option--number">\n              <div>{{ option?.accountNumber }}</div>\n              <div></div>\n            </div>\n          </div>\n        </ng-template>\n\n      </nggv-dropdown>\n      <div style="margin-top: 1rem">\n        <button type="button" class="gds-button" (click)="disableFn()">Toggle disable control</button>\n      </div>\n      ',styles:["\n      ::ng-deep.nggv-field-dropdown__label::before {\n        margin: 0.5rem 0;\n      }\n      .account-option {\n        margin: 0.5rem 0;\n        padding-right: 0.5rem;\n        width: 350px;\n      }\n      ::ng-deep.gds-field-dropdown__options__label[aria-selected='false']:hover .account-option--number,\n      ::ng-deep.gds-field-dropdown__options__label[aria-selected='true']:hover .account-option--number,\n      ::ng-deep.gds-field-dropdown__options__label[aria-selected='true'] .account-option--number {\n        color: white;\n      }\n      .account-option--number,\n      .account-option--label {\n        padding-bottom: 0.25em;\n      }\n      .account-option--label {\n        display: flex;\n      }\n      .account-option--number {\n        line-height: 1;\n        font-size: 0.875em;\n        display: flex;\n        color: gray;\n      }\n      .account-option--label > * {\n        line-height: 1.5rem;\n      }\n      .account-option--number > *:first-child,\n      .account-option--label > *:first-child {\n        flex-grow: 2;\n        // flex-basis: 40%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .account-option--number > *:last-child,\n      .account-option--label > *:last-child {\n        flex-grow: 3;\n        display: flex;\n        justify-content: flex-end;\n      }"],props:{...e,formControl:n,options:[{label:"My own accounts",options:[{key:"se50000000001",label:null,accountNumber:"5000 00 000 01",accountName:"Savings account",balance:1e3,currency:"SEK"},{key:"se50000000002",label:null,accountNumber:"5000 00 000 02",accountName:"Foreign account",balance:100.5,currency:"USD"},{key:"se50000000003",label:null,accountNumber:"5000 00 000 03",accountName:"Account with a really long name",balance:2e3,currency:"SEK"},{key:"se50000000004",label:null,accountNumber:"5000 00 000 04",accountName:"Euro account with €€€",balance:100000000000.5,currency:"EUR"}]}],disableFn:()=>{if(n.disabled)return n.enable();n.disable()}}}}).bind({});I.args={...O,label:"Account selector",locked:!1,displayDisabledAsLocked:!0};const x=(e=>{let n="";const t=[{key:"se50000000001",label:null,accountNumber:"5000 00 000 01",accountName:"Savings account 2",balance:1e3,currency:"SEK"},{key:"se50000000002",label:null,accountNumber:"5000 00 000 02",accountName:"Foreign account 03",balance:100.5,currency:"USD"},{key:"se50000000003",label:null,accountNumber:"5000 00 000 03",accountName:"Account with a really long name",balance:2e3,currency:"SEK"},{key:"se50000000004",label:null,accountNumber:"5000 00 000 04",accountName:"Euro account with €€€",balance:100000000000.5,currency:"EUR"}],o=new i.hs;return{template:'\n    Value: {{ formControl.value }}\n    Filter: {{ getFilterPhrase() }}\n      <nggv-dropdown\n        [label]="label"\n        [placeholder]="placeholder"\n        [options]="options"\n        [required]="true"\n        [formControl]="formControl"\n        [locked]="locked"\n        [displayDisabledAsLocked]="displayDisabledAsLocked"\n        [nggvTypeahead]="searchFunction"\n        [selectedFormatter]="selectedFormatter"\n        [resultFormatter]="resultFormatter"\n        [allowUnselect]="true"\n        [unselectLabel]="unselectLabel"\n        [emptyOptionLabel]="emptyOptionLabel"\n        [size]="size"\n        [closeOnScroll]="closeOnScroll"\n        (filterPhraseChange)="handlefilterPhraseChange($event)">\n\n        <ng-template let-selected #selectedTpl>\n          <div *ngIf="!!selected?.key" class="account-option">\n            <div class="account-option--label" style="font-weight: 500;">\n              <div>{{ selected?.accountName }}</div>\n              <div>{{ selected?.balance | number: \'1.2-2\':locale }} {{ selected?.currency }}</div>\n            </div>\n            <div class="account-option--number">\n              <div>{{ selected?.accountNumber }}</div>\n              <div>Available amount</div>\n            </div>\n          </div>\n          <div *ngIf="!selected?.key" class="account-option" style="color: gray;">Select one</div>\n        </ng-template>\n\n        <ng-template let-option #optionTpl>\n          <div *ngIf="!option.key">\n            {{ (option?.label | transloco) || \'None\' }}\n          </div>\n          <div class="account-option" *ngIf="!!option.key">\n            <div class="account-option--label">\n              <div>\n                <nggv-typeahead-highlight [textContent]="option?.accountName" [textToHighlight]="getFilterPhrase()">\n                </nggv-typeahead-highlight>\n              </div>\n\n              <div>{{ option?.balance | number: \'1.2-2\':locale }} {{ option?.currency }}</div>\n            </div>\n            <div class="account-option--number">\n              <div>\n                <nggv-typeahead-highlight [textContent]="option?.accountNumber" [textToHighlight]="getFilterPhrase()">\n                </nggv-typeahead-highlight></div>\n              <div></div>\n            </div>\n          </div>\n        </ng-template>\n\n      </nggv-dropdown>\n      <div style="margin-top: 1rem">\n        <button type="button" class="gds-button" (click)="disableFn()">Toggle disable control</button>\n      </div>\n      ',styles:["\n      ::ng-deep.nggv-field-dropdown__label::before {\n        margin: 0.5rem 0;\n      }\n      .account-option {\n        margin: 0.5rem 0;\n        padding-right: 0.5rem;\n        width: 350px;\n      }\n      ::ng-deep.gds-field-dropdown__options__label[aria-selected='false']:hover .account-option--number,\n      ::ng-deep.gds-field-dropdown__options__label[aria-selected='true']:hover .account-option--number,\n      ::ng-deep.gds-field-dropdown__options__label[aria-selected='true'] .account-option--number {\n        color: white;\n      }\n      .account-option--number,\n      .account-option--label {\n        padding-bottom: 0.25em;\n      }\n      .account-option--label {\n        display: flex;\n      }\n      .account-option--number {\n        line-height: 1;\n        font-size: 0.875em;\n        display: flex;\n        color: gray;\n      }\n      .account-option--label > * {\n        line-height: 1.5rem;\n      }\n      .account-option--number > *:first-child,\n      .account-option--label > *:first-child {\n        flex-grow: 2;\n        // flex-basis: 40%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .account-option--number > *:last-child,\n      .account-option--label > *:last-child {\n        flex-grow: 3;\n        display: flex;\n        justify-content: flex-end;\n      }"],props:{...e,formControl:o,options:t,unselectLabel:"Unselect",disableFn:()=>{if(o.disabled)return o.enable();o.disable()},searchFunction:e=>e.pipe((0,a.B)(150),(0,s.T)(e=>t.filter(n=>n.accountName?.toUpperCase().includes(e?.toUpperCase())||n.accountNumber?.replace(/\s/,"").includes(e)))),getFilterPhrase:function(){return n},handlefilterPhraseChange:e=>{n=e},selectedFormatter:e=>e?.accountName}}}).bind({});x.args={...O,label:"Account selector",locked:!1,displayDisabledAsLocked:!0};const _=k.bind({});_.args={...L.args,ngModel:"opt2",locked:!0,description:void 0};const z=k.bind({});z.args={...L.args,locked:!1,description:void 0,displayDisabledAsLocked:!0};const A=(e=>{const n=new i.hs;return n.valueChanges.subscribe(console.log),{template:'\n    Value: {{ formControl.value }}\n    <div>\n        <nggv-dropdown\n          [label]="label"\n          [formControl]="formControl"\n          [placeholder]="placeholder"\n          [description]="description | transloco"\n          [required]="required"\n          [invalid]="invalid"\n          [error]="error"\n          [closeOnScroll]="closeOnScroll"\n          #dropdownElement\n          [options]="options"\n          [allowUnselect]="allowUnselect"\n          [unselectLabel]="unselectLabel"\n          [nggvTypeahead]="searchFunction"\n          [resultFormatter]="resultFormatter"\n          [selectedFormatter]="selectedFormatter"\n          [emptyOptionLabel]="emptyOptionLabel">\n\n          <ng-template #labelTpl>Custom Label</ng-template>\n\n        </nggv-dropdown>\n      </div>',styles:[""],props:{...e,formControl:n,placeholder:"Choose",allowUnselect:!0,unselectLabel:"Unselect",emptyOptionLabel:"No matching options",searchFunction:e=>e.pipe((0,a.B)(300),(0,s.T)(e=>C.filter(n=>n.label?.replace(/\s/gm,"").toLocaleLowerCase().includes(e?.replace(/\s/gm,"").toLocaleLowerCase()))))}}}).bind({});A.args={...O};const E=["Primary","Disabled","CloseOnScroll","WithError","ComboWithInput","WithOptionToggle","WithCustomSelectedTemplate","WithCustomSelectedTemplateTypeahead","WithLockedInput","WithDisplayDisabledAsLocked","WithTypeAhead"]},77898:(e,n,t)=>{t.d(n,{F:()=>r});var o=t(16617),l=t(40314),i=t(28260);function r(e,n){return void 0===n&&(n=o.D),e=null!=e?e:a,(0,l.N)(function(t,o){var l,r=!0;t.subscribe((0,i._)(o,function(t){var i=n(t);!r&&e(l,i)||(r=!1,l=i,o.next(t))}))})}function a(e,n){return e===n}},82412:(e,n,t)=>{t.d(n,{B:()=>r});var o=t(67288),l=t(40314),i=t(28260);function r(e,n){return void 0===n&&(n=o.E),(0,l.N)(function(t,o){var l=null,r=null,a=null,s=function(){if(l){l.unsubscribe(),l=null;var e=r;r=null,o.next(e)}};function c(){var t=a+e,i=n.now();if(i<t)return l=this.schedule(void 0,t-i),void o.add(l);s()}t.subscribe((0,i._)(o,function(t){r=t,a=n.now(),l||(l=n.schedule(c,e),o.add(l))},function(){s(),o.complete()},void 0,function(){r=l=null}))})}}}]);