import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{r as h}from"./iframe-Bq-fp841.js";import{c as q}from"./index-DHVX7yAp.js";import{r as U}from"./id-D3UFNDLZ.js";import{B as A}from"./button-BxrCoBk-.js";function F(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var H=!1;if(typeof window<"u"){var P={get passive(){H=!0}};window.addEventListener("testPassive",null,P),window.removeEventListener("testPassive",null,P)}var N=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),d=[],T=!1,I=-1,y=void 0,g=void 0,Y=function(e){return d.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},p=function(e){var n=e||window.event;return Y(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},W=function(e){if(g===void 0){var n=!!e&&e.reserveScrollBarGap===!0,l=window.innerWidth-document.documentElement.clientWidth;n&&l>0&&(g=document.body.style.paddingRight,document.body.style.paddingRight=l+"px")}y===void 0&&(y=document.body.style.overflow,document.body.style.overflow="hidden")},O=function(){g!==void 0&&(document.body.style.paddingRight=g,g=void 0),y!==void 0&&(document.body.style.overflow=y,y=void 0)},$=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},z=function(e,n){var l=e.targetTouches[0].clientY-I;return Y(e.target)?!1:n&&n.scrollTop===0&&l>0||$(n)&&l<0?p(e):(e.stopPropagation(),!0)},X=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!d.some(function(i){return i.targetElement===e})){var l={targetElement:e,options:n||{}};d=[].concat(F(d),[l]),N?(e.ontouchstart=function(i){i.targetTouches.length===1&&(I=i.targetTouches[0].clientY)},e.ontouchmove=function(i){i.targetTouches.length===1&&z(i,e)},T||(document.addEventListener("touchmove",p,H?{passive:!1}:void 0),T=!0)):W(n)}},J=function(){N?(d.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),T&&(document.removeEventListener("touchmove",p,H?{passive:!1}:void 0),T=!1),I=-1):O(),d=[]},K=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}d=d.filter(function(n){return n.targetElement!==e}),N?(e.ontouchstart=null,e.ontouchmove=null,T&&d.length===0&&(document.removeEventListener("touchmove",p,H?{passive:!1}:void 0),T=!1)):d.length||O()};const j=({type:t,setStatus:e,setShouldRender:n,header:l="",closeText:i="Close Modal",id:r,onClose:u})=>{const w=a=>{t==="slideout"?(e&&e(S),setTimeout(()=>{u&&u(a),e&&e(v),n&&n(!1)},b)):(u&&u(a),e&&e(v),n&&n(!1))};return o.jsxs("div",{className:"header",children:[o.jsx("h3",{id:r,children:l}),o.jsx("button",{className:"close","aria-label":i,onClick:w,children:o.jsx("i",{})})]})},k=({children:t,id:e})=>o.jsx("div",{className:"body",id:e,children:t}),D=({confirm:t,dismiss:e,onClose:n,onConfirm:l,onDismiss:i,preventBackdropClose:r=!1})=>{const u=a=>{l&&l(a),n&&n(a)},w=a=>{i&&i(a),n&&n(a)};return o.jsxs("div",{className:"footer",children:[e&&o.jsx(A,{variant:"secondary",onClick:w,children:e}),t&&o.jsx(A,{variant:"primary",onClick:u,children:t})]})},b=500,v="unmounted",R="is-mounting",Q="is-entering",_="entered",S="is-exiting",Z=({type:t="default",id:e=U(),isOpen:n,size:l="sm",enableBodyScrollLock:i=!0,...r})=>{const[u,w]=h.useState(e),[a,s]=h.useState(v),[B,f]=h.useState(!1),c=h.useRef(null);if(h.useEffect(()=>(n&&!B&&a===v&&(f(!0),s(R)),n&&B&&a===R&&(s(Q),setTimeout(()=>{s(_)},b)),!n&&a===_&&(s(S),setTimeout(()=>{s(v),f(!1)},b)),n&&c.current&&i?X(c.current,{allowTouchMove:m=>{var C;return((C=c.current)==null?void 0:C.contains(m))||!1}}):c.current&&K(c.current),()=>{J()}),[n,B,a,i]),!n)return null;const M=`${u}_body`,E=`${u}_header`,x={id:u,role:"dialog","aria-modal":!0,"aria-labelledby":E,"aria-describedby":M};let L;switch(t){case"slideout":{const m=q(a,{"gds-slide-out--960":l==="lg","gds-slide-out--768":l==="md"});L=o.jsxs("aside",{className:m,...x,ref:c,children:[o.jsx(j,{id:E,setStatus:s,setShouldRender:f,type:t,...r}),o.jsx(k,{id:M,...r}),o.jsx(D,{...r})]});break}case"takeover":{L=o.jsxs("main",{...x,ref:c,children:[o.jsx(j,{id:E,...r}),o.jsx(k,{id:M,...r}),o.jsx(D,{...r})]});break}default:{L=o.jsx("div",{className:"gds-dialog-wrapper",ref:c,children:o.jsxs("section",{...x,children:[o.jsx(j,{id:E,...r}),o.jsx(k,{id:M,...r}),o.jsx(D,{...r})]})});break}}const V=q("backdrop",{"backdrop--transparent":t==="slideout"},a),G=m=>{r.onClose&&!r.preventBackdropClose&&(t==="slideout"?(s&&s(S),setTimeout(()=>{r.onClose&&r.onClose(m),s&&s(v),f&&f(!1)},b)):(r.onClose&&r.onClose(m),s&&s(v),f&&f(!1)))};return o.jsxs(o.Fragment,{children:[L,o.jsx("div",{"data-testid":"modal-backdrop",className:V,onClick:m=>G(m),"aria-hidden":"true"})]})};Z.__docgenInfo={description:"@deprecated Please use the `gds-dialog` web component from green-core instead",methods:[],displayName:"Modal",props:{type:{required:!1,tsType:{name:"ModalType"},description:"",defaultValue:{value:"'default'",computed:!1}},header:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},confirm:{required:!1,tsType:{name:"string"},description:""},dismiss:{required:!1,tsType:{name:"string"},description:""},closeText:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"Size"},description:"",defaultValue:{value:"'sm'",computed:!1}},id:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"randomId()",computed:!0}},isOpen:{required:!1,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  event: MouseEvent<HTMLButtonElement | HTMLDivElement> | null,
) => unknown`,signature:{arguments:[{type:{name:"union",raw:"MouseEvent<HTMLButtonElement | HTMLDivElement> | null",elements:[{name:"MouseEvent",elements:[{name:"union",raw:"HTMLButtonElement | HTMLDivElement",elements:[{name:"HTMLButtonElement"},{name:"HTMLDivElement"}]}],raw:"MouseEvent<HTMLButtonElement | HTMLDivElement>"},{name:"null"}]},name:"event"}],return:{name:"unknown"}}},description:""},onConfirm:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  event: MouseEvent<HTMLButtonElement | HTMLDivElement> | null,
) => unknown`,signature:{arguments:[{type:{name:"union",raw:"MouseEvent<HTMLButtonElement | HTMLDivElement> | null",elements:[{name:"MouseEvent",elements:[{name:"union",raw:"HTMLButtonElement | HTMLDivElement",elements:[{name:"HTMLButtonElement"},{name:"HTMLDivElement"}]}],raw:"MouseEvent<HTMLButtonElement | HTMLDivElement>"},{name:"null"}]},name:"event"}],return:{name:"unknown"}}},description:""},onDismiss:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  event: MouseEvent<HTMLButtonElement | HTMLDivElement> | null,
) => unknown`,signature:{arguments:[{type:{name:"union",raw:"MouseEvent<HTMLButtonElement | HTMLDivElement> | null",elements:[{name:"MouseEvent",elements:[{name:"union",raw:"HTMLButtonElement | HTMLDivElement",elements:[{name:"HTMLButtonElement"},{name:"HTMLDivElement"}]}],raw:"MouseEvent<HTMLButtonElement | HTMLDivElement>"},{name:"null"}]},name:"event"}],return:{name:"unknown"}}},description:""},preventBackdropClose:{required:!1,tsType:{name:"boolean"},description:""},enableBodyScrollLock:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{Z as M};
