import { ImageResponse } from "next/og"
import { NextRequest } from "next/server"

// import { ImageResponse } from "@vercel/og"

export const runtime = "edge"

export async function GET(req: NextRequest) {
  const { searchParams } = req.nextUrl
  const postTitle = searchParams.get("title")

  return new ImageResponse(
    (
      <div
        style={{
          height: "100%",
          width: "100%",
          display: "flex",
          flexDirection: "column",
          alignItems: "flex-start",
          justifyContent: "space-between",
          backgroundColor: "#000000",
          backgroundImage: "linear-gradient(234deg, #000000, #222222)",
          padding: "200px",
          gap: "100px",
          fontFamily: "sans-serif",
        }}
      >
        <svg
          width="137"
          height="60"
          viewBox="0 0 137 60"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M37.1878 15.3072L29.8117 20.8012C26.3405 17.8012 21.839 17.2229 19.3622 17.2229C16.8674 17.2229 14.246 17.9458 13.8482 19.735C13.4505 21.4699 15.0776 22.8253 17.8617 23.5843C21.0435 24.4337 23.918 25.1928 28.3835 26.4578C35.0003 28.3555 39.5379 31.2107 39.5379 37.8435C39.5379 47.006 31.4025 51.741 20.5192 51.741C9.6359 51.741 2.22367 46.0842 0 43.4457L7.79188 37.6265C13.2697 42.3975 17.0662 43.0662 20.2481 43.0662C23.9 43.0662 27.3168 42.2893 27.7507 40.229C28.1124 38.5663 26.7384 37.247 23.6288 36.524C20.1215 35.7108 17.1385 35.0603 13.8302 34.1928C4.84507 31.8435 2.31406 26.6205 2.31406 21.9217C2.31406 15.4699 8.31617 8.83735 19.3261 8.83735C30.589 8.83735 37.1878 15.2891 37.1878 15.3072ZM84.174 9.48795H51.3072V50.53H84.7707V41.0603H62.8413V34.4458H77.9371V25.3915H62.8413V18.8494H84.156V9.48795H84.174ZM42.8103 60H45.3592V0H42.8103V60ZM89.0915 60H91.6406V0H89.0915V60ZM97.5885 50.53H123.983C131.034 50.53 136.765 46.2833 136.765 39.47C136.765 34.1568 133.294 30.6325 128.413 29.0782C128.25 29.0422 128.105 29.024 127.942 29.024C128.105 29.006 128.268 28.988 128.413 28.9337C131.215 27.8312 134.288 24.8855 134.288 19.8795C134.288 13.5181 128.666 9.46988 121.723 9.46988H97.5705L97.5885 50.53ZM109.177 18.0181H118.397C120.512 18.0181 122.23 19.6988 122.23 21.6144C122.23 23.5301 120.512 25.229 118.397 25.229H109.177V18.0181ZM120.44 41.4218H109.159V33.9398H120.44C122.428 33.9398 124.056 35.5482 124.056 37.6807C124.056 39.7952 122.446 41.4218 120.44 41.4218Z"
            fill="white"
          />
        </svg>
        <div
          style={{
            display: "flex",
            fontSize: 130,
            letterSpacing: "-0.05em",
            fontStyle: "normal",
            color: "white",
            lineHeight: "120px",
            whiteSpace: "pre-wrap",
          }}
        >
          {postTitle}
        </div>
        <footer
          style={{
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            gap: "30px",
            fontSize: "40px",
            color: "#ffffff",
          }}
        >
          <svg
            width="60"
            height="60"
            viewBox="0 0 60 60"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M57.9552 15.4809C46.601 15.4809 36.7018 21.9424 31.6072 31.4512C30.7148 25.4337 28.4499 19.7133 24.9952 14.7497C20.5252 8.28082 14.2368 3.34439 6.95907 0.591109L5.39169 0L4.50926 1.44719C1.82891 5.84789 0.290033 10.8708 0.0371525 16.0441C-0.215743 21.2173 0.825642 26.3712 3.06352 31.0217C5.30137 35.6722 8.66229 39.6665 12.8305 42.6297C16.9988 45.593 21.8376 47.4275 26.8926 47.9615C25.9976 52.443 24.7027 58.535 24.7027 58.535C24.6587 58.7083 24.6545 58.8892 24.6897 59.0642C24.7252 59.2395 24.7995 59.404 24.9067 59.5455C25.014 59.6868 25.1517 59.8013 25.3092 59.88C25.4667 59.959 25.6397 60 25.8151 60H29.4599C29.7311 60.0005 29.9936 59.9028 30.2008 59.7248C30.408 59.5465 30.5468 59.2993 30.5923 59.0268C30.5923 59.0268 31.1022 51.959 31.4047 48.104C47.296 47.355 60 33.943 60 17.5651V15.4784L57.9552 15.4809ZM4.09429 17.5651C4.09176 13.2376 5.13491 8.97608 7.13155 5.15692C19.6556 10.6527 27.955 23.3897 27.955 37.3902C27.955 39.5507 27.7625 41.7062 27.3775 43.8312C20.9942 43.1692 15.0791 40.1165 10.7777 35.264C6.47631 30.4114 4.09476 24.1047 4.09429 17.5651ZM32.1322 43.8847C33.1646 31.0509 43.2313 20.7882 55.8203 19.741C54.7954 32.5697 44.7237 42.8325 32.1322 43.8847Z"
              fill="white"
            />
          </svg>
          <div className="bottom">Green Design System </div>
        </footer>
      </div>
    ),
    {
      width: 1920,
      height: 1080,
    }
  )
}
