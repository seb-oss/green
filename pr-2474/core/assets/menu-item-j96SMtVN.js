import{m as M,l as S}from"./runtime-CNluP0A8.js";import{n as v}from"./Reflect-DJ7r0WLU.js";import{a as D}from"./query-p8xgzTDt.js";import{r as T}from"./query-async-MEroNOeJ.js";import{n as W}from"./when-BR7zwNJC.js";import{h as c,g as C,G as k}from"./gds-element-DTROifYq.js";import{n as I,e as z}from"./ref-R0wBYijq.js";import{T as E}from"./transitional-styles-C-VAQSys.js";import{s as B,F as R,L as F,u as N}from"./unwrap-slots-CufDiWNZ.js";import{t as H}from"./tokens.style-BcVhf7GG.js";import{b as q,d as K}from"./declarative-layout-mixins-DFPXvh_g.js";import{G as J}from"./button.component-CymCYp3R.js";import{I as Q}from"./dot-grid-one-horizontal-CKehN2fu.js";import{G as U}from"./popover.component-D-f0JXvk.js";import"./menu-heading-zPFZ9WN9.js";var V=Object.defineProperty,X=Object.getOwnPropertyDescriptor,L=e=>{throw TypeError(e)},Y=(e,t,s,a)=>{for(var r=a>1?void 0:a?X(t,s):t,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(t,s,r):i(r))||r);return a&&r&&V(t,s,r),r},Z=(e,t,s)=>t.has(e)||L("Cannot "+s),j=(e,t,s)=>(Z(e,t,"read from private field"),s?s.call(e):t.get(e)),ee=(e,t,s)=>t.has(e)?L("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),_;let h=class extends R(k){constructor(){super(...arguments),ee(this,_,()=>{this.dispatchCustomEvent("gds-menu-item-click",{bubbles:!0,composed:!0})})}connectedCallback(){super.connectedCallback(),this.setAttribute("role","menuitem"),this.addEventListener("keydown",e=>{e.key!=="Enter"&&e.key!==" "||(e.preventDefault(),this.click())}),this.addEventListener("click",j(this,_)),E.instance.apply(this,"gds-option")}render(){return c`<div class="item"><slot></slot></div>`}};_=new WeakMap;h.styles=[B];h=Y([C("gds-menu-item")],h);var te=Object.defineProperty,se=Object.getOwnPropertyDescriptor,G=e=>{throw TypeError(e)},re=(e,t,s,a)=>{for(var r=a>1?void 0:a?se(t,s):t,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(t,s,r):i(r))||r);return a&&r&&te(t,s,r),r},ae=(e,t,s)=>t.has(e)||G("Cannot "+s),f=(e,t,s)=>(ae(e,t,"read from private field"),s?s.call(e):t.get(e)),ne=(e,t,s)=>t.has(e)?G("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),m;let b=class extends k{constructor(){super(),ne(this,m,z()),new F(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu"),E.instance.apply(this,"gds-listbox")}get navigableItems(){return f(this,m).value?N(f(this,m).value).assignedElements().filter(e=>!e.hasAttribute("isplaceholder")&&e.gdsElementName==="gds-menu-item")||[]:[]}focus(){var e;(e=this.navigableItems[0])==null||e.focus()}render(){return c`<slot ${I(f(this,m))}></slot>`}};m=new WeakMap;b=re([C("gds-menu",{dependsOn:[h]})],b);var oe=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,x=e=>{throw TypeError(e)},d=(e,t,s,a)=>{for(var r=a>1?void 0:a?ie(t,s):t,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(t,s,r):i(r))||r);return a&&r&&oe(t,s,r),r},O=(e,t,s)=>t.has(e)||x("Cannot "+s),l=(e,t,s)=>(O(e,t,"read from private field"),s?s.call(e):t.get(e)),u=(e,t,s)=>t.has(e)?x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),P=(e,t,s,a)=>(O(e,t,"write to private field"),t.set(e,s),s),le=(e,t,s)=>(O(e,t,"access private method"),s),p,y,g,w,$,A;let n=class extends q(K(k)){constructor(){super(...arguments),u(this,$),this.open=!1,this.buttonLabel=M("Open context menu"),this.showLabel=!1,this.label="",this.placement="bottom-start",u(this,p),u(this,y,()=>{var t;l(this,p)||P(this,p,((t=this.shadowRoot)==null?void 0:t.querySelector("#trigger"))??void 0);const e=l(this,p);e&&!e.hasAttribute("data-gds-context-menu-trigger")&&(e.setAttribute("data-gds-context-menu-trigger","true"),e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded",String(this.open)),e.setAttribute("aria-controls","menu"),e.setAttribute("aria-label",this.buttonLabel),e.addEventListener("click",()=>{this.open=!this.open}),e.addEventListener("keydown",s=>{(s.key==="ArrowDown"||s.key==="Enter"||s.key===" ")&&(s.preventDefault(),this.open=!0)}))}),u(this,g,()=>{const e=this._elTriggerSlot.assignedNodes({flatten:!0}).find(t=>t instanceof HTMLElement);e&&P(this,p,e),l(this,y).call(this)}),u(this,w,()=>c`<gds-popover
      id="menu"
      autofocus
      .open=${this.open}
      .triggerRef=${Promise.resolve(l(this,p))}
      .anchorRef=${Promise.resolve(l(this,p))}
      .label=${this.label}
      .placement=${this.placement}
      @gds-ui-state=${e=>this.open=e.detail.open}
    >
      <gds-menu
        aria-label=${this.label??this.buttonLabel}
        @gds-menu-item-click=${le(this,$,A)}
      >
        <slot></slot>
      </gds-menu>
    </gds-popover>`)}connectedCallback(){super.connectedCallback(),E.instance.apply(this,"gds-context-menu"),this.updateComplete.then(l(this,g))}render(){return c`<slot
        name="trigger"
        @slotchange=${l(this,g)}
        ><gds-button .rank=${"secondary"} id="trigger">
          ${this.showLabel?c`<slot name="icon" slot="lead"
                  ><gds-icon-dot-grid-one-horizontal></gds-icon-dot-grid-one-horizontal></slot
                >${this.buttonLabel}`:c`<slot name="icon"
                ><gds-icon-dot-grid-one-horizontal></gds-icon-dot-grid-one-horizontal
              ></slot>`}
        </gds-button>
      </slot>
      ${W(this.open,l(this,w))}`}};p=new WeakMap;y=new WeakMap;g=new WeakMap;w=new WeakMap;$=new WeakSet;A=function(){this.open=!1};n.styles=[H];n.shadowRootOptions={mode:"open",delegatesFocus:!0};d([v({type:Boolean,reflect:!0})],n.prototype,"open",2);d([v({attribute:"button-label"})],n.prototype,"buttonLabel",2);d([v({attribute:"show-label",type:Boolean})],n.prototype,"showLabel",2);d([v()],n.prototype,"label",2);d([v()],n.prototype,"placement",2);d([T('slot[name="icon"]')],n.prototype,"_elIconSlot",2);d([D('slot[name="trigger"]')],n.prototype,"_elTriggerSlot",2);n=d([C("gds-context-menu",{dependsOn:[h,b,U,J,Q]}),S()],n);n.define();h.define();
