import { Controls, Canvas, Meta, Story, Markdown } from '@storybook/blocks'
import { Dropdown } from './dropdown'
import * as DropdownStories from './dropdown.stories';

export const Template = ({ align, ...props }) => (
  <div style={{ paddingBottom: '150px' }}>
    <Dropdown {...props}></Dropdown>
  </div>
)

<Meta of={DropdownStories} />

# Dropdown

Dropdown Component

<Story of={DropdownStories.Dropdown} />

## Options

The dropdown options should be provided as an array of objects with label and value. When a user chooses an option the value will be selected and emitted to onChange.

```typescript
const options = [
  { label: 'Select', value: null },
  { label: 'Tacos', value: 'tacos' },
  { label: 'Pizza', value: 'pizza' },
  { label: 'Sushi', value: 'sushi' },
]
```

Set the `value` prop to set the selected option/options. In multiple select mode, the value should be an array of values.

By default, the dropdown will look for a label and value pair for the data. The following inputs can be set to alter the options if neccesary.

<Markdown>
  {`
  | Input (attribute) | Description                                                          | Default |
  | :---------------- | :------------------------------------------------------------------- | :------ |
  | useValue          | Which key to use as value.                                           | \`value\` |
  | display           | Which key to use as display value when selected and in options list. | \`label\` |
  `}
</Markdown>

## Value Object

Dropdown option values can even be an object, but note that it requires a `compareWith` function to uniquely identify each object. Eg:

<Canvas>
  <div style={{ height: '200px' }}>
    <Dropdown
      label="Complex values"
      options={[
        { label: 'Tacos', value: { id: 'tacos', kitchen: 'mexican' } },
        { label: 'Pizza', value: { id: 'pizza', kitchen: 'italian' } },
        { label: 'Sushi', value: { id: 'sushi', kitchen: 'japanese' } },
      ]}
      compareWith={(meal1, meal2) => meal1.id === meal2.id}
      onChange={(value) => console.log('OnChange', value)}
    />
  </div>
</Canvas>

## Texts and placeholder

Custom texts can be set using the `texts` prop which takes an object with the following keys:

<Markdown>
  {`
  | Key           | Type     | Description                                 |
  | :------------ | :------- | :------------------------------------------ |
  | \`placeholder\` | \`string\` | Text to display when no option is selected. |
  `}
</Markdown>

<Canvas>
  <div style={{ height: '200px' }}>
    <Dropdown
      label="Awesome label!!"
      informationLabel="Awesome informationLabel!!"
      texts={{
        placeholder: 'Select me please!',
      }}
      options={[
        { label: 'Tacos', value: { id: 'tacos', kitchen: 'mexican' } },
        { label: 'Pizza', value: { id: 'pizza', kitchen: 'italian' } },
        { label: 'Sushi', value: { id: 'sushi', kitchen: 'japanese' } },
      ]}
      compareWith={(meal1, meal2) => meal1.id === meal2.id}
      onChange={(value) => console.log('OnChange', value)}
    />
  </div>
</Canvas>

## Option headings

You can add an option heading by adding the `heading` property to the to the option object and set it to `true`.

<Canvas>
  <Dropdown
    label="Option headings"
    options={[
      { label: 'Lunch', heading: true },
      { label: 'Tacos', value: 'tacos' },
      { label: 'Pizza', value: 'pizza' },
      { label: 'Sushi', value: 'sushi' },
      { label: 'Dinner', heading: true },
      { label: 'Burger', value: 'burger' },
      { label: 'Pasta', value: 'pasta' },
      { label: 'Ramen', value: 'ramen' },
    ]}
  />
</Canvas>

## Multi select

<Canvas>
  <div style={{ height: '200px' }}>
    <Dropdown
      label="Multi select"
      multiSelect
      options={[
        { label: 'Tacos', value: 'tacos' },
        { label: 'Pizza', value: 'pizza' },
        { label: 'Sushi', value: 'sushi' },
      ]}
      onChange={(value) => console.log('OnChange', value)}
    />
  </div>
</Canvas>

## Small dropdown

Size can be controlled using the `size` prop. The default size is `medium`.

Optionally, the label can also be hidden using the `hideLabel` prop.

<Canvas>
  <div style={{ height: '200px' }}>
    <Dropdown
      label="Small dropdown"
      size="small"
      hideLabel
      options={[
        { label: 'Tacos', value: 'tacos' },
        { label: 'Pizza', value: 'pizza' },
        { label: 'Sushi', value: 'sushi' },
      ]}
      onChange={(value) => console.log('OnChange', value)}
    />
  </div>
</Canvas>

## Available props

<Controls />
