import { Meta, Canvas, Story } from '@storybook/addon-docs/blocks'
import { background } from '@storybook/theming'

<Meta
  title="Components/Modal"
  argTypes={{
    headline: { control: 'text' },
    body: { control: 'text' },
  }}
/>

export const DialogueTemplate = ({ headline, body }) => {
  return `
    <section role='dialog'
           aria-modal="true"
           aria-labelledby="modal_header"
           aria-describedby="modal_body">
    <header>
      <div id="modal_header" class="heading-m">${headline}</div>
      <button class='close'>
        <span class='sr-only'>Close</span>
        <i></i>
      </button>
    </header>
    <div class='body' id="modal_body">
      ${body}
    </div>
    <footer>
      <button type="button">Secondary</button><button type="submit">Primary</button>
    </footer>
  </section>`
}

export const SlideoutTemplate = ({ headline, body, variant }) => {
  return `
    <aside role='dialog'
         role='dialog'
         aria-modal="true"
         aria-labelledby="modal_header"
         aria-describedby="modal_body"
         class="${variant !== 'default' ? `gds-slide-out--${variant}` : ''}"
         >
    <header>
      <h3 id="modal_header" class="heading-m">${headline}</h3>
      <button class='close'>
        <span class='sr-only'>Close</span>
        <i></i>
      </button>
    </header>
    <div class='body' id="modal_body">
      ${body}
    </div>
    <footer>
      <button type="button">Secondary</button><button type="submit">Primary</button>
    </footer>
  </aside>`
}

export const TakeoverTemplate = ({ headline, body }) => {
  return `
    <main role='dialog'
        aria-modal="true"
        aria-labelledby="modal_header"
        aria-describedby="modal_body">
    <header>
      <h3 id="modal_header">${headline}</h3>
      <button class='close'>
        <span class='sr-only'>Close</span>
        <i></i>
      </button>
    </header>
    <div class='body' id="modal_body">
      ${body}
    </div>
    <footer>
      <button type="button">Secondary</button><button type="submit">Primary</button>
    </footer>
  </main>`
}

<style>
  {`
    main {
      position: relative !important;
      max-height: 500px;
      max-width: 100%;
    }
    section {
      position: relative !important;
      margin: auto;
      max-height: 300px;
    }
    aside {
      max-height: 500px;
      margin-left: auto;
    }
    .backdrop {
      position: absolute !important;
      margin-bottom: 1.5rem;
      z-index: -1 !important;
    }
`}
</style>

# Modals

<div role="alert" class="info mb-7 mt-5">
  <main>
    <h3>Missing JavaScript!</h3>
    <p>
      Please note that the examples below just represent the html markup and
      they won't work without JavaScript. Please checkout the framework
      implementations for "working" examples.
    </p>
  </main>
  <footer>
    <a target="_blank" href="./../angular/?path=/docs/components-modal">
      View Angular component
    </a>
    <a target="_blank" href="./../react/?path=/docs/components-modal">
      View React component
    </a>
  </footer>
</div>

## Modal variants

Green currently provides three different variants of the modal - **dialog**, **aside** (aka slide out) and **fullscreen** (aka take over).

### Dialogue

Dialog modals are typically used for confirming actions or displaying information that the user must act on before continuing with intended flow.

<Canvas>
  <Story
    name="Dialogue"
    parameters={{
      componentIds: ['component-dialogue'],
    }}
    args={{
      headline: 'Dialogue headline',
      body: '<p>Modal body text. Lorem ipsum dolor sit amet.</p>',
    }}
  >
    {DialogueTemplate.bind({})}
  </Story>
</Canvas>

### Slide-out

Aside modals or slide out modals are typically used for displaying details regarding some information, i.e. transaction details in a list of transactions. It slides in from the right on desktop and from the bottom of the viewport on smaller screens like mobile devices.

<Canvas>
  <Story
    name="Slide-out"
    parameters={{
      componentIds: ['component-slideout'],
    }}
    args={{
      headline: 'Slide-out headline',
      body: '<p>Modal body text. Lorem ipsum dolor sit amet.</p>',
    }}
    argTypes={{
      headline: { control: 'text' },
      body: { control: 'text' },
      variant: {
        control: 'select',
        options: ['default', '768', '960'],
      },
    }}
  >
    {SlideoutTemplate.bind({})}
  </Story>
</Canvas>

### Slide-out variants

#### Slide-out 768

<Canvas>
  <Story
    name="Slide-out 768"
    parameters={{
      componentIds: ['component-slideout'],
    }}
    args={{
      headline: 'Slide-out headline',
      body: '<p>Modal body text. Lorem ipsum dolor sit amet.</p>',
      variant: '768',
    }}
    argTypes={{
      headline: { control: 'text' },
      body: { control: 'text' },
      variant: {
        control: 'select',
        options: ['default', '768', '960'],
      },
    }}
  >
    {SlideoutTemplate.bind({})}
  </Story>
</Canvas>

#### Slide-out 960

<Canvas>
  <Story
    name="Slide-out 960"
    parameters={{
      componentIds: ['component-slideout'],
    }}
    args={{
      headline: 'Slide-out headline',
      body: '<p>Modal body text. Lorem ipsum dolor sit amet.</p>',
      variant: '960',
    }}
    argTypes={{
      headline: { control: 'text' },
      body: { control: 'text' },
      variant: {
        control: 'select',
        options: ['default', '768', '960'],
      },
    }}
  >
    {SlideoutTemplate.bind({})}
  </Story>
</Canvas>

### Fullscreen

Fullscreen modals or takeovers are typically used for wizards or for complex flows requiring a lot of screen estate.

<Canvas>
  <Story
    name="Takeover"
    parameters={{
      componentIds: ['component-takeover'],
    }}
    args={{
      headline: 'Takeover headline',
      body: '<p>Modal body text. Lorem ipsum dolor sit amet.</p>',
    }}
  >
    {TakeoverTemplate.bind({})}
  </Story>
</Canvas>

## Scroll body content

Content placed inside modal body, ie. element with <code>.body</code> class will scroll horizontally if it overflows the height of the modal.

<Canvas>
  <div>
    <section
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal_header"
      aria-describedby="modal_body"
    >
      <header id="modal_header">
        <h3>Header</h3>
        <button class="close">
          <span class="sr-only">Close</span>
          <i></i>
        </button>
      </header>
      <div class="body" id="modal_body">
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer
          finibus sodales diam a semper. Nam vel enim ut purus lobortis
          sagittis. Etiam ut egestas velit. Cras eu finibus turpis. Cras in nisi
          sagittis, bibendum tortor vel, tristique enim. Praesent vestibulum
          volutpat eros, in cursus enim laoreet nec. Suspendisse aliquam ex eget
          velit feugiat, rhoncus auctor tortor egestas. Curabitur imperdiet
          velit nec hendrerit accumsan. Nam ut lacinia felis, non lacinia quam.
          Pellentesque placerat dolor malesuada, viverra nulla a, commodo ex.
          Praesent vulputate sollicitudin enim, a elementum turpis.
        </p>
      </div>
      <footer>
        <button type="button">Secondary</button>
        <button type="submit">Primary</button>
      </footer>
    </section>
  </div>
</Canvas>

## Backdrops

<Canvas>
  <div>
    <section
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal_header"
      aria-describedby="modal_body"
    >
      <header id="modal_header">
        <h3>Header</h3>
        <button class="close">
          <span class="sr-only">Close</span>
          <i></i>
        </button>
      </header>
      <div class="body" id="modal_body">
        <p>Modal body</p>
      </div>
      <footer>
        <button type="button">Secondary</button>
        <button type="submit">Primary</button>
      </footer>
    </section>
    <div class="backdrop"></div>
  </div>
</Canvas>
