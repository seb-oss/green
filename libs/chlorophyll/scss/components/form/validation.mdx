import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks'

<Meta title="Components/Form/Validation" />

# Form validation

Form validation in Green Chlorophyll relies on `:valid` and `:invalid` state of inputs scoped using the `.was-validated` class. The class `.was-validated` is preferably added to the form element once the form has been submitted or when validations should be displayed. Without it, `:valid` and `:invalid` and won't have any effect and no feedback will be displayed.
It's also possible to add either `.is-valid` or `.is-invalid` directly to an inputs to give feedback before the form has been submitted or to override the actual state.

## Default form with validation

<form autocomplete="off" class="was-validated">
  <div class="form-group">
    <label for="input">Input label</label>
    <input id="input" type="text" required />
    <span class="form-info">Field is required!</span>
  </div>

  <div class="form-group">
    <label for="inputLong">Input label</label>
    <input id="inputLong" type="text" required />
    <span class="form-info">
      Field is required! Very long error message, lorem ipsum dolar sit amet.
    </span>
  </div>

  <div class="form-group">
    <label for="numberInput">Input label</label>
    <input id="numberInput" type="number" min="1" max="5" required />
    <span class="form-info">Invalid number!</span>
  </div>
</form>

## Horizontal form with validation

<form class="horizontal was-validated" autocomplete="off">
  <div class="form-group">
    <label for="inputHorizontal">Input label</label>
    <input id="inputHorizontal" type="text" required />
    <span class="form-info">Field is required!</span>
  </div>

  <div class="form-group">
    <label for="inputHorizontalLong">Input label</label>
    <input id="inputHorizontalLong" type="text" required />
    <span class="form-info">
      Field is required! Very long error message, lorem ipsum dolar sit amet.
    </span>
  </div>

  <div class="form-group">
    <label for="numberInputHorizontal">Input label</label>
    <input id="numberInputHorizontal" type="number" min="1" max="5" required />
    <span class="form-info">Invalid number!</span>
  </div>
  <button>Button</button>
</form>

## Validation without content

<form autocomplete="off" class="was-validated">
  <div class="form-group">
    <label for="inputNoFeedback">Input label</label>
    <input id="inputNoFeedback" type="text" required placeholder="Invalid" />
    <span class="form-info" />
  </div>

  <div class="form-group">
    <label for="inputNoinfo">Input label</label>
    <input id="inputNoFeedback" type="text" placeholder="Valid" />
    <span class="form-info" />
  </div>
</form>

## Explicit validation

Use `.is-valid` and/or `.is-invalid` to explicitly indicate input validity (usually on form submit or value change).

<form autocomplete="off">
  <div class="form-group">
    <label for="inputValid">Input label</label>
    <input id="inputValid" type="text" class="is-valid" value="Some value" required />
    <span class="form-info">Valid input</span>
  </div>

  <div class="form-group">
    <label for="inputInvalid">Input label</label>
    <input id="inputInvalid" type="text" class="is-invalid" value="Valid but still not" />
    <span class="form-info">Invalid input</span>
  </div>
</form>

## Validation states

Using `.was-validated`, form inputs can either be marked as valid or invalid depending on the input state (`:valid` or `:invalid`).

<form autocomplete="off" class="was-validated" novalidate>
  <div class="form-group">
    <label for="inputValid">Input label</label>
    <span class="form-info">Lorem ipsum description</span>
    <input id="inputValid" type="text" value="Some value" required />
    <span class="form-info">Neutral</span>
  </div>

  <div class="form-group">
    <label for="inputValid">Input label</label>
    <span class="form-info">Lorem ipsum description</span>
    <input id="inputValid" type="text" value="Some value" required />
    <span class="form-info">Valid</span>
  </div>

  <div class="form-group">
    <label for="inputValid">Input label</label>
    <span class="form-info">Lorem ipsum description</span>
    <input id="inputValid" type="text" required />
    <span class="form-info">Error</span>
  </div>
</form>

Using `.is-valid` and/or `.is-invalid`, form inputs can either be marked as valid, invalid or neutral depending on which class that has been applied to the input. If no class has been applied but the `.form-info` element is present, it's considered to be neutral i.e. just plain info related to the input.

<form autocomplete="off" novalidate>
  <div class="form-group">
    <label for="inputInvalid">Input label</label>
    <span class="form-info">
      Lorem ipsum very long description of input and what should be entered
    </span>
    <input id="inputInvalid" type="text" />
    <span class="form-info">Neutral</span>
  </div>

  <div class="form-group">
    <label for="inputInvalid">Input label</label>
    <span class="form-info">
      Lorem ipsum very long description of input and what should be entered
    </span>
    <input id="inputInvalid" type="text" class="is-valid" />
    <span class="form-info">Valid</span>
  </div>

  <div class="form-group">
    <label for="inputInvalid">Input label</label>
    <span class="form-info">
      Lorem ipsum very long description of input and what should be entered
    </span>
    <input id="inputInvalid" type="text" class="is-invalid" />
    <span class="form-info">Error</span>
  </div>
</form>

## Group and form control validation

<form>
  <div class="form-group">
    <label for="inputValid">Input group label</label>
    <span class="form-info">Lorem ipsum group description</span>
    <div class="group is-invalid">
      <input id="inputValid1" type="text" required />
      <input id="inputValid2" type="text" required />
      <button type="button">Button</button>
    </div>
    <span class="form-info">Error</span>
  </div>

  <div class="form-group">
    <label for="inputValid">Input group label</label>
    <span class="form-info">Lorem ipsum group description</span>
    <div class="group group-border is-invalid">
      <input id="inputValid1" type="text" required />
      <input id="inputValid2" type="text" required />
      <button type="button">Button</button>
    </div>
    <span class="form-info">Error</span>
  </div>

  <div class="form-group">
    <fieldset aria-describedby="checkboxGroupHelp1" class="is-invalid">
      <legend>Invalid checkbox group</legend>
      <span id="checkboxGroupHelp1" class="form-info">
        Checkbox group description
      </span>
      <label class="form-control">
        <input required class="is-invalid" type="checkbox" />
        <span>One</span>
        <i />
      </label>
      <label class="form-control">
        <input required class="is-invalid" type="checkbox" required />
        <span>Two</span>
        <i />
      </label>
    </fieldset>
    <span class="form-info">Error</span>
  </div>
</form>

