@use '../../common';
@use '../../tokens/shame' as newTokens;

$color: newTokens.$text-primary-color;
$background: newTokens.$form-control-bg;

@mixin text-input {
  @include common.padding-horizontal(5);
  @include common.padding-vertical(4);
  @include common.add-border-radius();
  @include common.add-border();
  @include common.add-border-color();
  @include common.add-focus();
  align-items: center;
  background-color: $background;
  color: $color;
  cursor: pointer;
  display: flex;
  justify-content: center;

  @media screen and (-ms-high-contrast: active) {
    border: 2px solid currentcolor;
  }
}

@mixin horizontal-layout() {
  /* use flex layout on small screens and up, ie. stack on small screens (mobile devices) */
  @include common.media-breakpoint-up('sm') {
    display: flex;
  }
  /* inline child elements on small screens and up unless it's a label
  for form control, which should be positioned on top */
  > {
    *:not(label:not(.form-control)) {
      @include common.media-breakpoint-up('sm') {
        @include common.margin-end(4);
        display: inline-flex !important;
      }
    }
  }

  // form group fieldset (groups of radio buttons or checkboxes)
  .form-group > {
    fieldset {
      @include common.media-breakpoint-up('sm') {
        margin-bottom: auto;
        margin-top: 1.625rem;
      }

      label.form-control:last-of-type {
        padding-right: 0;
      }

      .form-info {
        @include common.margin-bottom(3);
      }
    }
  }

  // vertically align siblings and adjust for missing label
  .form-group ~ {
    button,
    .form-control,
    .form-text {
      @include common.media-breakpoint-up('sm') {
        margin-bottom: auto;
        margin-top: 1.625rem;
      }
    }
  }

  .form-control {
    display: inline-flex;
  }

  // hide form info as it's not positioned correctly
  &.was-validated .form-group label + .form-info {
    opacity: 0;
  }

  // place form info first
  .form-group label + .form-info {
    order: 1;
  }

  .form-text {
    @include common.padding-vertical(4);
  }
}
