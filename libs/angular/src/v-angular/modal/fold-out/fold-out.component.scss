@use 'sass:math';
@use 'sass:color';
@use '@sebgroup/chlorophyll/src/scss/tokens/mixin-sys-light-2016' as
  light-tokens;
@use '@sebgroup/chlorophyll/src/scss/tokens/z-index';
@use '../../../../../chlorophyll/src/scss/components/button/mixins' as button;
@use '../../../../../chlorophyll/src/scss/components/card/mixins' as card;
@use '../../../../../chlorophyll/src/scss/common';
@use '../../../../../chlorophyll/src/scss/components/dropdown/mixins' as
  dropdown;

:host {
  @include light-tokens.add-variables();
  @include z-index.add-tokens();

  // needed to counteract position: absolute further down
  position: relative;

  .flex-right {
    right: 0;
  }

  .list-width {
    &-fit-content {
      width: fit-content;
    }
    &-max-content {
      width: max-content;
    }
    &-min-content {
      width: min-content;
    }
    &-auto {
      width: auto;
    }
  }

  .fold-out-button {
    @include button.reset();
    @include button.base();
    @include button.icon();
    border-color: transparent;
    color: var(--gds-sys-color-base-800);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    line-height: 0.75;
    padding-inline: 0.4375rem;
    width: auto;

    @media (max-width: 35.98em) {
      min-width: initial;
    }
  }

  .nggv-fold-out__popover {
    @include card.card();
    display: none;
    padding: 0;
    overflow: hidden;
    border: 1px solid var(--gds-sys-color-base-600);

    &-expanded {
      display: block;
      position: absolute;
      bottom: 0;
      transform: translateY(calc(100% + 0.5rem));
      z-index: 1060;
    }
  }

  ::ng-deep .nggv-field-dropdown__options__label {
    @include dropdown.select-option;
    display: flex;
    gap: 0.75rem;
    user-select: none;
    &.delete-option {
      background-color: var(--gds-sys-color-dark-red-2);
      color: var(--gds-sys-color-text-inverted);
    }
  }

  ::ng-deep .nggv-field-dropdown__options__label:hover,
  ::ng-deep .nggv-field-dropdown__options__label:focus-visible,
  ::ng-deep .nggv-field-dropdown__options__label[aria-focus='true'] {
    background-color: var(--gds-sys-color-base-200);
  }

  ::ng-deep .nggv-field-dropdown__options__label.delete-option:hover,
  ::ng-deep .nggv-field-dropdown__options__label.delete-option:focus-visible,
  ::ng-deep
    .nggv-field-dropdown__options__label.delete-option[aria-focus='true'] {
    background-color: var(--gds-sys-color-dark-red-2);
    color: var(--gds-sys-color-text-inverted);
  }

  ::ng-deep .nggv-field-dropdown__options__label:active {
    background-color: var(--gds-sys-color-base-300);
  }

  ::ng-deep .nggv-field-dropdown__options__label.delete-option:active {
    background-color: var(--gds-sys-color-dark-red-2);
    color: var(--gds-sys-color-text-inverted);
  }

  ::ng-deep .nggv-field-dropdown__options__label:focus-visible {
    outline-color: #000;
    outline-offset: -0.25rem;
  }

  ::ng-deep .nggv-field-dropdown__options__label[aria-hidden='true'] {
    display: none;
  }

  ::ng-deep .nggv-field-dropdown__options__label[highlighted] {
    @include dropdown.select-option-highlighted;
    color: var(--gds-sys-color-text-inverted);
  }
}
