<div #foldout>
  <button
    data-thook="fold-out-toggle"
    class="fold-out-button"
    [ngClass]="{ 'no-text': !text }"
    (click)="toggleVisibility()"
    [attr.aria-expanded]="shown"
    [attr.aria-label]="ariaLabel"
  >
    <ng-container *ngTemplateOutlet="text ? withText : default"> </ng-container>
  </button>
  <div
    #childrenContainer
    class="nggv-fold-out__popover"
    [ngClass]="{
      'flex-right': alignOptions === 'right',
      'list-width-fit-content': listWidth === 'fit-content',
      'list-width-max-content': listWidth === 'max-content',
      'list-width-min-content': listWidth === 'min-content',
      'list-width-auto': listWidth === 'auto',
    }"
    [class.nggv-fold-out__popover-expanded]="shown"
    (click)="toggleVisibility()"
  >
    <ng-content></ng-content>
  </div>
</div>

<ng-template #withText>
  {{ text }}
  <gds-icon-dot-grid-one-horizontal
    width="24"
    height="24"
    *nggCoreElement
  ></gds-icon-dot-grid-one-horizontal>
</ng-template>

<ng-template #default>
  <gds-icon-dot-grid-one-horizontal
    width="24"
    height="24"
    *nggCoreElement
  ></gds-icon-dot-grid-one-horizontal>
  <ng-template></ng-template
></ng-template>
