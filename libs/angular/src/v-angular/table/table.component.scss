@use '@sebgroup/chlorophyll/src/scss/tokens/mixin-sys-light-2016' as
  light-tokens;
@use '@sebgroup/chlorophyll/src/scss/tokens/shape';
@use '@sebgroup/chlorophyll/src/scss/components/table/mixins' as table;
@use '../../../../chlorophyll/src/scss/components/checkbox/mixins' as checkbox;
@use '../../../../chlorophyll/src/scss/components/form/mixins' as form-mixins;

:host {
  @include light-tokens.add-variables();
  @include shape.add-tokens();
}

::ng-deep .gds-table {
  @include table.add-table();
  width: 100%;

  border-bottom: none;

  tr:hover td {
    background-color: var(--gds-sys-color-base-100);
  }

  .gds-table__numeric-col,
  .gds-table__numeric-col {
    text-align: right;
  }

  thead tr th.gds-table__numeric-col .gds-table-sort {
    justify-content: end;
  }

  th,
  td {
    &.gds-table__numeric-col + :not(.gds-table__numeric-col) {
      padding-left: 1rem;
    }
  }

  th button {
    background-color: rgba(0, 0, 0, 0);
    border: 0;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    padding: 0;
    cursor: pointer;
  }

  td {
    cursor: pointer;
  }

  tfoot {
    border-top: 1px solid;
    border-bottom: none;
    font-weight: 500;

    ::ng-deep {
      td {
        padding: var(--sg-table-cell-padding-y) var(--sg-table-cell-padding-x);
      }
    }
  }

  th.column {
    &__check {
      height: vanilla-px-to-rem(40px - 8px);
      width: vanilla-px-to-rem(40px);

      div {
        min-height: 100%;
      }

      input:checked + label {
        &::after {
          top: 0.6rem;
          display: inline;
        }
      }

      label {
        display: inline;
        padding: 0;
        &::before {
          top: 0.55rem;
        }
      }
    }
  }

  td.column {
    &__check {
      width: vanilla-px-to-rem(40px);

      div {
        min-height: unset;
      }

      label {
        padding: 0;
        &::before {
          margin: 0;
        }
      }
    }
  }

  tr.row {
    &__expand {
      background-color: var(--gds-sys-color-base-100);

      .gds-item-field-wrap {
        display: flex;
        flex-wrap: nowrap;

        .chevron-field {
          width: 1.5rem;

          svg {
            transition: transform 0.3s ease;
          }

          &[aria-expanded='true'] svg {
            transform: rotate(-180deg);
          }
        }
      }
    }
  }

  @include checkbox.add-checkbox();

  .gds-field-checkbox-wrap .gds-form-control:has(input[type='checkbox']) {
    @include form-mixins.add-form-control;
    line-height: 1.125rem;
    padding: 0;
  }

  #thead-checkbox input[type='checkbox'] ~ i {
    box-shadow: inset 0 0 0 1px var(--gds-sys-color-text-inverted);
    background-color: transparent;

    &:after {
      box-sizing: border-box;
    }
  }

  #thead-checkbox:has(input[type='checkbox']:focus-visible):focus-within {
    outline-color: var(--gds-sys-color-white);
  }

  #thead-checkbox input[type='checkbox']:hover {
    &:not(:checked) ~ i {
      box-shadow: inset 0 0 0 1px #ababab;
      &::after {
        border-color: #ababab;
      }
    }

    &:checked ~ i {
      box-shadow: inset 0 0 0 1px #ababab;
      &::after {
        border-color: #ababab;
      }
    }
  }
}
