var C=h=>{throw TypeError(h)};var w=(h,t,s)=>t.has(h)||C("Cannot "+s);var e=(h,t,s)=>(w(h,t,"read from private field"),s?s.call(h):t.get(h)),a=(h,t,s)=>t.has(h)?C("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,s),d=(h,t,s,S)=>(w(h,t,"write to private field"),S?S.call(h,s):t.set(h,s),s),f=(h,t,s)=>(w(h,t,"access private method"),s);var i,u,r,y,c,o,n,m,l,R,p,E;class A{constructor(t){a(this,l);a(this,i,!g());a(this,u,!1);a(this,r,[]);a(this,y,[]);a(this,c,new Map);a(this,o,new Map);a(this,n,[]);a(this,m,[]);this.host=t,this.host.addController(this)}hostConnected(){f(this,l,E).call(this)}has(t){return e(this,i)?e(this,o).has(t):e(this,c).has(t)}inject(t,s){f(this,l,R).call(this,t,s),f(this,l,p).call(this)}clear(t){e(this,i)?this.host.updateComplete.then(()=>{const s=e(this,o).get(t);s==null||s.remove(),e(this,o).delete(t)}):e(this,c).delete(t),f(this,l,p).call(this)}clearAll(){e(this,i)?this.host.updateComplete.then(()=>{e(this,o).forEach(t=>t.remove()),e(this,n).forEach(t=>t.remove()),e(this,o).clear(),d(this,n,[])}):this.host.shadowRoot&&(this.host.shadowRoot.adoptedStyleSheets=[],e(this,c).clear(),d(this,r,[]))}clearInitial(){e(this,i)?this.host.updateComplete.then(()=>{e(this,n).forEach(t=>t.remove()),d(this,n,[])}):d(this,r,[]),f(this,l,p).call(this)}restoreInitial(){e(this,i)?e(this,m).forEach(t=>{e(this,n).push(t.cloneNode(!0))}):d(this,r,[...e(this,y)]),f(this,l,p).call(this)}}i=new WeakMap,u=new WeakMap,r=new WeakMap,y=new WeakMap,c=new WeakMap,o=new WeakMap,n=new WeakMap,m=new WeakMap,l=new WeakSet,R=function(t,s){if(e(this,i)){let S=e(this,o).get(t);S||(S=document.createElement("style"),e(this,o).set(t,S)),S.textContent=s.cssText}else{if(!this.host.shadowRoot||!s.styleSheet)return;e(this,c).set(t,s.styleSheet)}},p=function(){if(e(this,i))this.host.updateComplete.then(()=>{this.host.shadowRoot&&(this.host.shadowRoot.querySelectorAll("style").forEach(t=>{t.remove()}),e(this,n).forEach(t=>{var s;(s=this.host.shadowRoot)==null||s.appendChild(t)}),e(this,o).forEach(t=>{var s;(s=this.host.shadowRoot)==null||s.appendChild(t)}))});else{if(!this.host.shadowRoot)return;this.host.shadowRoot.adoptedStyleSheets=[...e(this,r),...Array.from(e(this,c).values())]}},E=function(){e(this,u)||(e(this,i)?this.host.updateComplete.then(()=>{this.host.shadowRoot&&this.host.shadowRoot.querySelectorAll("style").forEach(t=>{e(this,n).push(t),e(this,m).push(t.cloneNode(!0))})}):this.host.shadowRoot&&e(this,r).length===0&&(d(this,r,[...this.host.shadowRoot.adoptedStyleSheets||[]]),d(this,y,[...e(this,r)])),d(this,u,!0))};function g(){try{return new CSSStyleSheet,!0}catch{return!1}}export{A as D,g as s};
