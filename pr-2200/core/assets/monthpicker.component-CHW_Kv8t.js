import{m as l,l as Y}from"./runtime-CNluP0A8.js";import{x as f}from"./lit-element-Bx14lxc-.js";import{n as a,r as $}from"./Reflect-DJ7r0WLU.js";import{a as E}from"./query-p8xgzTDt.js";import{e as w,o as F}from"./if-defined-BAXgs-ZI.js";import{n as P}from"./when-BR7zwNJC.js";import{G as A,g as N}from"./gds-element-DJNCW3iR.js";import{s as O}from"./gridpicker.styles-Cw8p4SVW.js";import{t as S}from"./tokens.style-iX6aIK9m.js";import{T}from"./transitional-styles-DRTvhbpp.js";import{w as L}from"./watch-tFciLXSI.js";import{d as g}from"./attribute-converters-CdI0trPX.js";import{l as z,i as y,a as b,s as v}from"./index-C4WLrI9v.js";var B=Object.defineProperty,G=Object.getOwnPropertyDescriptor,_=t=>{throw TypeError(t)},n=(t,e,o,r)=>{for(var h=r>1?void 0:r?G(e,o):e,c=t.length-1,i;c>=0;c--)(i=t[c])&&(h=(r?i(e,o,h):i(h))||h);return r&&h&&B(e,o,h),h},U=(t,e,o)=>e.has(t)||_("Cannot "+o),J=(t,e,o)=>e.has(t)?_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),m=(t,e,o)=>(U(t,e,"access private method"),o),d,x,C,D,k;const M=[l("January"),l("February"),l("March"),l("April"),l("May"),l("June"),l("July"),l("August"),l("September"),l("October"),l("November"),l("December")];let s=class extends A{constructor(){super(...arguments),J(this,d),this.min=new Date(new Date().getFullYear()-10,0,1),this.max=new Date(new Date().getFullYear()+10,0,1),this.hideExtraneousMonths=!1,this.columns=4,this.rows=3,this.noCurrentMonth=!1,this.focusedDate=new Date,this.longMonthText=!1,this.size="large",this.monthNumber=!1,this._currentLocale=navigator.language}get focusedMonth(){return this.focusedDate.getMonth()}set focusedMonth(t){const e=z(new Date(this.focusedYear,t,1)),o=new Date(this.focusedDate);o.setDate(Math.min(this.focusedDate.getDate(),e.getDate())),o.setMonth(t),o.setHours(12,0,0,0),this.focusedDate=o}get focusedYear(){return this.focusedDate.getFullYear()}set focusedYear(t){this.focusedDate=new Date(this.focusedDate.setFullYear(t))}getMonthCell(t){var e;return(e=this.shadowRoot)==null?void 0:e.querySelector(`#monthCell-${t}`)}connectedCallback(){super.connectedCallback(),T.instance.apply(this,"gds-monthpicker"),this.addEventListener("keydown",m(this,d,k)),window.addEventListener("lit-localize-status",t=>{t.detail.status==="ready"&&(this._currentLocale=t.detail.readyLocale)})}focus(){var t;super.focus(),(t=this._elFocusedCell)==null||t.focus()}render(){const t=new Date().getFullYear(),e=new Date().getMonth();return f` <table
      role="grid"
      class="${w({small:this.size=="small"})}"
      aria-label="${F(this.label)}"
    >
      <tbody role="rowgroup">
        ${Array.from({length:this.rows}).map((o,r)=>f`
            <tr role="row">
              ${M.slice(r*this.columns,r*this.columns+this.columns).map((h,c)=>{const i=r*this.columns+c;if(i>=M.length)return f`<td inert></td>`;const u=new Date(this.focusedYear,i,1),p=(u<this.min||u>this.max)&&!y(u,this.min)&&!y(u,this.max);return P(!this.hideExtraneousMonths||!p,()=>f`<td
                        class="${w({small:this.size=="small",short:this.monthNumber,wide:!this.longMonthText,long:this.longMonthText,today:!this.noCurrentMonth&&t==this.focusedYear&&e==i,disabled:!!p})}"
                        ?disabled=${p}
                        tabindex="${this.focusedMonth==i?0:-1}"
                        aria-selected="${m(this,d,C).call(this)==i?"true":"false"}"
                        @click=${()=>p?null:m(this,d,D).call(this,i)}
                        id="monthCell-${i}"
                      >
                        ${m(this,d,x).call(this,i)}
                      </td>`,()=>f`<td inert></td>`)})}
            </tr>
          `)}
      </tbody>
    </table>`}_valueChanged(){this.value&&(this.focusedDate=this.value)}};d=new WeakSet;x=function(t){if(this.monthNumber)return t+1;const e=M[t];return this.longMonthText?e:e.substring(0,3)};C=function(){return this.value?this.value.getMonth():-1};D=function(t){this.value=new Date(this.focusedYear,t,1,12),this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!1,composed:!1}))};k=function(t){var o;let e=!1;if(t.key==="ArrowLeft")this.focusedMonth>0&&this.focusedDate>b(this.min,1)&&(this.focusedMonth-=1),e=!0;else if(t.key==="ArrowRight")this.focusedMonth<11&&this.focusedDate<v(this.max,1)&&(this.focusedMonth+=1),e=!0;else if(t.key==="ArrowUp")this.focusedMonth>this.columns-1&&this.focusedDate>b(this.min,this.columns)&&(this.focusedMonth-=this.columns),e=!0;else if(t.key==="ArrowDown")this.focusedMonth<12-this.columns&&this.focusedDate<v(this.max,this.columns)&&(this.focusedMonth+=this.columns),e=!0;else if(t.key==="Home")new Date(this.focusedYear,0,1)>this.min?this.focusedMonth=0:this.focusedMonth=this.min.getMonth(),e=!0;else if(t.key==="End")new Date(this.focusedYear,11,1)<this.max?this.focusedMonth=11:this.focusedMonth=this.max.getMonth(),e=!0;else if(t.key==="PageUp"||t.key==="PageDown"){const r=t.key==="PageUp";let h=this.focusedMonth;for(let c=0;c<this.columns;c++){const i=h+(r?-this.columns:this.columns);if(i<0||i>11)break;const u=new Date(this.focusedYear,i,1);if(r&&u<this.min&&!y(u,this.min)||!r&&u>this.max&&!y(u,this.max))break;h=i}h!==this.focusedMonth&&(this.focusedMonth=h),e=!0}else(t.key==="Enter"||t.key===" ")&&((o=this._elFocusedCell)!=null&&o.hasAttribute("disabled")||m(this,d,D).call(this,this.focusedMonth),e=!0);e&&(t.preventDefault(),t.stopPropagation(),this.updateComplete.then(()=>{var r;(r=this._elFocusedCell)==null||r.focus()}))};s.styles=[S,O];s.shadowRootOptions={mode:"open",delegatesFocus:!0};n([a()],s.prototype,"value",2);n([a({converter:g})],s.prototype,"min",2);n([a({converter:g})],s.prototype,"max",2);n([a({type:Boolean,attribute:"hide-extraneous-months"})],s.prototype,"hideExtraneousMonths",2);n([a({type:Number})],s.prototype,"columns",2);n([a({type:Number})],s.prototype,"rows",2);n([a({type:Boolean,attribute:"no-current-month"})],s.prototype,"noCurrentMonth",2);n([a({converter:g})],s.prototype,"focusedDate",2);n([a({type:Number})],s.prototype,"focusedMonth",1);n([a({type:Number})],s.prototype,"focusedYear",1);n([a({type:Boolean,attribute:"long-month-text"})],s.prototype,"longMonthText",2);n([a({reflect:!0})],s.prototype,"size",2);n([a({type:Boolean,attribute:"month-number"})],s.prototype,"monthNumber",2);n([a()],s.prototype,"label",2);n([$()],s.prototype,"_currentLocale",2);n([E('td[tabindex="0"]')],s.prototype,"_elFocusedCell",2);n([L("value")],s.prototype,"_valueChanged",1);s=n([N("gds-monthpicker"),Y()],s);export{s as G};
